<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Biodiverse: Biodiverse::GUI::Tabs::CalculationsTree Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Biodiverse
   &#160;<span id="projectnumber">0.19</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Biodiverse::GUI::Tabs::CalculationsTree Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Biodiverse::GUI::Tabs::CalculationsTree:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree__coll__graph.png" border="0" usemap="#Biodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree_coll__map" alt="Collaboration graph"/></div>
<map name="Biodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree_coll__map" id="Biodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af4fd429fb38e9012a25d9e75aa192bb3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af4fd429fb38e9012a25d9e75aa192bb3"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>i</b></td></tr>
<tr class="separator:af4fd429fb38e9012a25d9e75aa192bb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79576c7817b8b9c127a0300963850941"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a79576c7817b8b9c127a0300963850941"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>EMPTY_STRING</b></td></tr>
<tr class="separator:a79576c7817b8b9c127a0300963850941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0ec03778792794bba584bf4e8fad0d0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad0ec03778792794bba584bf4e8fad0d0"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>SPACE</b></td></tr>
<tr class="separator:ad0ec03778792794bba584bf4e8fad0d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32fba898ddae9941bcbb2dd0a5cb219a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a32fba898ddae9941bcbb2dd0a5cb219a"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>NAME_COLUMN_WIDTH</b></td></tr>
<tr class="separator:a32fba898ddae9941bcbb2dd0a5cb219a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b4dd08e2e08490a73aed9cae1aa190b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6b4dd08e2e08490a73aed9cae1aa190b"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>DESC_COLUMN_WIDTH</b></td></tr>
<tr class="separator:a6b4dd08e2e08490a73aed9cae1aa190b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Avaliable Methods</h2></td></tr>
<tr class="memitem:aab77817e57327bd4d2413b434e99fbb4"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#aab77817e57327bd4d2413b434e99fbb4">updateTypeCheckbox</a> ()</td></tr>
<tr class="separator:aab77817e57327bd4d2413b434e99fbb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dc8b0c1dd2fc30c388ca41ab97249cc"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#a2dc8b0c1dd2fc30c388ca41ab97249cc">onCalculationToggled</a> ()</td></tr>
<tr class="separator:a2dc8b0c1dd2fc30c388ca41ab97249cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac143c361a3758f7c32c5e07ad1561d3f"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#ac143c361a3758f7c32c5e07ad1561d3f">getCalculationsToRun</a> ()</td></tr>
<tr class="separator:ac143c361a3758f7c32c5e07ad1561d3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62dec01d3a2ed92c251322aef316946c"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#a62dec01d3a2ed92c251322aef316946c">onRowCollapsed</a> ()</td></tr>
<tr class="separator:a62dec01d3a2ed92c251322aef316946c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adee48ff360ca6897c6027f2b77db1b1e"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#adee48ff360ca6897c6027f2b77db1b1e">member_of</a> ()</td></tr>
<tr class="separator:adee48ff360ca6897c6027f2b77db1b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2bf00c58cc81b0d51a7993d5a6a8cf5"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#ad2bf00c58cc81b0d51a7993d5a6a8cf5">initCalculationsTree</a> ()</td></tr>
<tr class="separator:ad2bf00c58cc81b0d51a7993d5a6a8cf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be6a44f753d09dc37029b63915c0a66"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#a4be6a44f753d09dc37029b63915c0a66">makeCalculationsModel</a> ()</td></tr>
<tr class="separator:a4be6a44f753d09dc37029b63915c0a66"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="CalculationsTree_8pm_source.html#l00035">35</a> of file <a class="el" href="CalculationsTree_8pm_source.html">CalculationsTree.pm</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ac143c361a3758f7c32c5e07ad1561d3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Tabs::CalculationsTree::getCalculationsToRun </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getCalculationsToRun' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-getCalculationsToRun-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getCalculationsToRun-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getCalculationsToRun-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in getCalculationsToRun: 23</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#ac143c361a3758f7c32c5e07ad1561d3f">getCalculationsToRun</a> {</div>
<div class="line">    my $model = shift;</div>
<div class="line">    my @toRun;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Retrieve all calculations with a check mark</span></div>
<div class="line"><span class="preprocessor"></span>    my $type_iter = $model-&gt;get_iter_first();</div>
<div class="line">    <span class="keywordflow">while</span> ($type_iter) {</div>
<div class="line"></div>
<div class="line">        my $child_iter = $model-&gt;iter_nth_child($type_iter, 0);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">while</span> ($child_iter) {</div>
<div class="line">            my ($checked) = $model-&gt;get($child_iter, MODEL_CHECKED_COL);</div>
<div class="line">            <span class="keywordflow">if</span> ($checked) {</div>
<div class="line">                my ($func) = $model-&gt;get($child_iter, MODEL_FUNCTION_COL);</div>
<div class="line">                push (@toRun, $func);</div>
<div class="line">            }</div>
<div class="line">            $child_iter = $model-&gt;iter_next($child_iter);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $type_iter = $model-&gt;iter_next($type_iter);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> @toRun;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad2bf00c58cc81b0d51a7993d5a6a8cf5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Tabs::CalculationsTree::initCalculationsTree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-initCalculationsTree' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-initCalculationsTree-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-initCalculationsTree-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-initCalculationsTree-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in initCalculationsTree: 49</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#ad2bf00c58cc81b0d51a7993d5a6a8cf5">initCalculationsTree</a> {</div>
<div class="line">    my $tree  = shift;</div>
<div class="line">    my $model = shift;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    # First column - name/type with a checkbox</span></div>
<div class="line"><span class="preprocessor"></span>    my $colName       = Gtk2::TreeViewColumn-&gt;new();</div>
<div class="line">    my $checkRenderer = Gtk2::CellRendererToggle-&gt;new();</div>
<div class="line">    my $nameRenderer  = Gtk2::CellRendererText-&gt;new();</div>
<div class="line">    $checkRenderer-&gt;signal_connect_swapped(toggled =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#a2dc8b0c1dd2fc30c388ca41ab97249cc">onCalculationToggled</a>, $model);</div>
<div class="line"></div>
<div class="line">    $colName-&gt;pack_start($checkRenderer, 0);</div>
<div class="line">    $colName-&gt;pack_start($nameRenderer,  1);</div>
<div class="line">    $colName-&gt;add_attribute($checkRenderer, active       =&gt; MODEL_CHECKED_COL);</div>
<div class="line">    $colName-&gt;add_attribute($checkRenderer, inconsistent =&gt; MODEL_GRAYED_COL);</div>
<div class="line">    $colName-&gt;add_attribute($checkRenderer, visible      =&gt; MODEL_SHOW_CHECKBOX);</div>
<div class="line">    $colName-&gt;add_attribute($nameRenderer,  text         =&gt; MODEL_NAME_COL);</div>
<div class="line"></div>
<div class="line">    my $colIndex = Gtk2::TreeViewColumn-&gt;new();</div>
<div class="line">    my $indexRenderer = Gtk2::CellRendererText-&gt;new();</div>
<div class="line"><span class="preprocessor">    #$indexRenderer-&gt;set(&#39;wrap-mode&#39; =&gt; &#39;word&#39;);  #  no effect?</span></div>
<div class="line"><span class="preprocessor"></span>    $colIndex-&gt;pack_start($indexRenderer, 1);</div>
<div class="line">    $colIndex-&gt;add_attribute($indexRenderer, markup =&gt; MODEL_INDEX_COL);</div>
<div class="line"></div>
<div class="line">    </div>
<div class="line">    my $colDesc = Gtk2::TreeViewColumn-&gt;new();</div>
<div class="line">    my $descRenderer = Gtk2::CellRendererText-&gt;new();</div>
<div class="line">    $colDesc-&gt;pack_start($descRenderer, 1);</div>
<div class="line">    $colDesc-&gt;add_attribute($descRenderer, markup =&gt; MODEL_DESCRIPTION_COL);</div>
<div class="line">    </div>
<div class="line">    $tree-&gt;insert_column($colName,  -1);</div>
<div class="line">    $tree-&gt;insert_column($colIndex, -1);</div>
<div class="line">    $tree-&gt;insert_column($colDesc,  -1);</div>
<div class="line">    $tree-&gt;set_headers_visible(0);</div>
<div class="line">    $tree-&gt;set_model( $model );</div>
<div class="line">    </div>
<div class="line">    $tree-&gt;signal_connect_swapped(<span class="stringliteral">&#39;row-collapsed&#39;</span> =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#a62dec01d3a2ed92c251322aef316946c">onRowCollapsed</a>, $tree);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  set vertical alignment of cells</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $renderer (</div>
<div class="line">        $descRenderer,</div>
<div class="line">        $indexRenderer,</div>
<div class="line">        #$nameRenderer,</div>
<div class="line">        #$checkRenderer</div>
<div class="line">        ) {</div>
<div class="line">        $renderer-&gt;set (yalign =&gt; 0);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a4be6a44f753d09dc37029b63915c0a66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Tabs::CalculationsTree::makeCalculationsModel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-makeCalculationsModel' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-makeCalculationsModel-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-makeCalculationsModel-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-makeCalculationsModel-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in makeCalculationsModel: 140</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#a4be6a44f753d09dc37029b63915c0a66">makeCalculationsModel</a> {</div>
<div class="line">    my $base_ref   = shift;</div>
<div class="line">    my $output_ref = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Try to get a list of analyses that should be checked</span></div>
<div class="line"><span class="preprocessor"></span>    my $checkRef;</div>
<div class="line">    <span class="keywordflow">if</span> ($output_ref) {  #  the latter are <span class="keywordflow">for</span> backwards compatibility</div>
<div class="line">        $checkRef =    $output_ref-&gt;get_param(<span class="stringliteral">&#39;CALCULATIONS_REQUESTED&#39;</span>)</div>
<div class="line">                    or $output_ref-&gt;get_param(<span class="stringliteral">&#39;ANALYSES_REQUESTED&#39;</span>)</div>
<div class="line">                    or $output_ref-&gt;get_param(<span class="stringliteral">&#39;ANALYSES_RAN&#39;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (! defined $checkRef) {</div>
<div class="line">        $checkRef = [$EMPTY_STRING] ;  # trap other cases</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #print &quot;[Spatial tab] Analyses ran - &quot; . join (&quot; &quot;, @$checkRef) . &quot;\n&quot; if scalar @$checkRef;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my @treestore_args = (</div>
<div class="line">        <span class="stringliteral">&#39;Glib::String&#39;</span>,         # Name</div>
<div class="line">        <span class="stringliteral">&#39;Glib::String&#39;</span>,         # Index</div>
<div class="line">        <span class="stringliteral">&#39;Glib::String&#39;</span>,         # Description</div>
<div class="line">        <span class="stringliteral">&#39;Glib::String&#39;</span>,         # Function</div>
<div class="line">        <span class="stringliteral">&#39;Glib::Boolean&#39;</span>,        # Checked?</div>
<div class="line">        <span class="stringliteral">&#39;Glib::Boolean&#39;</span>,        # Grayed? (<span class="keywordflow">if</span> some children checked but not all)</div>
<div class="line">        <span class="stringliteral">&#39;Glib::Boolean&#39;</span>,        # Show checkbox? (no <span class="keywordflow">if</span> description <span class="stringliteral">&quot;second line&quot;</span>)</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    my $model = Gtk2::TreeStore-&gt;new( @treestore_args );</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #my $analysis_caller_ref = defined $output_ref ? $output_ref : $base_ref;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my %calculations = $analysis_caller_ref-&gt;get_calculations;</span></div>
<div class="line"><span class="preprocessor"></span>    my $indices = <a class="code" href="classBiodiverse_1_1Indices.html">Biodiverse::Indices</a>-&gt;<a class="code" href="classBiodiverse_1_1Indices.html#a9b653e2cf5ae1ebc02b930dabae47779">new</a>(BASEDATA_REF =&gt; $base_ref);</div>
<div class="line">    my %calculations = $indices-&gt;get_calculations;</div>
<div class="line"></div>
<div class="line">    my $name_wrapper = Text::Wrapper-&gt;new(columns =&gt; $NAME_COLUMN_WIDTH);</div>
<div class="line">    my $desc_wrapper = Text::Wrapper-&gt;new(columns =&gt; $DESC_COLUMN_WIDTH);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Add the type row (eg: taxonomic, matrix) </span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $type (sort keys %calculations) {</div>
<div class="line">        my $type_iter = $model-&gt;append(undef);</div>
<div class="line">        $model-&gt;set(</div>
<div class="line">            $type_iter,</div>
<div class="line">            MODEL_NAME_COL,        $type,</div>
<div class="line">            MODEL_CHECKED_COL,     0,</div>
<div class="line">            MODEL_GRAYED_COL,      0,</div>
<div class="line">            MODEL_SHOW_CHECKBOX,   1</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        my %calc_metadata;</div>
<div class="line">        <span class="keywordflow">foreach</span> my $func (@{$calculations{$type}}) {</div>
<div class="line">            my %info = $indices-&gt;get_args (sub =&gt; $func);</div>
<div class="line"><span class="preprocessor">            # If name unspecified then use the function name less the calc_</span></div>
<div class="line"><span class="preprocessor"></span>            my $name = $func;</div>
<div class="line">            $name =~ s/^calc_<span class="comment">//;</span></div>
<div class="line">            $name = $info{name} || $name;</div>
<div class="line">            $info{func} = $func;</div>
<div class="line">            $calc_metadata{$name} = \%info;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Add each analysis-function (eg: Jaccard, Endemism) row</span></div>
<div class="line"><span class="preprocessor"></span>        CALCULATION_NAME:</div>
<div class="line">        <span class="keywordflow">foreach</span> my $name (sort keys %calc_metadata) {</div>
<div class="line">            my %info = %{$calc_metadata{$name}};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # If description goes over one line,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # we put the first line here and the next into a new row</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # but combine all the other lines into a single line and then rewrap.</span></div>
<div class="line"><span class="preprocessor"></span>            my $desc = $info{description} || $EMPTY_STRING;</div>
<div class="line">            my ($d1, $dRest) = split(/\n/, $desc, 2);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  Rewrap the descriptions.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #  Perl works on aliases so this will change the original strings.</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">foreach</span> my $string ($d1, $dRest) {</div>
<div class="line">                next <span class="keywordflow">if</span> ! defined $string;</div>
<div class="line">                $string =~ s/\A\n<span class="comment">//;</span></div>
<div class="line">                $string =~ s/\n\z<span class="comment">//;</span></div>
<div class="line">                $string =~ s/\n/ /g;</div>
<div class="line">                $string = $desc_wrapper-&gt;wrap($string);</div>
<div class="line">                $string =~ s/\n\z<span class="comment">//;</span></div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            my @index_data = ();</div>
<div class="line">            push @index_data, [<span class="stringliteral">&#39;Indices:&#39;</span>, $EMPTY_STRING];</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  now loop over the indices to get their descriptions</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">foreach</span> my $index (sort keys %{$info{indices}}) {</div>
<div class="line">                my $description = $info{indices}{$index}{description} || $EMPTY_STRING;</div>
<div class="line">                $description =~ s/\n<span class="comment">//g;  #  strip newlines</span></div>
<div class="line">                $description = $desc_wrapper-&gt;wrap($description);</div>
<div class="line">                $description =~ s/\n\z<span class="comment">//;  #  strip trailing newlines</span></div>
<div class="line"><span class="preprocessor">                #my @string = split (&quot;\n&quot;, $description);</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">                push @index_data, [$index, $description];</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            my $func = $info{func};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # Should it be checked? (yes, if it was on previous time)</span></div>
<div class="line"><span class="preprocessor"></span>            my $checked = <a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#adee48ff360ca6897c6027f2b77db1b1e">member_of</a>($func, $checkRef);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # Add to model</span></div>
<div class="line"><span class="preprocessor"></span>            my $func_iter = $model-&gt;append($type_iter);</div>
<div class="line">            $model-&gt;set(</div>
<div class="line">                $func_iter,</div>
<div class="line">                MODEL_NAME_COL,            $name,</div>
<div class="line">                MODEL_CHECKED_COL,         $checked,</div>
<div class="line">                MODEL_GRAYED_COL,          0,</div>
<div class="line">                MODEL_DESCRIPTION_COL,     $d1,</div>
<div class="line">                MODEL_FUNCTION_COL,        $func,</div>
<div class="line">                MODEL_SHOW_CHECKBOX,       1</div>
<div class="line">            );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # Add multiline-description row</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> ($dRest) {</div>
<div class="line">                my $desc_iter = $model-&gt;append($func_iter);</div>
<div class="line">                $model-&gt;set(</div>
<div class="line">                    $desc_iter,</div>
<div class="line">                    MODEL_DESCRIPTION_COL, $dRest,</div>
<div class="line">                    MODEL_SHOW_CHECKBOX,   0,</div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line">            </div>
<div class="line"><span class="preprocessor">            #  add index descriptions</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">foreach</span> my $index_pair (@index_data) {</div>
<div class="line">                my $index_iter = $model-&gt;append($func_iter);</div>
<div class="line">                $model-&gt;set(</div>
<div class="line">                    $index_iter,</div>
<div class="line">                    MODEL_INDEX_COL,       $index_pair-&gt;[0],</div>
<div class="line">                    MODEL_DESCRIPTION_COL, $index_pair-&gt;[1],</div>
<div class="line">                    MODEL_SHOW_CHECKBOX,   0,</div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Check it if all calculations are checked</span></div>
<div class="line"><span class="preprocessor"></span>        <a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#aab77817e57327bd4d2413b434e99fbb4">updateTypeCheckbox</a>($model, $type_iter);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $model;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="adee48ff360ca6897c6027f2b77db1b1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Tabs::CalculationsTree::member_of </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-member_of' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-member_of-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-member_of-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-member_of-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in member_of: 13</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#adee48ff360ca6897c6027f2b77db1b1e">member_of</a> {</div>
<div class="line">    my ($elem, $ref) = @_;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  sometimes we are passed a hash</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> exists $ref-&gt;{$elem}</div>
<div class="line">      <span class="keywordflow">if</span> (reftype ($ref) eq <span class="stringliteral">&#39;HASH&#39;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $member (@$ref) {</div>
<div class="line">        <span class="keywordflow">return</span> 1 <span class="keywordflow">if</span> $elem eq $member;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2dc8b0c1dd2fc30c388ca41ab97249cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Tabs::CalculationsTree::onCalculationToggled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onCalculationToggled' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onCalculationToggled-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onCalculationToggled-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onCalculationToggled-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onCalculationToggled: 31</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#a2dc8b0c1dd2fc30c388ca41ab97249cc">onCalculationToggled</a> {</div>
<div class="line">    my $model = shift;</div>
<div class="line">    my $path = shift;</div>
<div class="line">    </div>
<div class="line">    my $iter = $model-&gt;get_iter_from_string($path);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Flip state</span></div>
<div class="line"><span class="preprocessor"></span>    my $state  = $model-&gt;get($iter, MODEL_CHECKED_COL);</div>
<div class="line">    my $grayed = $model-&gt;get($iter, MODEL_GRAYED_COL);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($grayed == 1) {</div>
<div class="line">        $state = 1; # <span class="keywordflow">if</span> clicked on a grayed checkbox - make it selected</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $state = not $state;</div>
<div class="line">    }</div>
<div class="line">    $model-&gt;set($iter, MODEL_CHECKED_COL, $state);</div>
<div class="line">    $model-&gt;set($iter, MODEL_GRAYED_COL, 0);</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    # Apply state to all child nodes</span></div>
<div class="line"><span class="preprocessor"></span>    my $child_iter = $model-&gt;iter_nth_child($iter, 0);</div>
<div class="line">    <span class="keywordflow">while</span> ($child_iter) {</div>
<div class="line">        $model-&gt;set($child_iter, MODEL_CHECKED_COL, $state);</div>
<div class="line">        $child_iter = $model-&gt;iter_next($child_iter);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # update state of any parent</span></div>
<div class="line"><span class="preprocessor"></span>    <a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#aab77817e57327bd4d2413b434e99fbb4">updateTypeCheckbox</a>($model, $model-&gt;iter_parent($iter) );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a62dec01d3a2ed92c251322aef316946c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Tabs::CalculationsTree::onRowCollapsed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onRowCollapsed' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onRowCollapsed-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onRowCollapsed-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onRowCollapsed-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onRowCollapsed: 7</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#a62dec01d3a2ed92c251322aef316946c">onRowCollapsed</a> {</div>
<div class="line">    my $tree = shift;</div>
<div class="line">    </div>
<div class="line">    $tree-&gt;columns_autosize();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aab77817e57327bd4d2413b434e99fbb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Tabs::CalculationsTree::updateTypeCheckbox </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-updateTypeCheckbox' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-updateTypeCheckbox-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-updateTypeCheckbox-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-updateTypeCheckbox-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in updateTypeCheckbox: 25</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html#aab77817e57327bd4d2413b434e99fbb4">updateTypeCheckbox</a> {</div>
<div class="line">    my $model = shift;</div>
<div class="line">    my $iter_top = shift || <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">    my $child_iter = $model-&gt;iter_nth_child($iter_top, 0);</div>
<div class="line">    my $prevchecked = undef;</div>
<div class="line">    my $check = 0;</div>
<div class="line">    my $gray = 0; # will be <span class="keyword">set</span> to 1 <span class="keywordflow">if</span> have both checked &amp; unchecked children</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Look for any unchecked children</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">while</span> ($child_iter) {</div>
<div class="line">        ($check) = $model-&gt;get($child_iter, MODEL_CHECKED_COL);</div>
<div class="line">        <span class="keywordflow">if</span> (defined $prevchecked &amp;&amp; $prevchecked != $check) {</div>
<div class="line">            $gray = 1;</div>
<div class="line">            last;</div>
<div class="line">        }</div>
<div class="line">        $prevchecked = $check;</div>
<div class="line">        $child_iter = $model-&gt;iter_next($child_iter);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $check = 0 <span class="keywordflow">if</span> $gray == 1;</div>
<div class="line"></div>
<div class="line">    $model-&gt;set($iter_top, MODEL_GRAYED_COL, $gray);</div>
<div class="line">    $model-&gt;set($iter_top, MODEL_CHECKED_COL, $check);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/Biodiverse/GUI/Tabs/<a class="el" href="CalculationsTree_8pm_source.html">CalculationsTree.pm</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Biodiverse</b></li><li class="navelem"><b>GUI</b></li><li class="navelem"><b>Tabs</b></li><li class="navelem"><a class="el" href="classBiodiverse_1_1GUI_1_1Tabs_1_1CalculationsTree.html">CalculationsTree</a></li>
    <li class="footer">Generated on Tue Nov 5 2013 19:07:45 for Biodiverse by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
