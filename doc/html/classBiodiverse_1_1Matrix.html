<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Biodiverse: Biodiverse::Matrix Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Biodiverse
   &#160;<span id="projectnumber">0.19</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classBiodiverse_1_1Matrix.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classBiodiverse_1_1Matrix-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Biodiverse::Matrix Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Biodiverse::Matrix:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classBiodiverse_1_1Matrix__coll__graph.png" border="0" usemap="#Biodiverse_1_1Matrix_coll__map" alt="Collaboration graph"/></div>
<map name="Biodiverse_1_1Matrix_coll__map" id="Biodiverse_1_1Matrix_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aca429a5be6d0ef830692d6c3b0ce77c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aca429a5be6d0ef830692d6c3b0ce77c1"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>EMPTY_STRING</b></td></tr>
<tr class="separator:aca429a5be6d0ef830692d6c3b0ce77c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb02b47d90ff8a1f5c38b17cca12f53c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb02b47d90ff8a1f5c38b17cca12f53c"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>ludicrously_extreme_pos_val</b></td></tr>
<tr class="separator:abb02b47d90ff8a1f5c38b17cca12f53c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0ab86d688ea66d1e1b93eb3c66b342a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab0ab86d688ea66d1e1b93eb3c66b342a"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>ludicrously_extreme_neg_val</b></td></tr>
<tr class="separator:ab0ab86d688ea66d1e1b93eb3c66b342a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Avaliable Methods</h2></td></tr>
<tr class="memitem:a27a4ef342043fffcd92f5133f4fc624d"><td class="memItemLeft" align="right" valign="top">private method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a27a4ef342043fffcd92f5133f4fc624d">_duplicate</a> ()</td></tr>
<tr class="separator:a27a4ef342043fffcd92f5133f4fc624d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a306c333e01d7aaf9f272d52aba137716"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a306c333e01d7aaf9f272d52aba137716">to_tree</a> ()</td></tr>
<tr class="separator:a306c333e01d7aaf9f272d52aba137716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3696e2573d3317d724da0236db84f2d0"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a3696e2573d3317d724da0236db84f2d0">delete_value_index</a> ()</td></tr>
<tr class="separator:a3696e2573d3317d724da0236db84f2d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a760ea0cd11e6e0c8f8ec39564a383948"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a760ea0cd11e6e0c8f8ec39564a383948">delete_element</a> ()</td></tr>
<tr class="separator:a760ea0cd11e6e0c8f8ec39564a383948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab66c0ba12ced72ba6da08669eaa07783"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#ab66c0ba12ced72ba6da08669eaa07783">get_element_values</a> ()</td></tr>
<tr class="separator:ab66c0ba12ced72ba6da08669eaa07783"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bac52fd3fb5b08f27ec7e3bd3e796ee"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a7bac52fd3fb5b08f27ec7e3bd3e796ee">is_symmetric</a> ()</td></tr>
<tr class="separator:a7bac52fd3fb5b08f27ec7e3bd3e796ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a143db1e6dca17334d108663521123c45"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a143db1e6dca17334d108663521123c45">rename</a> ()</td></tr>
<tr class="separator:a143db1e6dca17334d108663521123c45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa259adf28a11ca981ae1c1e91863c641"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#aa259adf28a11ca981ae1c1e91863c641">get_value_index_key</a> ()</td></tr>
<tr class="separator:aa259adf28a11ca981ae1c1e91863c641"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a3718e5bc673cc3a4b85e1b68330809"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a2a3718e5bc673cc3a4b85e1b68330809">clone</a> ()</td></tr>
<tr class="separator:a2a3718e5bc673cc3a4b85e1b68330809"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8a24cef447c619b0d24732e92a97d2e"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#aa8a24cef447c619b0d24732e92a97d2e">get_elements</a> ()</td></tr>
<tr class="separator:aa8a24cef447c619b0d24732e92a97d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62a3e6d9ccd83be29bb7f5bdeca59492"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a62a3e6d9ccd83be29bb7f5bdeca59492">get_metadata_export</a> ()</td></tr>
<tr class="separator:a62a3e6d9ccd83be29bb7f5bdeca59492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae47c071b11939f584b93f1eec9053082"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#ae47c071b11939f584b93f1eec9053082">numerically</a> ()</td></tr>
<tr class="separator:ae47c071b11939f584b93f1eec9053082"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6c507a57bcdfce7f72f89b5d40fc910"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#ad6c507a57bcdfce7f72f89b5d40fc910">to_table_gdm</a> ()</td></tr>
<tr class="separator:ad6c507a57bcdfce7f72f89b5d40fc910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d413d8b80182b90cd5cfebe238739ff"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a2d413d8b80182b90cd5cfebe238739ff">export</a> ()</td></tr>
<tr class="separator:a2d413d8b80182b90cd5cfebe238739ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e49b70c2613cbd66ca7b49949573b0b"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a5e49b70c2613cbd66ca7b49949573b0b">new</a> ()</td></tr>
<tr class="separator:a5e49b70c2613cbd66ca7b49949573b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6337106653b28799affeda24e13aedf"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#af6337106653b28799affeda24e13aedf">get_element_pairs_with_value</a> ()</td></tr>
<tr class="separator:af6337106653b28799affeda24e13aedf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8e9ad8b1e0c2455618509bc598f0c1"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a2b8e9ad8b1e0c2455618509bc598f0c1">to_table_sparse</a> ()</td></tr>
<tr class="separator:a2b8e9ad8b1e0c2455618509bc598f0c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f62d587a0745c557b07bda1b3ad2523"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a0f62d587a0745c557b07bda1b3ad2523">describe</a> ()</td></tr>
<tr class="separator:a0f62d587a0745c557b07bda1b3ad2523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81e0ee74cd406d9e2eef901cb28e2182"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a81e0ee74cd406d9e2eef901cb28e2182">delete_all_pairs_with_element</a> ()</td></tr>
<tr class="separator:a81e0ee74cd406d9e2eef901cb28e2182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a44f638691901954fd16e14f8356ab0"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a3a44f638691901954fd16e14f8356ab0">get_min_value</a> ()</td></tr>
<tr class="separator:a3a44f638691901954fd16e14f8356ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8229dccf59bfc246165decd285718ea"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#ab8229dccf59bfc246165decd285718ea">get_tooltip_sparse_normal</a> ()</td></tr>
<tr class="separator:ab8229dccf59bfc246165decd285718ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7098a6a02caf27e54b57a66364b4b03"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#ab7098a6a02caf27e54b57a66364b4b03">to_table</a> ()</td></tr>
<tr class="separator:ab7098a6a02caf27e54b57a66364b4b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae928868dc711f3d7e1dcca0cb99587b8"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#ae928868dc711f3d7e1dcca0cb99587b8">get_metadata_export_delimited_text</a> ()</td></tr>
<tr class="separator:ae928868dc711f3d7e1dcca0cb99587b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a061630831cb82706ae1ba1ec5af9d9ab"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a061630831cb82706ae1ba1ec5af9d9ab">get_elements_ref</a> ()</td></tr>
<tr class="separator:a061630831cb82706ae1ba1ec5af9d9ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25416479bee359f84c9eb49567d7be1f"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a25416479bee359f84c9eb49567d7be1f">get_max_value</a> ()</td></tr>
<tr class="separator:a25416479bee359f84c9eb49567d7be1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd3c68e39d80df837bdf1e70f8ef944"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a7dd3c68e39d80df837bdf1e70f8ef944">to_table_normal</a> ()</td></tr>
<tr class="separator:a7dd3c68e39d80df837bdf1e70f8ef944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ed330d2dc44cd93716039eb7b3355a4"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a0ed330d2dc44cd93716039eb7b3355a4">get_element_pair_count</a> ()</td></tr>
<tr class="separator:a0ed330d2dc44cd93716039eb7b3355a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5387c4fac6bb1babbc292f3b5126b0f8"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a5387c4fac6bb1babbc292f3b5126b0f8">get_elements_as_array</a> ()</td></tr>
<tr class="separator:a5387c4fac6bb1babbc292f3b5126b0f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86033de7bbdb05605df60da3728ca7f4"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a86033de7bbdb05605df60da3728ca7f4">rebuild_value_index</a> ()</td></tr>
<tr class="separator:a86033de7bbdb05605df60da3728ca7f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba7f40ca609ec57936824e5b0ed9929a"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#aba7f40ca609ec57936824e5b0ed9929a">get_element_count</a> ()</td></tr>
<tr class="separator:aba7f40ca609ec57936824e5b0ed9929a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbe1193c563f9d727778cc9fcffe51f9"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#afbe1193c563f9d727778cc9fcffe51f9">export_delimited_text</a> ()</td></tr>
<tr class="separator:afbe1193c563f9d727778cc9fcffe51f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a065aeb881f62a0ca96f8196ac4ade3ab"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#a065aeb881f62a0ca96f8196ac4ade3ab">add_element</a> ()</td></tr>
<tr class="separator:a065aeb881f62a0ca96f8196ac4ade3ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8893649b8bacb38b344712d62df55e1"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1Matrix.html#ab8893649b8bacb38b344712d62df55e1">get_summary_stats</a> ()</td></tr>
<tr class="separator:ab8893649b8bacb38b344712d62df55e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="NAME"></a>
NAME</h1>
<p><a class="el" href="classBiodiverse_1_1Matrix.html">Biodiverse::Matrix</a> - Methods to build, access and control matrix data for a Biodiverse project.</p>
<h1><a class="anchor" id="SYNOPSIS"></a>
SYNOPSIS</h1>
<pre>  use <a class="el" href="classBiodiverse_1_1Matrix.html">Biodiverse::Matrix</a>;</pre><h1><a class="anchor" id="DESCRIPTION"></a>
DESCRIPTION</h1>
<p>Store a matrix of values (normally dissimilarity) in the Biodiverse internal format.</p>
<h2><a class="anchor" id="Assumptions"></a>
Assumptions</h2>
<p>Assumes </p>
<div class="fragment"><div class="line"><a class="code" href="classBiodiverse_1_1Common.html">Biodiverse::Common</a></div>
</div><!-- fragment --><p> is in the @ISA list.</p>
<p>Almost all methods in the Biodiverse library use {keyword =&gt; value} pairs as a policy. This means some of the methods may appear to contain unnecessary arguments, but it makes everything else more consistent.</p>
<p>List methods return a list in list context, and a reference to that list in scalar context.</p>
<h1><a class="anchor" id="Methods"></a>
Methods</h1>
<p>These assume you have declared an object called $self of a type that inherits these methods, normally:</p>
<ul>
<li>
<a class="anchor" id="item__self___Biodiverse__Matrix__gt_new_"></a><b>$self = <a class="el" href="classBiodiverse_1_1Matrix.html">Biodiverse::Matrix</a>-&gt;new;</b>  </li>
</ul>
<ul>
<li>
<p class="startli"><a class="anchor" id="item__self___Biodiverse__Matrix__gt_new____params__"></a><b>$self = <a class="el" href="classBiodiverse_1_1Matrix.html">Biodiverse::Matrix</a>-&gt;new (%params);</b> </p>
<p>Create a new matrices object.</p>
<p></p>
<p>Optionally pass a hash of parameters to be set.</p>
<p></p>
<p>If %params contains an item 'file_xml' then it attempts to open the file referred to and returns that as an object if successful (see </p>
<div class="fragment"><div class="line">Biodiverse::Common::load_xml_file</div>
</div><!-- fragment --><p> ).</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_add_element__element1____gt___element1___element2____gt___element2___value____gt___value__"></a><b>$self-&gt;add_element('element1' =&gt; $element1, 'element2' =&gt; $element2, 'value' =&gt; $value);</b> </p>
<p>Adds an element pair and their value to the object.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_delete_element___element1____gt___element1___element2____gt___element2__"></a><b>$self-&gt;delete_element ('element1' =&gt; $element1, 'element2' =&gt; $element2);</b> </p>
<p>Deletes an element pair and their value from the matrix.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_element_pair_exists___element1____gt___element1___element2____gt___element2__"></a><b>$self-&gt;element_pair_exists ('element1' =&gt; $element1, 'element2' =&gt; $element2);</b> </p>
<p>Returns 1 if the pair exists in the specified order, 2 if they exist but are transposed, and 0 if they do not exist. The values 1 and 2 allow the other methods to refer to the appropriate internal data structure and would normally be treated as the same by standard users.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_get_element_count_"></a><b>$self-&gt;get_element_count;</b> </p>
<p>Returns a count of the number of elements along one side of the matrix. This is not the count of the total number of entries, but this could be calculated if one assumes it is symmetric, does not contain diagonal elements and so forth.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_get_elements_"></a><b>$self-&gt;get_elements;</b> </p>
<p>Returns a hash of the unique elements indexed in the matrix.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_get_elements_as_array_"></a><b>$self-&gt;get_elements_as_array;</b> </p>
<p>Returns an array of the unique elements indexed in the matrix.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_get_elements_with_value__value____gt___value__"></a><b>$self-&gt;get_elements_with_value('value' =&gt; $value);</b> </p>
<p>Returns a hash of element pairs in the matrix that have the specified value.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_get_min_value_"></a><b>$self-&gt;get_min_value;</b> </p>
<p>Returns the minimum value in the matrix.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_get_max_value_"></a><b>$self-&gt;get_max_value;</b> </p>
<p>Returns the maximum value in the matrix.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_get_value___element1____gt___element1___element2____gt___element2__"></a><b>$self-&gt;get_value ('element1' =&gt; $element1, 'element2' =&gt; $element2);</b> </p>
<p>Returns the value for element pair [$element1, $element2].</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item__self__gt_load_data_"></a><b>$self-&gt;load_data;</b> </p>
<p>Import data from a file. Assumes data are symmetric amongst other things.</p>
<p></p>
<p>Really messy. Needs cleaning up.</p>
<p class="endli"></p>
</li>
</ul>
<h1><a class="anchor" id="REPORTING_ERRORS"></a>
REPORTING ERRORS</h1>
<p>I read my email frequently, so use that. It should be pretty stable, though.</p>
<h1><a class="anchor" id="AUTHOR"></a>
AUTHOR</h1>
<p>Shawn Laffan</p>
<p>Shawn.Laffan@unsw.edu.au</p>
<h1><a class="anchor" id="COPYRIGHT"></a>
COPYRIGHT</h1>
<p>Copyright (c) 2006 Shawn Laffan. All rights reserved. This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<h1><a class="anchor" id="REVISION_HISTORY"></a>
REVISION HISTORY</h1>
<ul>
<li>
<p class="startli"><a class="anchor" id="item_Version_0_09"></a><b>Version 0.09</b> </p>
<p>May 2006. Source libraries developed to the point where they can be distributed.</p>
<p class="endli"></p>
</li>
</ul>

<p>Definition at line <a class="el" href="Matrix_8pm_source.html#l00123">123</a> of file <a class="el" href="Matrix_8pm_source.html">Matrix.pm</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a27a4ef342043fffcd92f5133f4fc624d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">private method Biodiverse::Matrix::_duplicate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-_duplicate' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-_duplicate-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_duplicate-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_duplicate-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in _duplicate: 93</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a27a4ef342043fffcd92f5133f4fc624d">_duplicate</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    say <span class="stringliteral">&#39;[MATRIX] Duplicating matrix &#39;</span> . $self-&gt;get_param(<span class="stringliteral">&#39;NAME&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $bd;</div>
<div class="line">    my $exists = $self-&gt;exists_param(<span class="stringliteral">&#39;BASEDATA_REF&#39;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> ($exists) {</div>
<div class="line">        $bd = $self-&gt;get_param(<span class="stringliteral">&#39;BASEDATA_REF&#39;</span>);</div>
<div class="line">        $self-&gt;set_param(BASEDATA_REF =&gt; undef);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $params = eval {</div>
<div class="line">        $self-&gt;SUPER::clone(data =&gt; $self-&gt;{PARAMS});</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    my $clone_ref = blessed ($self)-&gt;new(%$params);</div>
<div class="line"></div>
<div class="line">    my $elements = $self-&gt;get_elements_ref;</div>
<div class="line"></div>
<div class="line">    my $c_elements_ref = $clone_ref-&gt;get_elements_ref;</div>
<div class="line">    %$c_elements_ref = %$elements;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  should add methods to access these</span></div>
<div class="line"><span class="preprocessor"></span>    my $byelement = $self-&gt;{BYELEMENT};</div>
<div class="line">    my $byvalue   = $self-&gt;{BYVALUE};</div>
<div class="line"></div>
<div class="line">    my (%c_byelement, %c_byvalue);</div>
<div class="line">    keys %c_byelement = keys %$byelement;  #  pre-allocate the buckets - the pay-off is <span class="keywordflow">for</span> many-key hashes</div>
<div class="line">    keys %c_byvalue   = keys %$byvalue;</div>
<div class="line"></div>
<div class="line">    my $progress;</div>
<div class="line">    <span class="keywordflow">if</span> (scalar keys %$byelement &gt; 500) {</div>
<div class="line">        $progress = <a class="code" href="classBiodiverse_1_1Progress.html">Biodiverse::Progress</a>-&gt;<a class="code" href="classBiodiverse_1_1Progress.html#a88f4cef6f66986952a850fb70a2b62d8">new</a>(text =&gt; <span class="stringliteral">&#39;Cloning matrix &#39;</span> . $self-&gt;get_param(<span class="stringliteral">&#39;NAME&#39;</span>));</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $key (keys %$byelement) {</div>
<div class="line">        my $hashref = $byelement-&gt;{$key};</div>
<div class="line">        my %c_hash;</div>
<div class="line">        keys %c_hash = keys %$hashref;  #  pre-allocate the buckets</div>
<div class="line">        %c_hash = %$hashref;</div>
<div class="line">        $c_byelement{$key} = \%c_hash;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $clone_ref-&gt;{BYELEMENT} = \%c_byelement;</div>
<div class="line"></div>
<div class="line">    my $i = 0;</div>
<div class="line">    my $to_do = scalar keys %$byvalue;</div>
<div class="line">    my $target_text = <span class="stringliteral">&quot;Target is $to_do value index keys&quot;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $val_key (keys %$byvalue) {</div>
<div class="line">        my $val_hashref = $byvalue-&gt;{$val_key};</div>
<div class="line">        my %c_val_hash;</div>
<div class="line">        keys %c_val_hash = keys %$val_hashref;  #  pre-allocate the buckets</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($progress) {</div>
<div class="line">            $i++;</div>
<div class="line">            $progress-&gt;update ($target_text, $i / $to_do);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> my $e_key (keys %$val_hashref) {</div>
<div class="line">            my $hashref = $val_hashref-&gt;{$e_key};</div>
<div class="line">            my %c_hash;</div>
<div class="line">            keys %c_hash = keys %$hashref;  #  pre-allocate the buckets</div>
<div class="line">            %c_hash = %$hashref;</div>
<div class="line">            $c_val_hash{$e_key} = \%c_hash;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $c_byvalue{$val_key} = \%c_val_hash;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $clone_ref-&gt;{BYVALUE} = \%c_byvalue;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($progress) {</div>
<div class="line">        $progress-&gt;destroy();</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($EVAL_ERROR) {</div>
<div class="line">        <span class="keywordflow">if</span> ($exists) {</div>
<div class="line">            $self-&gt;set_param(BASEDATA_REF =&gt; $bd);  #  put it back <span class="keywordflow">if</span> needed</div>
<div class="line">        }</div>
<div class="line">        croak $EVAL_ERROR;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($exists) {</div>
<div class="line">        $self-&gt;set_param(BASEDATA_REF =&gt; $bd);</div>
<div class="line">        $clone_ref-&gt;set_param(BASEDATA_REF =&gt; $bd);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $clone_ref;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a065aeb881f62a0ca96f8196ac4ade3ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::add_element </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-add_element' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-add_element-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-add_element-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-add_element-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in add_element: 28</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a065aeb881f62a0ca96f8196ac4ade3ab">add_element</a> {  #  add an element pair to the <span class="keywordtype">object</span></div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    my $element1 = $args{element1};</div>
<div class="line">    croak <span class="stringliteral">&quot;Element1 not specified in call to add_element\n&quot;</span></div>
<div class="line">        <span class="keywordflow">if</span> ! defined $element1;</div>
<div class="line"></div>
<div class="line">    my $element2 = $args{element2};</div>
<div class="line">    croak <span class="stringliteral">&quot;Element2 not specified in call to add_element\n&quot;</span></div>
<div class="line">        <span class="keywordflow">if</span> ! defined $element2;</div>
<div class="line"></div>
<div class="line">    my $val = $args{value};</div>
<div class="line">    <span class="keywordflow">if</span> (! defined $val &amp;&amp; ! $self-&gt;get_param(<span class="stringliteral">&#39;ALLOW_UNDEF&#39;</span>)) {</div>
<div class="line">        warn <span class="stringliteral">&quot;[Matrix] add_element Warning: Value not defined and &quot;</span></div>
<div class="line">            . <span class="stringliteral">&quot;ALLOW_UNDEF not set, not adding row $element1 col $element2.\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $index_val = $self-&gt;get_value_index_key (value =&gt; $val);</div>
<div class="line"></div>
<div class="line">    $self-&gt;{BYELEMENT}{$element1}{$element2} = $val;</div>
<div class="line">    $self-&gt;{BYVALUE}{$index_val}{$element1}{$element2}++;</div>
<div class="line">    $self-&gt;{ELEMENTS}{$element1}++;  #  cache the component elements to save searching through the other lists later</div>
<div class="line">    $self-&gt;{ELEMENTS}{$element2}++;  #  also keeps a count of the elements</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2a3718e5bc673cc3a4b85e1b68330809"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::clone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-clone' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-clone-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-clone-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-clone-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in clone: 4</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a2a3718e5bc673cc3a4b85e1b68330809">clone</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;_duplicate (@_);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a81e0ee74cd406d9e2eef901cb28e2182"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::delete_all_pairs_with_element </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-delete_all_pairs_with_element' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-delete_all_pairs_with_element-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-delete_all_pairs_with_element-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-delete_all_pairs_with_element-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in delete_all_pairs_with_element: 23</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a81e0ee74cd406d9e2eef901cb28e2182">delete_all_pairs_with_element</a> {  </div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    croak <span class="stringliteral">&quot;element not specified\n&quot;</span> <span class="keywordflow">if</span> ! defined $args{element};</div>
<div class="line">    croak <span class="stringliteral">&quot;element does not exist\n&quot;</span> <span class="keywordflow">if</span> ! $self-&gt;element_is_in_matrix (element =&gt; $args{element});</div>
<div class="line">    </div>
<div class="line">    my @elements = $self-&gt;get_elements_as_array;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $el (@elements) {</div>
<div class="line">        <span class="keywordflow">if</span> ($self-&gt;element_pair_exists (</div>
<div class="line">                element1 =&gt; $el,</div>
<div class="line">                element2 =&gt; $args{element})</div>
<div class="line">            ) {</div>
<div class="line"></div>
<div class="line">            $self-&gt;delete_element (</div>
<div class="line">                element1 =&gt; $el,</div>
<div class="line">                element2 =&gt; $args{element},</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a760ea0cd11e6e0c8f8ec39564a383948"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::delete_element </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-delete_element' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-delete_element-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-delete_element-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-delete_element-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in delete_element: 68</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a760ea0cd11e6e0c8f8ec39564a383948">delete_element</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    croak <span class="stringliteral">&quot;element1 or element2 not defined\n&quot;</span></div>
<div class="line">        <span class="keywordflow">if</span>   ! defined $args{element1}</div>
<div class="line">          || ! defined $args{element2};</div>
<div class="line"></div>
<div class="line">    my $element1 = $args{element1};</div>
<div class="line">    my $element2 = $args{element2};</div>
<div class="line">    my $exists = $self-&gt;element_pair_exists (@_);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (! $exists) {</div>
<div class="line"><span class="preprocessor">        #print &quot;WARNING: element combination does not exist\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">return</span> 0; #  combination does not exist - cannot <span class="keyword">delete</span> it</div>
<div class="line">    }</div>
<div class="line">    elsif ($exists == 2) {  #  elements exist, but in different order - <span class="keywordflow">switch</span> them</div>
<div class="line"><span class="preprocessor">        #print &quot;DELETE ELEMENTS SWITCHING $element1 $element2\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>        $element1 = $args{element2};</div>
<div class="line">        $element2 = $args{element1};</div>
<div class="line">    }</div>
<div class="line">    my $value = $self-&gt;get_value (</div>
<div class="line">        element1 =&gt; $element1,</div>
<div class="line">        element2 =&gt; $element2,</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #print &quot;DELETING $element1 $element2\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>        </div>
<div class="line"><span class="preprocessor">    #  now we get to the cleanup, including the containing hashes if they are now empty</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  all the undef - delete pairs are to ensure they get deleted properly</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  the hash ref must be empty (undef) or it won&#39;t be deleted</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  autovivification of $self-&gt;{BYELEMENT}{$element1} is avoided by $exists above</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">delete</span> $self-&gt;{BYELEMENT}{$element1}{$element2}; # <span class="keywordflow">if</span> exists $self-&gt;{BYELEMENT}{$element1}{$element2};</div>
<div class="line">    <span class="keywordflow">if</span> (scalar keys %{$self-&gt;{BYELEMENT}{$element1}} == 0) {</div>
<div class="line"><span class="preprocessor">        #print &quot;Deleting BYELEMENT{$element1}\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #undef $self-&gt;{BYELEMENT}{$element1};</span></div>
<div class="line"><span class="preprocessor"></span>        defined (<span class="keyword">delete</span> $self-&gt;{BYELEMENT}{$element1})</div>
<div class="line">            || warn <span class="stringliteral">&quot;ISSUES BYELEMENT $element1 $element2\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $index_val = $self-&gt;get_value_index_key (value =&gt; $value);</div>
<div class="line"></div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{BYVALUE}{$index_val}{$element1}{$element2}; # <span class="keywordflow">if</span> exists $self-&gt;{BYVALUE}{$value}{$element1}{$element2};</div>
<div class="line">    <span class="keywordflow">if</span> (scalar keys %{$self-&gt;{BYVALUE}{$index_val}{$element1}} == 0) {</div>
<div class="line"><span class="preprocessor">        #undef $self-&gt;{BYVALUE}{$value}{$element1};</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keyword">delete</span> $self-&gt;{BYVALUE}{$index_val}{$element1};</div>
<div class="line">        <span class="keywordflow">if</span> (scalar keys %{$self-&gt;{BYVALUE}{$index_val}} == 0) {</div>
<div class="line"><span class="preprocessor">            #undef $self-&gt;{BYVALUE}{$value};</span></div>
<div class="line"><span class="preprocessor"></span>            defined (<span class="keyword">delete</span> $self-&gt;{BYVALUE}{$index_val})</div>
<div class="line">                || warn <span class="stringliteral">&quot;ISSUES BYVALUE $index_val $value $element1 $element2\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">    #  decrement the ELEMENTS counts, deleting entry if now zero, as there are no more entries with this element</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{ELEMENTS}{$element1}--;</div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;{ELEMENTS}{$element1} == 0) {</div>
<div class="line"><span class="preprocessor">        #undef $self-&gt;{ELEMENTS}{$element1};</span></div>
<div class="line"><span class="preprocessor"></span>        defined (<span class="keyword">delete</span> $self-&gt;{ELEMENTS}{$element1})</div>
<div class="line">            || warn <span class="stringliteral">&quot;ISSUES $element1\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    $self-&gt;{ELEMENTS}{$element2}--;</div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;{ELEMENTS}{$element2} == 0) {</div>
<div class="line"><span class="preprocessor">        #undef $self-&gt;{ELEMENTS}{$element2};</span></div>
<div class="line"><span class="preprocessor"></span>        defined (<span class="keyword">delete</span> $self-&gt;{ELEMENTS}{$element2})</div>
<div class="line">            || warn <span class="stringliteral">&quot;ISSUES $element2\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #return ($self-&gt;element_pair_exists(@_)) ? undef : 1;  #  for debug</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> 1;  # <span class="keywordflow">return</span> success <span class="keywordflow">if</span> we <span class="keyword">get</span> <span class="keyword">this</span> far</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a3696e2573d3317d724da0236db84f2d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::delete_value_index </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-delete_value_index' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-delete_value_index-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-delete_value_index-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-delete_value_index-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in delete_value_index: 8</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a3696e2573d3317d724da0236db84f2d0">delete_value_index</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    undef $self-&gt;{BYVALUE};</div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{BYVALUE};</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a0f62d587a0745c557b07bda1b3ad2523"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::describe </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-describe' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-describe-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-describe-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-describe-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in describe: 49</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a0f62d587a0745c557b07bda1b3ad2523">describe</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line">    my @description = (</div>
<div class="line">        [<span class="stringliteral">&#39;TYPE: &#39;</span>, blessed $self],</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    my @keys = qw /</div>
<div class="line">        NAME</div>
<div class="line">        JOIN_CHAR</div>
<div class="line">        QUOTES</div>
<div class="line">    /;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $key (@keys) {</div>
<div class="line">        my $desc = $self-&gt;get_param ($key);</div>
<div class="line">        <span class="keywordflow">if</span> ((ref $desc) =~ /ARRAY/) {</div>
<div class="line">            $desc = join q{, }, @$desc;</div>
<div class="line">        }</div>
<div class="line">        push @description,</div>
<div class="line">            [<span class="stringliteral">&quot;$key:&quot;</span>, $desc];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    push @description, [</div>
<div class="line">        <span class="stringliteral">&#39;Element count: &#39;</span>,</div>
<div class="line">        $self-&gt;get_element_count,</div>
<div class="line">    ];</div>
<div class="line"></div>
<div class="line">    push @description, [</div>
<div class="line">        <span class="stringliteral">&#39;Max value: &#39;</span>,</div>
<div class="line">        $self-&gt;get_max_value,</div>
<div class="line">    ];</div>
<div class="line">    push @description, [</div>
<div class="line">        <span class="stringliteral">&#39;Min value: &#39;</span>,</div>
<div class="line">        $self-&gt;get_min_value,</div>
<div class="line">    ];</div>
<div class="line">    push @description, [</div>
<div class="line">        <span class="stringliteral">&#39;Symmetric: &#39;</span>,</div>
<div class="line">        ($self-&gt;is_symmetric ? <span class="stringliteral">&#39;yes&#39;</span> : <span class="stringliteral">&#39;no&#39;</span>),</div>
<div class="line">    ];</div>
<div class="line"></div>
<div class="line">    </div>
<div class="line">    my $description;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $row (@description) {</div>
<div class="line">        $description .= join <span class="stringliteral">&quot;\t&quot;</span>, @$row;</div>
<div class="line">        $description .= <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? @description : $description;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2d413d8b80182b90cd5cfebe238739ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::export </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-export' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-export-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-export-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-export-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in export: 17</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a2d413d8b80182b90cd5cfebe238739ff">export</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  get our own metadata...</span></div>
<div class="line"><span class="preprocessor"></span>    my %metadata = $self-&gt;get_args (sub =&gt; <span class="stringliteral">&#39;export&#39;</span>);</div>
<div class="line">    </div>
<div class="line">    my $format = $args{format};</div>
<div class="line">    my $sub_to_use</div>
<div class="line">        = $metadata{format_labels}{$format}</div>
<div class="line">            || croak <span class="stringliteral">&quot;Argument &#39;format =&gt; $format&#39; not valid\n&quot;</span>;</div>
<div class="line">    </div>
<div class="line">    eval {$self-&gt;$sub_to_use (%args)};</div>
<div class="line">    croak $EVAL_ERROR <span class="keywordflow">if</span> $EVAL_ERROR;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="afbe1193c563f9d727778cc9fcffe51f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::export_delimited_text </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-export_delimited_text' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-export_delimited_text-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-export_delimited_text-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-export_delimited_text-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in export_delimited_text: 20</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#afbe1193c563f9d727778cc9fcffe51f9">export_delimited_text</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    # add a .csv suffix if none present</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> (defined $args{file} and not $args{file} =~ /\.(.*)$/) {</div>
<div class="line">        $args{file} = $args{file} . <span class="stringliteral">&#39;.csv&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $table = $self-&gt;to_table (%args);</div>
<div class="line">    eval {</div>
<div class="line">        $self-&gt;write_table (</div>
<div class="line">            %args,</div>
<div class="line">            data =&gt; $table</div>
<div class="line">        )</div>
<div class="line">    };</div>
<div class="line">    croak $EVAL_ERROR <span class="keywordflow">if</span> $EVAL_ERROR;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aba7f40ca609ec57936824e5b0ed9929a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_element_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_element_count' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_element_count-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_element_count-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_element_count-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_element_count: 5</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#aba7f40ca609ec57936824e5b0ed9929a">get_element_count</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    <span class="keywordflow">return</span> 0 <span class="keywordflow">if</span> ! exists $self-&gt;{ELEMENTS};</div>
<div class="line">    <span class="keywordflow">return</span> scalar keys %{$self-&gt;{ELEMENTS}};</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a0ed330d2dc44cd93716039eb7b3355a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_element_pair_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_element_pair_count' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_element_pair_count-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_element_pair_count-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_element_pair_count-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_element_pair_count: 14</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a0ed330d2dc44cd93716039eb7b3355a4">get_element_pair_count</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #my $count = 0;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #for my $value (values %{$self-&gt;{ELEMENTS}}) {</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    $count += $value;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #}</span></div>
<div class="line"><span class="preprocessor"></span>    my $count = sum values %{$self-&gt;{ELEMENTS}};</div>
<div class="line">    $count /= 2;  #  correct <span class="keywordflow">for</span> <span class="keywordtype">double</span> counting</div>
<div class="line"><span class="preprocessor">    #  IS THIS CORRECTION VALID?  We can have symmetric and non-symmetric matrices, so a:b and b:a</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  It depends on how they are tracked, though.  </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">return</span> $count;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="af6337106653b28799affeda24e13aedf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_element_pairs_with_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_element_pairs_with_value' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_element_pairs_with_value-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_element_pairs_with_value-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_element_pairs_with_value-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_element_pairs_with_value: 25</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#af6337106653b28799affeda24e13aedf">get_element_pairs_with_value</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $val = $args{value};</div>
<div class="line">    my $val_key = $val;</div>
<div class="line">    <span class="keywordflow">if</span> (my $prec = $self-&gt;get_param(<span class="stringliteral">&#39;VAL_INDEX_PRECISION&#39;</span>)) {</div>
<div class="line">        $val_key = sprintf $prec, $val;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my %results;</div>
<div class="line"></div>
<div class="line">    my $val_hash = $self-&gt;{BYVALUE};</div>
<div class="line">    my $element_hash = $val_hash-&gt;{$val_key};</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span> (my ($el1, $hash_ref) = each %$element_hash) {</div>
<div class="line">        <span class="keywordflow">foreach</span> my $el2 (keys %$hash_ref) {</div>
<div class="line">            my $value = $self-&gt;get_value (element1 =&gt; $el1, element2 =&gt; $el2);</div>
<div class="line">            next <span class="keywordflow">if</span> $val ne $value;  #  implicitly uses %.15f precision</div>
<div class="line">            $results{$el1}{$el2} ++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %results : \%results;    </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ab66c0ba12ced72ba6da08669eaa07783"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_element_values </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_element_values' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_element_values-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_element_values-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_element_values-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_element_values: 18</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#ab66c0ba12ced72ba6da08669eaa07783">get_element_values</a> {  #  <span class="keyword">get</span> all values associated with one element</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    croak <span class="stringliteral">&quot;element not specified (matrix)\n&quot;</span>  <span class="keywordflow">if</span> ! defined $args{element};</div>
<div class="line">    croak <span class="stringliteral">&quot;matrix element does not exist\n&quot;</span> <span class="keywordflow">if</span> ! $self-&gt;element_is_in_matrix (element =&gt; $args{element});</div>
<div class="line"></div>
<div class="line">    my @elements = $self-&gt;get_elements_as_array;</div>
<div class="line">    </div>
<div class="line">    my %values;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $el (@elements) {</div>
<div class="line">        <span class="keywordflow">if</span> ($self-&gt;element_pair_exists (element1 =&gt; $el, element2 =&gt; $args{element})) {</div>
<div class="line">            $values{$el} = $self-&gt;get_value (element1 =&gt; $el, element2 =&gt; $args{element});</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %values : \%values;    </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aa8a24cef447c619b0d24732e92a97d2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_elements </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_elements' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_elements-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_elements-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_elements-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_elements: 8</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#aa8a24cef447c619b0d24732e92a97d2e">get_elements</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keywordflow">if</span> ! exists $self-&gt;{ELEMENTS};</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keywordflow">if</span> (scalar keys %{$self-&gt;{ELEMENTS}}) == 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %{$self-&gt;{ELEMENTS}} : $self-&gt;{ELEMENTS};</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a5387c4fac6bb1babbc292f3b5126b0f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_elements_as_array </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_elements_as_array' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_elements_as_array-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_elements_as_array-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_elements_as_array-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_elements_as_array: 6</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a5387c4fac6bb1babbc292f3b5126b0f8">get_elements_as_array</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    <span class="keywordflow">return</span> wantarray</div>
<div class="line">        ? keys %{$self-&gt;{ELEMENTS}}</div>
<div class="line">        : [keys %{$self-&gt;{ELEMENTS}}];</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a061630831cb82706ae1ba1ec5af9d9ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_elements_ref </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_elements_ref' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_elements_ref-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_elements_ref-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_elements_ref-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_elements_ref: 5</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a061630831cb82706ae1ba1ec5af9d9ab">get_elements_ref</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;{ELEMENTS} <span class="comment">// do {$self-&gt;{ELEMENTS} = {}};</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a25416479bee359f84c9eb49567d7be1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_max_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_max_value' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_max_value-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_max_value-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_max_value-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_max_value: 17</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a25416479bee359f84c9eb49567d7be1f">get_max_value</a> {  #  <span class="keyword">get</span> the minimum similarity value</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my $val_hash = $self-&gt;{BYVALUE};    </div>
<div class="line">    my $max_key  = max keys %$val_hash;</div>
<div class="line">    my $max      = $ludicrously_extreme_neg_val;</div>
<div class="line"></div>
<div class="line">    my $element_hash = $val_hash-&gt;{$max_key};</div>
<div class="line">    <span class="keywordflow">while</span> (my ($el1, $hash_ref) = each %$element_hash) {</div>
<div class="line">        <span class="keywordflow">foreach</span> my $el2 (keys %$hash_ref) {</div>
<div class="line">            my $val = $self-&gt;get_value (element1 =&gt; $el1, element2 =&gt; $el2);</div>
<div class="line">            $max = max ($max, $val);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $max;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a62a3e6d9ccd83be29bb7f5bdeca59492"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_metadata_export </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_export' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_export-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_export-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_export-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_export: 56</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a62a3e6d9ccd83be29bb7f5bdeca59492">get_metadata_export</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  need a list of export subs</span></div>
<div class="line"><span class="preprocessor"></span>    my %subs = $self-&gt;get_subs_with_prefix (prefix =&gt; <span class="stringliteral">&#39;export_&#39;</span>);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  hunt through the other export subs and collate their metadata</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  (not anymore)</span></div>
<div class="line"><span class="preprocessor"></span>    my @formats;</div>
<div class="line">    my %format_labels;  #  track sub names by format label</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  loop through subs and get their metadata</span></div>
<div class="line"><span class="preprocessor"></span>    my %params_per_sub;</div>
<div class="line">    </div>
<div class="line">    LOOP_EXPORT_SUB:</div>
<div class="line">    <span class="keywordflow">foreach</span> my $sub (sort keys %subs) {</div>
<div class="line">        my %sub_args = $self-&gt;get_args (sub =&gt; $sub);</div>
<div class="line"></div>
<div class="line">        my $format = $sub_args{format};</div>
<div class="line"></div>
<div class="line">        croak <span class="stringliteral">&quot;Metadata item &#39;format&#39; missing\n&quot;</span></div>
<div class="line">            <span class="keywordflow">if</span> not defined $format;</div>
<div class="line"></div>
<div class="line">        $format_labels{$format} = $sub;</div>
<div class="line"></div>
<div class="line">        next LOOP_EXPORT_SUB</div>
<div class="line">            <span class="keywordflow">if</span> $sub_args{format} eq $EMPTY_STRING;</div>
<div class="line"></div>
<div class="line">        $params_per_sub{$format} = $sub_args{parameters};</div>
<div class="line"></div>
<div class="line">        my $params_array = $sub_args{parameters};</div>
<div class="line"></div>
<div class="line">        push @formats, $format;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    @formats = sort @formats;</div>
<div class="line">    $self-&gt;move_to_front_of_list (</div>
<div class="line">        list =&gt; \@formats,</div>
<div class="line">        item =&gt; <span class="stringliteral">&#39;Delimited text&#39;</span></div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    my %args = (</div>
<div class="line">        parameters     =&gt; \%params_per_sub,</div>
<div class="line">        format_choices =&gt; [{</div>
<div class="line">                name        =&gt; <span class="stringliteral">&#39;format&#39;</span>,</div>
<div class="line">                label_text  =&gt; <span class="stringliteral">&#39;Format to use&#39;</span>,</div>
<div class="line">                type        =&gt; <span class="stringliteral">&#39;choice&#39;</span>,</div>
<div class="line">                choices     =&gt; \@formats,</div>
<div class="line">                <span class="keywordflow">default</span>     =&gt; 0</div>
<div class="line">            },</div>
<div class="line">        ],</div>
<div class="line">        format_labels  =&gt; \%format_labels,</div>
<div class="line">    ); </div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args : \%args;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ae928868dc711f3d7e1dcca0cb99587b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_metadata_export_delimited_text </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_export_delimited_text' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_export_delimited_text-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_export_delimited_text-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_export_delimited_text-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_export_delimited_text: 67</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#ae928868dc711f3d7e1dcca0cb99587b8">get_metadata_export_delimited_text</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line">    my @sep_chars = my @separators = defined $ENV{BIODIVERSE_FIELD_SEPARATORS}</div>
<div class="line">                    ? @$ENV{BIODIVERSE_FIELD_SEPARATORS}</div>
<div class="line">                    : (<span class="charliteral">&#39;,&#39;</span>, <span class="stringliteral">&#39;tab&#39;</span>, <span class="charliteral">&#39;;&#39;</span>, <span class="stringliteral">&#39;space&#39;</span>, <span class="stringliteral">&quot;:&quot;</span>);</div>
<div class="line">    my @quote_chars = qw /<span class="stringliteral">&quot; &#39; + $/;</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral">    my @formats = qw /normal sparse gdm/;</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    my %args = (</span></div>
<div class="line"><span class="stringliteral">        format =&gt; &#39;Delimited text&#39;,</span></div>
<div class="line"><span class="stringliteral">        parameters =&gt; [</span></div>
<div class="line"><span class="stringliteral">            {</span></div>
<div class="line"><span class="stringliteral">                name       =&gt; &#39;file&#39;,  # GUI supports just one of these</span></div>
<div class="line"><span class="stringliteral">                type       =&gt; &#39;file&#39;</span></div>
<div class="line"><span class="stringliteral">            }, </span></div>
<div class="line"><span class="stringliteral">            {</span></div>
<div class="line"><span class="stringliteral">                name       =&gt; &#39;type&#39;,</span></div>
<div class="line"><span class="stringliteral">                label_text =&gt; &#39;output format&#39;,</span></div>
<div class="line"><span class="stringliteral">                type       =&gt; &#39;choice&#39;,</span></div>
<div class="line"><span class="stringliteral">                tooltip    =&gt; $self-&gt;get_tooltip_sparse_normal,</span></div>
<div class="line"><span class="stringliteral">                choices    =&gt; \@formats,</span></div>
<div class="line"><span class="stringliteral">                default    =&gt; 0</span></div>
<div class="line"><span class="stringliteral">            },</span></div>
<div class="line"><span class="stringliteral">            {</span></div>
<div class="line"><span class="stringliteral">                name       =&gt; &#39;symmetric&#39;,</span></div>
<div class="line"><span class="stringliteral">                label_text =&gt; &#39;Force output to be symmetric&#39;,</span></div>
<div class="line"><span class="stringliteral">                type       =&gt; &#39;boolean&#39;,</span></div>
<div class="line"><span class="stringliteral">                default    =&gt; 1</span></div>
<div class="line"><span class="stringliteral">            },</span></div>
<div class="line"><span class="stringliteral">            {</span></div>
<div class="line"><span class="stringliteral">                name       =&gt; &#39;lower_left&#39;,</span></div>
<div class="line"><span class="stringliteral">                label_text =&gt; &#39;Print lower left only&#39;,</span></div>
<div class="line"><span class="stringliteral">                tooltip    =&gt; &#39;print lower left matrix&#39;,</span></div>
<div class="line"><span class="stringliteral">                type       =&gt; &#39;boolean&#39;,</span></div>
<div class="line"><span class="stringliteral">                default    =&gt; 0</span></div>
<div class="line"><span class="stringliteral">            },</span></div>
<div class="line"><span class="stringliteral">            {</span></div>
<div class="line"><span class="stringliteral">                name       =&gt; &#39;upper_right&#39;,</span></div>
<div class="line"><span class="stringliteral">                label_text =&gt; &#39;Print upper right only&#39;,</span></div>
<div class="line"><span class="stringliteral">                tooltip    =&gt; &#39;print upper right matrix&#39;,</span></div>
<div class="line"><span class="stringliteral">                type       =&gt; &#39;boolean&#39;,</span></div>
<div class="line"><span class="stringliteral">                default    =&gt; 0</span></div>
<div class="line"><span class="stringliteral">            },</span></div>
<div class="line"><span class="stringliteral">            {</span></div>
<div class="line"><span class="stringliteral">                name       =&gt; &#39;sep_char&#39;,</span></div>
<div class="line"><span class="stringliteral">                label_text =&gt; &#39;Field separator&#39;,</span></div>
<div class="line"><span class="stringliteral">                type       =&gt; &#39;choice&#39;,</span></div>
<div class="line"><span class="stringliteral">                tooltip    =&gt; &#39;for text outputs&#39;,</span></div>
<div class="line"><span class="stringliteral">                choices    =&gt; \@sep_chars,</span></div>
<div class="line"><span class="stringliteral">                default    =&gt; 0,</span></div>
<div class="line"><span class="stringliteral">            },</span></div>
<div class="line"><span class="stringliteral">            {</span></div>
<div class="line"><span class="stringliteral">                name       =&gt; &#39;quote_char&#39;,</span></div>
<div class="line"><span class="stringliteral">                label_text =&gt; &#39;Quote character&#39;,</span></div>
<div class="line"><span class="stringliteral">                type       =&gt; &#39;choice&#39;,</span></div>
<div class="line"><span class="stringliteral">                tooltip    =&gt; &#39;for text outputs&#39;,</span></div>
<div class="line"><span class="stringliteral">                choices    =&gt; \@quote_chars,</span></div>
<div class="line"><span class="stringliteral">                default    =&gt; 0,</span></div>
<div class="line"><span class="stringliteral">            },</span></div>
<div class="line"><span class="stringliteral">        ]</span></div>
<div class="line"><span class="stringliteral">    );</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral">    return wantarray ? %args : \%args;</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a3a44f638691901954fd16e14f8356ab0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_min_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_min_value' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_min_value-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_min_value-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_min_value-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_min_value: 17</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a3a44f638691901954fd16e14f8356ab0">get_min_value</a> {  #  <span class="keyword">get</span> the minimum similarity value</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my $val_hash = $self-&gt;{BYVALUE};    </div>
<div class="line">    my $min_key  = min keys %$val_hash;</div>
<div class="line">    my $min      = $ludicrously_extreme_pos_val;</div>
<div class="line">    </div>
<div class="line">    my $element_hash = $val_hash-&gt;{$min_key};</div>
<div class="line">    <span class="keywordflow">while</span> (my ($el1, $hash_ref) = each %$element_hash) {</div>
<div class="line">        <span class="keywordflow">foreach</span> my $el2 (keys %$hash_ref) {</div>
<div class="line">            my $val = $self-&gt;get_value (element1 =&gt; $el1, element2 =&gt; $el2);</div>
<div class="line">            $min = min ($min, $val);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $min;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ab8893649b8bacb38b344712d62df55e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_summary_stats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_summary_stats' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_summary_stats-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_summary_stats-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_summary_stats-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_summary_stats: 48</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#ab8893649b8bacb38b344712d62df55e1">get_summary_stats</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line">    my $n = $self-&gt;get_element_pair_count;</div>
<div class="line">    my ($sumx, $sumx_sqr);</div>
<div class="line">    my @percentile_targets = qw /2.5 5 95 97.5/;</div>
<div class="line">    my @percentile_target_counts;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $pct (@percentile_targets) {</div>
<div class="line">        push @percentile_target_counts, $n * $pct / 100;  #  should floor it?</div>
<div class="line">    }</div>
<div class="line">    my %percentile_hash;</div>
<div class="line"></div>
<div class="line">    my $count;</div>
<div class="line"></div>
<div class="line">    my $values_hash = $self-&gt;{BYVALUE};</div>
<div class="line">    BY_VALUE:</div>
<div class="line">    <span class="keywordflow">foreach</span> my $value (sort <a class="code" href="classBiodiverse_1_1Matrix.html#ae47c071b11939f584b93f1eec9053082">numerically</a> keys %$values_hash) {</div>
<div class="line">        my $hash = $values_hash-&gt;{$value};</div>
<div class="line">        my $sub_count = scalar keys %$hash;</div>
<div class="line">        $sumx += $value * $sub_count;</div>
<div class="line">        $sumx_sqr += ($value ** 2) * $sub_count;</div>
<div class="line">        $count += $sub_count;</div>
<div class="line"></div>
<div class="line">        FIND_PCTL:</div>
<div class="line">        <span class="keywordflow">foreach</span> my $target (@percentile_target_counts) {</div>
<div class="line">            last FIND_PCTL <span class="keywordflow">if</span> $count &lt; $target;</div>
<div class="line">            my $percentile = shift @percentile_targets;</div>
<div class="line">            $percentile_hash{$percentile} = $value;</div>
<div class="line">            shift @percentile_target_counts;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    my $max = $self-&gt;get_max_value;</div>
<div class="line">    my $min = $self-&gt;get_min_value;</div>
<div class="line"></div>
<div class="line">    my %stats = (</div>
<div class="line">        MAX =&gt; $self-&gt;get_max_value,</div>
<div class="line">        MIN =&gt; $self-&gt;get_min_value,</div>
<div class="line">        MEAN   =&gt; $sumx / $n,</div>
<div class="line"><span class="preprocessor">        #SD     =&gt; undef,</span></div>
<div class="line"><span class="preprocessor"></span>        PCT025 =&gt; defined $percentile_hash{<span class="stringliteral">&#39;2.5&#39;</span>}  ? $percentile_hash{<span class="stringliteral">&#39;2.5&#39;</span>}  : $min,</div>
<div class="line">        PCT975 =&gt; defined $percentile_hash{<span class="stringliteral">&#39;97.5&#39;</span>} ? $percentile_hash{<span class="stringliteral">&#39;97.5&#39;</span>} : $max,</div>
<div class="line">        PCT05  =&gt; defined $percentile_hash{<span class="charliteral">&#39;5&#39;</span>}    ? $percentile_hash{<span class="charliteral">&#39;5&#39;</span>}    : $min,</div>
<div class="line">        PCT95  =&gt; defined $percentile_hash{<span class="stringliteral">&#39;95&#39;</span>}   ? $percentile_hash{<span class="stringliteral">&#39;95&#39;</span>}   : $max,</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %stats : \%stats;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ab8229dccf59bfc246165decd285718ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_tooltip_sparse_normal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_tooltip_sparse_normal' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_tooltip_sparse_normal-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_tooltip_sparse_normal-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_tooltip_sparse_normal-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_tooltip_sparse_normal: 29</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#ab8229dccf59bfc246165decd285718ea">get_tooltip_sparse_normal</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line">    my $tool_tip =&lt;&lt;<span class="stringliteral">&quot;END_MX_TOOLTIP&quot;</span></div>
<div class="line">Normal format is a normal rectangular row by column matrix like:</div>
<div class="line">\t,col1,col2</div>
<div class="line">row1,value,value</div>
<div class="line">row2,value,value</div>
<div class="line"></div>
<div class="line">Sparse format is a list like:</div>
<div class="line">\trow1,col1,value</div>
<div class="line">\trow1,col2,value</div>
<div class="line">\trow2,col2,value</div>
<div class="line"></div>
<div class="line">GDM (Generalized Dissimilarity Modelling) format is</div>
<div class="line">a sparse matrix but with the row and column</div>
<div class="line">elements split into their component axes.  </div>
<div class="line">\tx1,y1,x2,y2,value</div>
<div class="line">\trow1_x1,row1_y1,row2_x2,row2_y2,value</div>
<div class="line">\trow2_x1,row2_y1,row3_x2,row3_y2,value</div>
<div class="line"></div>
<div class="line">Note that GDM supports only two axes (x and y) so only the</div>
<div class="line">first two axes are exported.  </div>
<div class="line"></div>
<div class="line">END_MX_TOOLTIP</div>
<div class="line">;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $tool_tip;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aa259adf28a11ca981ae1c1e91863c641"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::get_value_index_key </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_value_index_key' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_value_index_key-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_value_index_key-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_value_index_key-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_value_index_key: 16</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#aa259adf28a11ca981ae1c1e91863c641">get_value_index_key</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    my $val = $args{value};</div>
<div class="line">    </div>
<div class="line">    my $index_val = $val;  #  should make <span class="keyword">this</span> a method</div>
<div class="line">    <span class="keywordflow">if</span> (!defined $index_val) {</div>
<div class="line">        $index_val = q{undef};</div>
<div class="line">    }</div>
<div class="line">    elsif (my $prec = $self-&gt;get_param (<span class="stringliteral">&#39;VAL_INDEX_PRECISION&#39;</span>)) {</div>
<div class="line">        $index_val = sprintf $prec, $val;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $index_val;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a7bac52fd3fb5b08f27ec7e3bd3e796ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::is_symmetric </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-is_symmetric' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-is_symmetric-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-is_symmetric-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-is_symmetric-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in is_symmetric: 12</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a7bac52fd3fb5b08f27ec7e3bd3e796ee">is_symmetric</a> {  #  check <span class="keywordflow">if</span> the matrix is symmetric (each element has an equal number of entries)</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line">    my $prevCount = undef;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $count (values %{$self-&gt;{ELEMENTS}}) {</div>
<div class="line">        <span class="keywordflow">if</span> (defined $prevCount) {</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keywordflow">if</span> $count != $prevCount;</div>
<div class="line">        }</div>
<div class="line">        $prevCount = $count;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 1;  #  <span class="keywordflow">if</span> we <span class="keyword">get</span> <span class="keyword">this</span> far then it is symmetric</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a5e49b70c2613cbd66ca7b49949573b0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-new' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in new: 39</span></div>
<div class="line"><span class="preprocessor"></span>sub <span class="keyword">new</span> {</div>
<div class="line">    my $class = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    my $self = bless {}, $class;</div>
<div class="line">    </div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # try to load from a file if the file arg is given</span></div>
<div class="line"><span class="preprocessor"></span>    my $file_loaded;</div>
<div class="line">    $file_loaded = $self-&gt;load_file (@_) <span class="keywordflow">if</span> defined $args{file};</div>
<div class="line">    <span class="keywordflow">return</span> $file_loaded <span class="keywordflow">if</span> defined $file_loaded;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    my %PARAMS = (</div>
<div class="line">        OUTPFX               =&gt; <span class="stringliteral">&#39;BIODIVERSE&#39;</span>,</div>
<div class="line">        OUTSUFFIX            =&gt; <span class="stringliteral">&#39;bms&#39;</span>,</div>
<div class="line">        OUTSUFFIX_YAML       =&gt; <span class="stringliteral">&#39;bmy&#39;</span>,</div>
<div class="line">        TYPE                 =&gt; undef,</div>
<div class="line">        QUOTES               =&gt; q{<span class="stringliteral">&#39;},</span></div>
<div class="line"><span class="stringliteral">        JOIN_CHAR            =&gt; q{:},  #  used for labels</span></div>
<div class="line"><span class="stringliteral">        ELEMENT_COLUMNS      =&gt; [1,2],  #  default columns in input file to define the names (eg genus,species).  Should not be used as a list here.</span></div>
<div class="line"><span class="stringliteral">        PARAM_CHANGE_WARN    =&gt; undef,</span></div>
<div class="line"><span class="stringliteral">        CACHE_MATRIX_AS_TREE =&gt; 1,</span></div>
<div class="line"><span class="stringliteral">        VAL_INDEX_PRECISION  =&gt; &#39;</span>%.2g<span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">    );</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    $self-&gt;set_params (%PARAMS, %args);  #  load the defaults, with the rest of the args as params</span></div>
<div class="line"><span class="stringliteral">    $self-&gt;set_default_params;  #  and any user overrides</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral">    $self-&gt;{BYELEMENT} = undef;  #  values indexed by elements</span></div>
<div class="line"><span class="stringliteral">    $self-&gt;{BYVALUE}   = undef;  #  elements indexed by value</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    $self-&gt;set_param (NAME =&gt; $args{name}) if defined $args{name};</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    warn &quot;[MATRIX] WARNING: Matrix name not specified\n&quot;</span></div>
<div class="line"><span class="stringliteral">        if ! defined $self-&gt;get_param(&#39;</span>NAME<span class="stringliteral">&#39;);</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    return $self;</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ae47c071b11939f584b93f1eec9053082"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::numerically </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-numerically' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-numerically-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-numerically-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-numerically-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in numerically: 1</span></div>
<div class="line"><span class="preprocessor">sub numerically {$a &lt;=&gt; $b};</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a86033de7bbdb05605df60da3728ca7f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::rebuild_value_index </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-rebuild_value_index' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-rebuild_value_index-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-rebuild_value_index-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-rebuild_value_index-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in rebuild_value_index: 26</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a86033de7bbdb05605df60da3728ca7f4">rebuild_value_index</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #$self-&gt;delete_value_index;</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{BYVALUE} = {};</div>
<div class="line">    </div>
<div class="line">    my @elements = $self-&gt;get_elements_as_array;</div>
<div class="line">    </div>
<div class="line">    EL1:</div>
<div class="line">    <span class="keywordflow">foreach</span> my $el1 (@elements) {</div>
<div class="line">        EL2:</div>
<div class="line">        <span class="keywordflow">foreach</span> my $el2 (@elements) {</div>
<div class="line"><span class="preprocessor">            #  we want pairs in their stored order</span></div>
<div class="line"><span class="preprocessor"></span>            next EL2</div>
<div class="line">              <span class="keywordflow">if</span> 1 != $self-&gt;element_pair_exists(element1 =&gt; $el1, element2 =&gt; $el2);</div>
<div class="line"></div>
<div class="line">            my $val = $self-&gt;get_value (element1 =&gt; $el1, element2 =&gt; $el2);</div>
<div class="line"></div>
<div class="line">            my $index_val = $self-&gt;get_value_index_key (value =&gt; $val);</div>
<div class="line"></div>
<div class="line">            $self-&gt;{BYVALUE}{$index_val}{$el1}{$el2}++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a143db1e6dca17334d108663521123c45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::rename </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-rename' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-rename-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-rename-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-rename-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in rename: 17</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a143db1e6dca17334d108663521123c45">rename</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    my $name = $args{new_name};</div>
<div class="line">    <span class="keywordflow">if</span> (not defined $name) {</div>
<div class="line">        croak <span class="stringliteral">&quot;[Matrix] Argument &#39;new_name&#39; not defined\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  first tell the basedata object - No, leave that to the basedata object</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $bd = $self-&gt;get_param (&#39;BASEDATA_REF&#39;);</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$bd-&gt;rename_output (object =&gt; $self, new_name =&gt; $name);</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    # and now change ourselves   </span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;set_param (NAME =&gt; $name);</div>
<div class="line">    </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ab7098a6a02caf27e54b57a66364b4b03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::to_table </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-to_table' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-to_table-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-to_table-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-to_table-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in to_table: 14</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#ab7098a6a02caf27e54b57a66364b4b03">to_table</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ($args{type} eq <span class="stringliteral">&#39;sparse&#39;</span>) {</div>
<div class="line">        <span class="keywordflow">return</span> $self-&gt;to_table_sparse (@_);</div>
<div class="line">    }</div>
<div class="line">    elsif ($args{type} eq <span class="stringliteral">&#39;gdm&#39;</span>) {</div>
<div class="line">        <span class="keywordflow">return</span> $self-&gt;to_table_gdm (@_);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> $self-&gt;to_table_normal (@_);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad6c507a57bcdfce7f72f89b5d40fc910"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::to_table_gdm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-to_table_gdm' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-to_table_gdm-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-to_table_gdm-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-to_table_gdm-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in to_table_gdm: 62</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#ad6c507a57bcdfce7f72f89b5d40fc910">to_table_gdm</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line">    my %args = (</div>
<div class="line">        symmetric =&gt; 1,</div>
<div class="line">        @_,</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    my @data;</div>
<div class="line">    my @elements = sort $self-&gt;get_elements_as_array;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  Get csv object from the basedata to crack the elements.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  Could cause trouble later on for matrices without basedata.</span></div>
<div class="line"><span class="preprocessor"></span>    my $bd = $self-&gt;get_param (<span class="stringliteral">&#39;BASEDATA_REF&#39;</span>);</div>
<div class="line">    my $csv_object = $bd-&gt;get_csv_object (sep_char =&gt; $bd-&gt;get_param (<span class="stringliteral">&#39;JOIN_CHAR&#39;</span>));</div>
<div class="line">    </div>
<div class="line">    push @data, [qw /x1 y1 x2 y2 Value/];  #  header line</div>
<div class="line">    </div>
<div class="line">    my $progress_bar = <a class="code" href="classBiodiverse_1_1Progress.html">Biodiverse::Progress</a>-&gt;<a class="code" href="classBiodiverse_1_1Progress.html#a88f4cef6f66986952a850fb70a2b62d8">new</a>();</div>
<div class="line">    my $to_do = scalar @elements;</div>
<div class="line">    my $progress_pfx = <span class="stringliteral">&quot;Converting matrix to table \n&quot;</span>;</div>
<div class="line">    </div>
<div class="line">    my $i = 0;</div>
<div class="line">    </div>
<div class="line">    E1:</div>
<div class="line">    <span class="keywordflow">foreach</span> my $element1 (@elements) {</div>
<div class="line">        $i++;</div>
<div class="line">        my @element1 = $self-&gt;csv2list (<span class="keywordtype">string</span> =&gt; $element1, csv_object =&gt; $csv_object);</div>
<div class="line">        </div>
<div class="line">        my $progress = $i / $to_do;</div>
<div class="line">        $progress_bar-&gt;update (</div>
<div class="line">            $progress_pfx . <span class="stringliteral">&quot;(row $i / $to_do)&quot;</span>,</div>
<div class="line">            $progress,</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        my $j = 0;</div>
<div class="line">        E2:</div>
<div class="line">        <span class="keywordflow">foreach</span> my $element2 (@elements) {</div>
<div class="line">            $j++;</div>
<div class="line">            next E1 <span class="keywordflow">if</span> $args{lower_left}  and $j &gt; $i;</div>
<div class="line">            next E2 <span class="keywordflow">if</span> $args{upper_right} and $j &lt; $i;</div>
<div class="line">            my $exists = $self-&gt;element_pair_exists (</div>
<div class="line">                element1 =&gt; $element1,</div>
<div class="line">                element2 =&gt; $element2,</div>
<div class="line">            );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  if we are symmetric then list it regardless, otherwise only if we have this exact pair-order</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> (($args{symmetric} and $exists) or $exists == 1) {</div>
<div class="line">                my $value = $self-&gt;get_value (</div>
<div class="line">                    element1 =&gt; $element1,</div>
<div class="line">                    element2 =&gt; $element2,</div>
<div class="line">                );</div>
<div class="line"></div>
<div class="line">                my @element2 = $self-&gt;csv2list (<span class="keywordtype">string</span> =&gt; $element2, csv_object =&gt; $csv_object);</div>
<div class="line">                my $list = [@element1[0,1], @element2[0,1], $value];</div>
<div class="line">                push @data, $list;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? @data : \@data;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a7dd3c68e39d80df837bdf1e70f8ef944"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::to_table_normal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-to_table_normal' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-to_table_normal-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-to_table_normal-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-to_table_normal-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in to_table_normal: 49</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a7dd3c68e39d80df837bdf1e70f8ef944">to_table_normal</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = (</div>
<div class="line">        symmetric =&gt; 1,</div>
<div class="line">        @_,</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    my @data;</div>
<div class="line">    my @elements = sort $self-&gt;get_elements_as_array;</div>
<div class="line">    </div>
<div class="line">    $data[0] = [q{}, @elements];  #  header line with blank leader</div>
<div class="line">    my $i = 0;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  allow for both UL and LL to be specified</span></div>
<div class="line"><span class="preprocessor"></span>    my $ll_only = $args{lower_left}  &amp;&amp; ! $args{upper_right};</div>
<div class="line">    my $ur_only = $args{upper_right} &amp;&amp; ! $args{lower_left}; </div>
<div class="line"></div>
<div class="line">    E1:</div>
<div class="line">    <span class="keywordflow">foreach</span> my $element1 (@elements) {</div>
<div class="line">        $i++;</div>
<div class="line">        $data[$i][0] = $element1;</div>
<div class="line">        my $j = 0;</div>
<div class="line">        </div>
<div class="line">        E2:</div>
<div class="line">        <span class="keywordflow">foreach</span> my $element2 (@elements) {</div>
<div class="line">            $j++;</div>
<div class="line">            next E1 <span class="keywordflow">if</span> $ll_only and $j &gt; $i;</div>
<div class="line">            next E2 <span class="keywordflow">if</span> $ur_only and $j &lt; $i;</div>
<div class="line">            my $exists = $self-&gt;element_pair_exists (</div>
<div class="line">                element1 =&gt; $element1,</div>
<div class="line">                element2 =&gt; $element2,</div>
<div class="line">            );</div>
<div class="line">            <span class="keywordflow">if</span> (! $args{symmetric} &amp;&amp; $exists == 1) {</div>
<div class="line">                $data[$i][$j] = $self-&gt;get_value (</div>
<div class="line">                    element1 =&gt; $element1,</div>
<div class="line">                    element2 =&gt; $element2,</div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                $data[$i][$j] = $self-&gt;get_value (</div>
<div class="line">                    element1 =&gt; $element1,</div>
<div class="line">                    element2 =&gt; $element2,</div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? @data : \@data;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2b8e9ad8b1e0c2455618509bc598f0c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::to_table_sparse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-to_table_sparse' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-to_table_sparse-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-to_table_sparse-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-to_table_sparse-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in to_table_sparse: 48</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a2b8e9ad8b1e0c2455618509bc598f0c1">to_table_sparse</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line">    my %args = (</div>
<div class="line">        symmetric =&gt; 1,</div>
<div class="line">        @_,</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    my @data;</div>
<div class="line">    my @elements = sort $self-&gt;get_elements_as_array;</div>
<div class="line"></div>
<div class="line">    my $lower_left  = $args{lower_left};</div>
<div class="line">    my $upper_right = $args{upper_right};</div>
<div class="line">    my $symmetric = $args{symmetric};</div>
<div class="line">    </div>
<div class="line">    push @data, [qw /Row Column Value/];  #  header line</div>
<div class="line">    </div>
<div class="line">    my $i = 0;</div>
<div class="line">    </div>
<div class="line">    E1:</div>
<div class="line">    <span class="keywordflow">foreach</span> my $element1 (@elements) {</div>
<div class="line">        $i++;</div>
<div class="line"><span class="preprocessor">        #$data[$i][0] = $element1;</span></div>
<div class="line"><span class="preprocessor"></span>        my $j = 0;</div>
<div class="line">        E2:</div>
<div class="line">        <span class="keywordflow">foreach</span> my $element2 (@elements) {</div>
<div class="line">            $j++;</div>
<div class="line">            next E1 <span class="keywordflow">if</span> $lower_left  and $j &gt; $i;</div>
<div class="line">            next E2 <span class="keywordflow">if</span> $upper_right and $j &lt; $i;</div>
<div class="line">            my $exists = $self-&gt;element_pair_exists (</div>
<div class="line">                element1 =&gt; $element1,</div>
<div class="line">                element2 =&gt; $element2,</div>
<div class="line">            );</div>
<div class="line">            </div>
<div class="line"><span class="preprocessor">            #  if we are symmetric then list it regardless, otherwise only if we have this exact pair-order</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> ($exists == 1 || ($symmetric &amp;&amp; $exists)) {</div>
<div class="line">                my $value = $self-&gt;get_value (</div>
<div class="line">                    element1 =&gt; $element1,</div>
<div class="line">                    element2 =&gt; $element2,</div>
<div class="line">                );</div>
<div class="line">                my $list = [$element1, $element2, $value];</div>
<div class="line">                push @data, $list;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? @data : \@data;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a306c333e01d7aaf9f272d52aba137716"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::Matrix::to_tree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-to_tree' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-to_tree-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-to_tree-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-to_tree-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in to_tree: 29</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1Matrix.html#a306c333e01d7aaf9f272d52aba137716">to_tree</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    $args{linkage_function} = $args{linkage_function} || <span class="stringliteral">&#39;link_average&#39;</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;get_param (<span class="stringliteral">&#39;AS_TREE&#39;</span>)) {  #  don<span class="stringliteral">&#39;t recalculate </span></div>
<div class="line"><span class="stringliteral">        return $self-&gt;get_param (&#39;</span>AS_TREE<span class="stringliteral">&#39;);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral">    my $tree = Biodiverse::Cluster-&gt;new;</span></div>
<div class="line"><span class="stringliteral">    $tree-&gt;set_param (</span></div>
<div class="line"><span class="stringliteral">        &#39;</span>NAME<span class="stringliteral">&#39; =&gt; ($args{name}</span></div>
<div class="line"><span class="stringliteral">        || $self-&gt;get_param (&#39;</span>NAME<span class="stringliteral">&#39;) . &quot;_AS_TREE&quot;</span></div>
<div class="line"><span class="stringliteral">        )</span></div>
<div class="line"><span class="stringliteral">    );</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral">    eval {</span></div>
<div class="line"><span class="stringliteral">        $tree-&gt;cluster (</span></div>
<div class="line"><span class="stringliteral">            %args,</span></div>
<div class="line"><span class="stringliteral">            #  need to work on a clone, as it is a destructive approach</span></div>
<div class="line"><span class="stringliteral">            cluster_matrix =&gt; $self-&gt;clone, </span></div>
<div class="line"><span class="stringliteral">        );</span></div>
<div class="line"><span class="stringliteral">    };</span></div>
<div class="line"><span class="stringliteral">    croak $EVAL_ERROR if $EVAL_ERROR;</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral">    $self-&gt;set_param (AS_TREE =&gt; $tree);</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral">    return $tree;</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/Biodiverse/<a class="el" href="Matrix_8pm_source.html">Matrix.pm</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Biodiverse</b></li><li class="navelem"><a class="el" href="classBiodiverse_1_1Matrix.html">Matrix</a></li>
    <li class="footer">Generated on Tue Nov 5 2013 19:07:26 for Biodiverse by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
