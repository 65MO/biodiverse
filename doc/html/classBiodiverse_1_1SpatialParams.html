<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Biodiverse: Biodiverse::SpatialParams Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Biodiverse
   &#160;<span id="projectnumber">0.19</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classBiodiverse_1_1SpatialParams.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classBiodiverse_1_1SpatialParams-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Biodiverse::SpatialParams Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Biodiverse::SpatialParams:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classBiodiverse_1_1SpatialParams__coll__graph.png" border="0" usemap="#Biodiverse_1_1SpatialParams_coll__map" alt="Collaboration graph"/></div>
<map name="Biodiverse_1_1SpatialParams_coll__map" id="Biodiverse_1_1SpatialParams_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a0c4870365b5a16bfbd60bcd1c88f3e9a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0c4870365b5a16bfbd60bcd1c88f3e9a"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>NULL_STRING</b></td></tr>
<tr class="separator:a0c4870365b5a16bfbd60bcd1c88f3e9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d986d3c8a2931978dc6f63329afb6c8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4d986d3c8a2931978dc6f63329afb6c8"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>RE_NUMBER</b></td></tr>
<tr class="separator:a4d986d3c8a2931978dc6f63329afb6c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a019fa71e21734d2ee1870e69c9da98e5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a019fa71e21734d2ee1870e69c9da98e5"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>RE_INT</b></td></tr>
<tr class="separator:a019fa71e21734d2ee1870e69c9da98e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f1cceec83139c38d9815a9d7f538b96"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1f1cceec83139c38d9815a9d7f538b96"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>RE_COMMENT</b></td></tr>
<tr class="separator:a1f1cceec83139c38d9815a9d7f538b96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a753f9cbd5fa0ea4a48edc30af6a9a7c6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a753f9cbd5fa0ea4a48edc30af6a9a7c6"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>BOUNDED_COND_RE</b></td></tr>
<tr class="separator:a753f9cbd5fa0ea4a48edc30af6a9a7c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c94212ab61eb2833fddc1eeaa40108"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa3c94212ab61eb2833fddc1eeaa40108"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>re_text_in_brackets</b></td></tr>
<tr class="separator:aa3c94212ab61eb2833fddc1eeaa40108"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Avaliable Methods</h2></td></tr>
<tr class="memitem:a6568cf5bf8d64287fb723d2cb2960d9f"><td class="memItemLeft" align="right" valign="top">private <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a6568cf5bf8d64287fb723d2cb2960d9f">_get_shp_examples</a> ()</td></tr>
<tr class="separator:a6568cf5bf8d64287fb723d2cb2960d9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0fc09d7b6650b2244b2db6ed2728146"><td class="memItemLeft" align="right" valign="top">private <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ad0fc09d7b6650b2244b2db6ed2728146">_sp_side</a> ()</td></tr>
<tr class="separator:ad0fc09d7b6650b2244b2db6ed2728146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c31a9b917e5c959c44fbe24ee0c451a"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> ()</td></tr>
<tr class="separator:a6c31a9b917e5c959c44fbe24ee0c451a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e1aa4082c4a85e17b2a5a1879d52cb"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a51e1aa4082c4a85e17b2a5a1879d52cb">get_cache_name_sp_point_in_poly_shape</a> ()</td></tr>
<tr class="separator:a51e1aa4082c4a85e17b2a5a1879d52cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7914ab1786e4b588a3f655127f2e7038"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a7914ab1786e4b588a3f655127f2e7038">sp_select_block</a> ()</td></tr>
<tr class="separator:a7914ab1786e4b588a3f655127f2e7038"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a787d68af04956d0a60ec07135c54af5e"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a787d68af04956d0a60ec07135c54af5e">get_metadata_sp_select_sequence</a> ()</td></tr>
<tr class="separator:a787d68af04956d0a60ec07135c54af5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22112f923ba3a2e773c2b0c6f02c6ec3"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a22112f923ba3a2e773c2b0c6f02c6ec3">sp_in_line_with</a> ()</td></tr>
<tr class="separator:a22112f923ba3a2e773c2b0c6f02c6ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc3472150877a8b2d757199cb10bcf0"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#aacc3472150877a8b2d757199cb10bcf0">has_conditions</a> ()</td></tr>
<tr class="separator:aacc3472150877a8b2d757199cb10bcf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e561a08e56d5fa2d951ab9e879a904b"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a4e561a08e56d5fa2d951ab9e879a904b">get_metadata_sp_select_block</a> ()</td></tr>
<tr class="separator:a4e561a08e56d5fa2d951ab9e879a904b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85080d0055a43f3537e5d95f357fda96"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a85080d0055a43f3537e5d95f357fda96">get_metadata_sp_square</a> ()</td></tr>
<tr class="separator:a85080d0055a43f3537e5d95f357fda96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01556ccf12dd4434fa1d7bf308dd9a7e"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a01556ccf12dd4434fa1d7bf308dd9a7e">get_metadata_sp_group_not_empty</a> ()</td></tr>
<tr class="separator:a01556ccf12dd4434fa1d7bf308dd9a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa08aa09c3a900758017af40a82316268"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#aa08aa09c3a900758017af40a82316268">get_polygons_from_shapefile</a> ()</td></tr>
<tr class="separator:aa08aa09c3a900758017af40a82316268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fcca908774721d4bc52d49848d6eff4"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a2fcca908774721d4bc52d49848d6eff4">get_conditions_code_ref</a> ()</td></tr>
<tr class="separator:a2fcca908774721d4bc52d49848d6eff4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a835ea09410b59c8739421c259e9fc46f"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a835ea09410b59c8739421c259e9fc46f">get_distances</a> ()</td></tr>
<tr class="separator:a835ea09410b59c8739421c259e9fc46f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d98fafe7ac5189ee1b72e3a4fe8db7e"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a5d98fafe7ac5189ee1b72e3a4fe8db7e">get_metadata_sp_ellipse</a> ()</td></tr>
<tr class="separator:a5d98fafe7ac5189ee1b72e3a4fe8db7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82f818f7f2287f70379ff0a06afc90b4"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a82f818f7f2287f70379ff0a06afc90b4">get_metadata_sp_circle_cell</a> ()</td></tr>
<tr class="separator:a82f818f7f2287f70379ff0a06afc90b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77199baf145a433c91f295afd8a61149"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a77199baf145a433c91f295afd8a61149">get_metadata_sp_square_cell</a> ()</td></tr>
<tr class="separator:a77199baf145a433c91f295afd8a61149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0357fae21adb0b4757e6b7918abb4d8b"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a0357fae21adb0b4757e6b7918abb4d8b">clear_cached_subset_nbrs</a> ()</td></tr>
<tr class="separator:a0357fae21adb0b4757e6b7918abb4d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24d2cabc6e67e8761f50213037b62813"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a24d2cabc6e67e8761f50213037b62813">get_metadata_sp_select_element</a> ()</td></tr>
<tr class="separator:a24d2cabc6e67e8761f50213037b62813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88278224863c1f6e2a8cf763abd6bc74"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a88278224863c1f6e2a8cf763abd6bc74">sp_point_in_poly_shape</a> ()</td></tr>
<tr class="separator:a88278224863c1f6e2a8cf763abd6bc74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a714e610ffb99e142b4990a4ff6e4ce69"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a714e610ffb99e142b4990a4ff6e4ce69">get_rtree_for_polygons_from_shapefile</a> ()</td></tr>
<tr class="separator:a714e610ffb99e142b4990a4ff6e4ce69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af476e932cd36f06c619497416ac6c0bd"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#af476e932cd36f06c619497416ac6c0bd">get_type</a> ()</td></tr>
<tr class="separator:af476e932cd36f06c619497416ac6c0bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34031c3287a7dfd5640fe454f9d060ff"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a34031c3287a7dfd5640fe454f9d060ff">get_metadata_sp_points_in_same_poly_shape</a> ()</td></tr>
<tr class="separator:a34031c3287a7dfd5640fe454f9d060ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3701a915f5ccfbe331695f7bdfc2be4"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ad3701a915f5ccfbe331695f7bdfc2be4">get_metadata_sp_select_all</a> ()</td></tr>
<tr class="separator:ad3701a915f5ccfbe331695f7bdfc2be4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add7290474ccbde15ec5e94a52f854851"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#add7290474ccbde15ec5e94a52f854851">get_cache_sp_point_in_poly_shape</a> ()</td></tr>
<tr class="separator:add7290474ccbde15ec5e94a52f854851"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8ce160f07c3af103e1c71dbad464151"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#af8ce160f07c3af103e1c71dbad464151">get_metadata_sp_point_in_poly</a> ()</td></tr>
<tr class="separator:af8ce160f07c3af103e1c71dbad464151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b9defc360d865f12953d49c86fb55c"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a89b9defc360d865f12953d49c86fb55c">get_conditions</a> ()</td></tr>
<tr class="separator:a89b9defc360d865f12953d49c86fb55c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a701cd924707d98cecc2d77c96d088333"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a701cd924707d98cecc2d77c96d088333">evaluate</a> ()</td></tr>
<tr class="separator:a701cd924707d98cecc2d77c96d088333"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39b7332afe9ec928e9b4ac06586c148e"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a39b7332afe9ec928e9b4ac06586c148e">get_conditions_unparsed</a> ()</td></tr>
<tr class="separator:a39b7332afe9ec928e9b4ac06586c148e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82600d7e67dde7b77cb20df8322251c8"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a82600d7e67dde7b77cb20df8322251c8">sp_in_label_range</a> ()</td></tr>
<tr class="separator:a82600d7e67dde7b77cb20df8322251c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad48684994640814f0d88a83b2ce5b882"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ad48684994640814f0d88a83b2ce5b882">get_cached_subset_nbrs</a> ()</td></tr>
<tr class="separator:ad48684994640814f0d88a83b2ce5b882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a325884b7b1a27da29046fdb6133b60d7"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a325884b7b1a27da29046fdb6133b60d7">sp_square_cell</a> ()</td></tr>
<tr class="separator:a325884b7b1a27da29046fdb6133b60d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ae8739427cc1b0f8d0e9aafa2e47e67"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a8ae8739427cc1b0f8d0e9aafa2e47e67">sp_block</a> ()</td></tr>
<tr class="separator:a8ae8739427cc1b0f8d0e9aafa2e47e67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9e2e9471166ce9c416548b706b7dc25"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ab9e2e9471166ce9c416548b706b7dc25">get_spatial_output_sp_select_block</a> ()</td></tr>
<tr class="separator:ab9e2e9471166ce9c416548b706b7dc25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a146efa736db75b594672e9b771ea6fc8"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a146efa736db75b594672e9b771ea6fc8">parse_distances</a> ()</td></tr>
<tr class="separator:a146efa736db75b594672e9b771ea6fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a257d56a5c44dcaacc0f486ca9433f431"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a257d56a5c44dcaacc0f486ca9433f431">sp_select_all</a> ()</td></tr>
<tr class="separator:a257d56a5c44dcaacc0f486ca9433f431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a384420b78f634d49af385737e78bdca5"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a384420b78f634d49af385737e78bdca5">get_cache_name_rtree</a> ()</td></tr>
<tr class="separator:a384420b78f634d49af385737e78bdca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57df12fec08b1c15892357423f78c70a"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a57df12fec08b1c15892357423f78c70a">get_invalid_args_for_sub_call</a> ()</td></tr>
<tr class="separator:a57df12fec08b1c15892357423f78c70a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83e7bbecd150f4f6335c2bef69a12fd"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ac83e7bbecd150f4f6335c2bef69a12fd">get_metadata_sp_get_spatial_output_list_value</a> ()</td></tr>
<tr class="separator:ac83e7bbecd150f4f6335c2bef69a12fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d6202d00fd2b0cd536c1869669dbdba"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a2d6202d00fd2b0cd536c1869669dbdba">sp_circle</a> ()</td></tr>
<tr class="separator:a2d6202d00fd2b0cd536c1869669dbdba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e5ca0defb3b91547abba077d22fac97"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a4e5ca0defb3b91547abba077d22fac97">max</a> ()</td></tr>
<tr class="separator:a4e5ca0defb3b91547abba077d22fac97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1498bc106fee924452cd155822128b0"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#af1498bc106fee924452cd155822128b0">get_metadata_sp_block</a> ()</td></tr>
<tr class="separator:af1498bc106fee924452cd155822128b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16386447dd62d71855308dc41af5ad11"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a16386447dd62d71855308dc41af5ad11">sp_point_in_poly</a> ()</td></tr>
<tr class="separator:a16386447dd62d71855308dc41af5ad11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7351f152af7fb71395177e45e3415758"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a7351f152af7fb71395177e45e3415758">sp_circle_cell</a> ()</td></tr>
<tr class="separator:a7351f152af7fb71395177e45e3415758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a551bfeb158890c5af33c135c408e23fb"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a551bfeb158890c5af33c135c408e23fb">sp_self_only</a> ()</td></tr>
<tr class="separator:a551bfeb158890c5af33c135c408e23fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a77174607719827fd0aa9f636fd114"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ab3a77174607719827fd0aa9f636fd114">sp_get_spatial_output_list_value</a> ()</td></tr>
<tr class="separator:ab3a77174607719827fd0aa9f636fd114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4857201a6c16ad526d0ea2ff1db3c85"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ab4857201a6c16ad526d0ea2ff1db3c85">get_metadata_sp_annulus</a> ()</td></tr>
<tr class="separator:ab4857201a6c16ad526d0ea2ff1db3c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72b2fc40c4ff618d6c54cefcb596ce21"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a72b2fc40c4ff618d6c54cefcb596ce21">get_used_dists</a> ()</td></tr>
<tr class="separator:a72b2fc40c4ff618d6c54cefcb596ce21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac00e15542ca8b5c91b7c581d5f80f7f4"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ac00e15542ca8b5c91b7c581d5f80f7f4">new</a> ()</td></tr>
<tr class="separator:ac00e15542ca8b5c91b7c581d5f80f7f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd1d7a800c58d0f9f7f73027e68c4e5"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a7dd1d7a800c58d0f9f7f73027e68c4e5">sp_match_text</a> ()</td></tr>
<tr class="separator:a7dd1d7a800c58d0f9f7f73027e68c4e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce0d8ce65495f5e53620a51a90902a4"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a4ce0d8ce65495f5e53620a51a90902a4">sp_points_in_same_poly_shape</a> ()</td></tr>
<tr class="separator:a4ce0d8ce65495f5e53620a51a90902a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af122f923060540c24da96f5be70372b6"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#af122f923060540c24da96f5be70372b6">get_metadata_sp_is_left_of</a> ()</td></tr>
<tr class="separator:af122f923060540c24da96f5be70372b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6bc374a3bf8b76cade82d9ea8a4637f"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ae6bc374a3bf8b76cade82d9ea8a4637f">get_result_type</a> ()</td></tr>
<tr class="separator:ae6bc374a3bf8b76cade82d9ea8a4637f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d6a144a786ebc0f6aea22cfc23a124a"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a2d6a144a786ebc0f6aea22cfc23a124a">build_rtree_for_shapepolys</a> ()</td></tr>
<tr class="separator:a2d6a144a786ebc0f6aea22cfc23a124a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0081b17c5428da27bdd8d95c04921d6"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#af0081b17c5428da27bdd8d95c04921d6">get_conditions_parsed</a> ()</td></tr>
<tr class="separator:af0081b17c5428da27bdd8d95c04921d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55e483761be631e5ef642d7af827391b"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a55e483761be631e5ef642d7af827391b">get_metadata_sp_match_text</a> ()</td></tr>
<tr class="separator:a55e483761be631e5ef642d7af827391b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52887bc0cada4339dea8617bbaf05f4d"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a52887bc0cada4339dea8617bbaf05f4d">get_metadata_sp_in_label_range</a> ()</td></tr>
<tr class="separator:a52887bc0cada4339dea8617bbaf05f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4062e4a920a2096f499ed6451a2d18b7"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a4062e4a920a2096f499ed6451a2d18b7">get_metadata_sp_circle</a> ()</td></tr>
<tr class="separator:a4062e4a920a2096f499ed6451a2d18b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf796c3bdb189f0bfa7efa4857594325"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#abf796c3bdb189f0bfa7efa4857594325">get_metadata_sp_self_only</a> ()</td></tr>
<tr class="separator:abf796c3bdb189f0bfa7efa4857594325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b63605ef3413cb4c0f23b5c1edf68a3"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a4b63605ef3413cb4c0f23b5c1edf68a3">sp_is_right_of</a> ()</td></tr>
<tr class="separator:a4b63605ef3413cb4c0f23b5c1edf68a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab94e012fdc9bf1f4e16929b279c93ffe"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ab94e012fdc9bf1f4e16929b279c93ffe">sp_group_not_empty</a> ()</td></tr>
<tr class="separator:ab94e012fdc9bf1f4e16929b279c93ffe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e1588a1dc3a718ade5b743e3111fdef"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a1e1588a1dc3a718ade5b743e3111fdef">sp_select_sequence</a> ()</td></tr>
<tr class="separator:a1e1588a1dc3a718ade5b743e3111fdef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5535d7a8ddae1bf27d892d1bcfc209c7"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a5535d7a8ddae1bf27d892d1bcfc209c7">sp_square</a> ()</td></tr>
<tr class="separator:a5535d7a8ddae1bf27d892d1bcfc209c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8334a0306ac5cd1f5bd80db966fa5ba"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ae8334a0306ac5cd1f5bd80db966fa5ba">sp_is_left_of</a> ()</td></tr>
<tr class="separator:ae8334a0306ac5cd1f5bd80db966fa5ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c7921bc29310575d2a8e680387bcdb7"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a0c7921bc29310575d2a8e680387bcdb7">get_cache_points_in_shapepoly</a> ()</td></tr>
<tr class="separator:a0c7921bc29310575d2a8e680387bcdb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aced4e8125084ae0d1fe15bdf5e6f7969"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#aced4e8125084ae0d1fe15bdf5e6f7969">sp_select_element</a> ()</td></tr>
<tr class="separator:aced4e8125084ae0d1fe15bdf5e6f7969"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a514b48f7b6d001a813e0c3af3a4635e1"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a514b48f7b6d001a813e0c3af3a4635e1">verify</a> ()</td></tr>
<tr class="separator:a514b48f7b6d001a813e0c3af3a4635e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47aaadc61d16f6cf5d732687a570be95"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a47aaadc61d16f6cf5d732687a570be95">get_index_max_dist</a> ()</td></tr>
<tr class="separator:a47aaadc61d16f6cf5d732687a570be95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a844ccd79f1a6d26835534845ce069c57"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a844ccd79f1a6d26835534845ce069c57">get_comparator_for_text_matching</a> ()</td></tr>
<tr class="separator:a844ccd79f1a6d26835534845ce069c57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a428dcc284fdb9b55e0c1f99abc00b08d"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a428dcc284fdb9b55e0c1f99abc00b08d">get_metadata_sp_in_line_with</a> ()</td></tr>
<tr class="separator:a428dcc284fdb9b55e0c1f99abc00b08d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e7bf641c9cb5fcddf7d2bc3126d8b5"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a35e7bf641c9cb5fcddf7d2bc3126d8b5">clear_conditions_code_ref</a> ()</td></tr>
<tr class="separator:a35e7bf641c9cb5fcddf7d2bc3126d8b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5866868abbebd9cc63f2fb519f458f59"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a5866868abbebd9cc63f2fb519f458f59">get_cache_name_sp_points_in_same_poly_shape</a> ()</td></tr>
<tr class="separator:a5866868abbebd9cc63f2fb519f458f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99d9d7130c3379edad7ae2a614faa931"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a99d9d7130c3379edad7ae2a614faa931">get_metadata_sp_is_right_of</a> ()</td></tr>
<tr class="separator:a99d9d7130c3379edad7ae2a614faa931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a495668a49f3ce120fd0b38f120510fe8"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a495668a49f3ce120fd0b38f120510fe8">min</a> ()</td></tr>
<tr class="separator:a495668a49f3ce120fd0b38f120510fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4659ec746b9233712e705d1ddef9f944"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a4659ec746b9233712e705d1ddef9f944">get_metadata_sp_match_regex</a> ()</td></tr>
<tr class="separator:a4659ec746b9233712e705d1ddef9f944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c8bde3c87a8eb113ac6f9bef1ec452"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#ad5c8bde3c87a8eb113ac6f9bef1ec452">sp_annulus</a> ()</td></tr>
<tr class="separator:ad5c8bde3c87a8eb113ac6f9bef1ec452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e290138605de9b18c83b30f2569704"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a23e290138605de9b18c83b30f2569704">get_cache_sp_points_in_same_poly_shape</a> ()</td></tr>
<tr class="separator:a23e290138605de9b18c83b30f2569704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8551712446813bb4d55871dc15657d0f"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a8551712446813bb4d55871dc15657d0f">get_metadata_sp_point_in_poly_shape</a> ()</td></tr>
<tr class="separator:a8551712446813bb4d55871dc15657d0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e72bf9b5b5bb04db3e8895cf2589d10"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a7e72bf9b5b5bb04db3e8895cf2589d10">get_example_sp_get_spatial_output_list_value</a> ()</td></tr>
<tr class="separator:a7e72bf9b5b5bb04db3e8895cf2589d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb9c4e4eb9526fa0124df632735c528a"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#afb9c4e4eb9526fa0124df632735c528a">sp_ellipse</a> ()</td></tr>
<tr class="separator:afb9c4e4eb9526fa0124df632735c528a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2916b3e5c3652a081fabf8fa5691969f"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1SpatialParams.html#a2916b3e5c3652a081fabf8fa5691969f">sp_match_regex</a> ()</td></tr>
<tr class="separator:a2916b3e5c3652a081fabf8fa5691969f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="SpatialParams_8pm_source.html#l00023">23</a> of file <a class="el" href="SpatialParams_8pm_source.html">SpatialParams.pm</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a6568cf5bf8d64287fb723d2cb2960d9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">private <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::_get_shp_examples </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-_get_shp_examples' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-_get_shp_examples-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_get_shp_examples-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_get_shp_examples-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in _get_shp_examples: 25</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a6568cf5bf8d64287fb723d2cb2960d9f">_get_shp_examples</a> {</div>
<div class="line">        my $examples = &lt;&lt;<span class="stringliteral">&#39;END_OF_SHP_EXAMPLES&#39;</span></div>
<div class="line"><span class="preprocessor"># Is the neighbour coord in a shapefile?</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a88278224863c1f6e2a8cf763abd6bc74">sp_point_in_poly_shape</a> (</div>
<div class="line">    file  =&gt; <span class="stringliteral">&#39;c:\biodiverse\data\coastline_lamberts&#39;</span>,</div>
<div class="line">    point =&gt; \@nbrcoord,</div>
<div class="line">)</div>
<div class="line"><span class="preprocessor"># Is the neighbour coord in a shapefile&#39;s second polygon (counting from 1)?</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a88278224863c1f6e2a8cf763abd6bc74">sp_point_in_poly_shape</a> (</div>
<div class="line">    file      =&gt; <span class="stringliteral">&#39;c:\biodiverse\data\coastline_lamberts&#39;</span>,</div>
<div class="line">    field_val =&gt; 2,</div>
<div class="line">    point     =&gt; \@nbrcoord,</div>
<div class="line">)</div>
<div class="line"><span class="preprocessor"># Is the neighbour coord in a polygon with value 2 in the OBJECT_ID field?</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a88278224863c1f6e2a8cf763abd6bc74">sp_point_in_poly_shape</a> (</div>
<div class="line">    file      =&gt; <span class="stringliteral">&#39;c:\biodiverse\data\coastline_lamberts&#39;</span>,</div>
<div class="line">    field     =&gt; <span class="stringliteral">&#39;OBJECT_ID&#39;</span>,</div>
<div class="line">    field_val =&gt; 2,</div>
<div class="line">    point     =&gt; \@nbrcoord,</div>
<div class="line">)</div>
<div class="line">END_OF_SHP_EXAMPLES</div>
<div class="line">  ;</div>
<div class="line">    return $examples;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad0fc09d7b6650b2244b2db6ed2728146"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">private <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::_sp_side </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-_sp_side' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-_sp_side-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_sp_side-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_sp_side-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in _sp_side: 65</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ad0fc09d7b6650b2244b2db6ed2728146">_sp_side</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $axes = $args{axes};</div>
<div class="line">    <span class="keywordflow">if</span> ( defined $axes ) {</div>
<div class="line">        croak <span class="stringliteral">&quot;_sp_side:  axes arg is not an array ref\n&quot;</span></div>
<div class="line">            <span class="keywordflow">if</span> ( ref $axes ) !~ /ARRAY/;</div>
<div class="line">        my $axis_count = scalar @$axes;</div>
<div class="line">        croak</div>
<div class="line">          <span class="stringliteral">&quot;_sp_side:  axes array needs two axes, you have given $axis_count\n&quot;</span></div>
<div class="line">          <span class="keywordflow">if</span> $axis_count != 2;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $axes = [0,1];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  PadWalker gives hashrefs of scalar refs,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  so need to de-ref to get the value</span></div>
<div class="line"><span class="preprocessor"></span>    my @coord     = @{ $h-&gt;{coord_array} };</div>
<div class="line">    my @nbr_coord = @{ $h-&gt;{nbrcoord_array} };</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  coincident points are in line</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> 0 <span class="keywordflow">if</span> (</div>
<div class="line">           $nbr_coord[$axes-&gt;[1]] == $coord[$axes-&gt;[1]]</div>
<div class="line">        &amp;&amp; $nbr_coord[$axes-&gt;[0]] == $coord[$axes-&gt;[0]]</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  set the default offset as east in radians</span></div>
<div class="line"><span class="preprocessor"></span>    my $vector_angle = $args{vector_angle};</div>
<div class="line">    <span class="keywordflow">if</span> ( defined $args{vector_angle_deg} &amp;&amp; !defined $args{vector_angle} ) {</div>
<div class="line">        $vector_angle = deg2rad ( $args{vector_angle_deg} );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $vector_angle = $args{vector_angle} <span class="comment">// 0;</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  get the direction and rotate it so vector_angle is zero</span></div>
<div class="line"><span class="preprocessor"></span>    my $dir = atan2 (</div>
<div class="line">        $nbr_coord[$axes-&gt;[1]] - $coord[$axes-&gt;[1]],</div>
<div class="line">        $nbr_coord[$axes-&gt;[0]] - $coord[$axes-&gt;[0]],</div>
<div class="line">    )</div>
<div class="line">    - $vector_angle;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  Do we need to do this?  Must modify checks below if removed.</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ($dir &lt; 0) {</div>
<div class="line">        $dir += Math::Trig::pi2;</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  Is to the left of the input vector if $dir is &lt; PI,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  to the right if PI &lt; $dir &lt; 2PI,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  otherwise it is in line</span></div>
<div class="line"><span class="preprocessor"></span>    my $test = 0;</div>
<div class="line">    <span class="keywordflow">if</span> ($dir &gt; 0 &amp;&amp; $dir &lt; pi) {</div>
<div class="line">        $test = -1;</div>
<div class="line">    }</div>
<div class="line">    elsif ($dir &gt; pi &amp;&amp; $dir &lt; Math::Trig::pi2) {</div>
<div class="line">        $test = 1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> $test;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2d6a144a786ebc0f6aea22cfc23a124a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::build_rtree_for_shapepolys </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-build_rtree_for_shapepolys' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-build_rtree_for_shapepolys-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-build_rtree_for_shapepolys-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-build_rtree_for_shapepolys-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in build_rtree_for_shapepolys: 15</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a2d6a144a786ebc0f6aea22cfc23a124a">build_rtree_for_shapepolys</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $shapes = $args{shapes};</div>
<div class="line"></div>
<div class="line">    my $rtree = Tree::R-&gt;new();</div>
<div class="line">    <span class="keywordflow">foreach</span> my $shape (@$shapes) {</div>
<div class="line">        my @bbox = ($shape-&gt;x_min, $shape-&gt;y_min, $shape-&gt;x_max, $shape-&gt;y_max);</div>
<div class="line">        $rtree-&gt;insert($shape, @bbox);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $rtree;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a0357fae21adb0b4757e6b7918abb4d8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::clear_cached_subset_nbrs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-clear_cached_subset_nbrs' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-clear_cached_subset_nbrs-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-clear_cached_subset_nbrs-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-clear_cached_subset_nbrs-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in clear_cached_subset_nbrs: 21</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a0357fae21adb0b4757e6b7918abb4d8b">clear_cached_subset_nbrs</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $clear = $self-&gt;get_param(<span class="stringliteral">&#39;SP_SELECT_SEQUENCE_CLEAR_CACHE&#39;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keywordflow">if</span> ! $clear;</div>
<div class="line">    </div>
<div class="line">    my $cache_name;</div>
<div class="line">    my $cache_pfx = <span class="stringliteral">&#39;SP_SELECT_SEQUENCE_CACHED&#39;</span>;    #  BODGE</div>
<div class="line">    </div>
<div class="line">    my %params = $self-&gt;get_params_hash;    #  find the cache name</div>
<div class="line">    <span class="keywordflow">foreach</span> my $param ( keys %params ) {</div>
<div class="line">        next <span class="keywordflow">if</span> not $param =~ /^$cache_pfx/;</div>
<div class="line">        $cache_name = $param;</div>
<div class="line">        $self-&gt;delete_param ($cache_name);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a35e7bf641c9cb5fcddf7d2bc3126d8b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::clear_conditions_code_ref </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-clear_conditions_code_ref' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-clear_conditions_code_ref-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-clear_conditions_code_ref-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-clear_conditions_code_ref-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in clear_conditions_code_ref: 5</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a35e7bf641c9cb5fcddf7d2bc3126d8b5">clear_conditions_code_ref</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"><span class="preprocessor">    #$self-&gt;{code_ref} = undef;</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a701cd924707d98cecc2d77c96d088333"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::evaluate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-evaluate' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-evaluate-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-evaluate-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-evaluate-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in evaluate: 11</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a701cd924707d98cecc2d77c96d088333">evaluate</a> {</div>
<div class="line">    my $self = shift <span class="comment">// croak &quot;\$self is undefined&quot;;</span></div>
<div class="line">    my %args = (</div>
<div class="line">        calc_distances =&gt; $self-&gt;get_param(<span class="stringliteral">&#39;CALC_DISTANCES&#39;</span>),</div>
<div class="line">        @_,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    my $code_ref = $self-&gt;get_conditions_code_ref (%args);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;$code_ref (%args);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a384420b78f634d49af385737e78bdca5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_cache_name_rtree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_cache_name_rtree' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_cache_name_rtree-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_cache_name_rtree-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_cache_name_rtree-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_cache_name_rtree: 11</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a384420b78f634d49af385737e78bdca5">get_cache_name_rtree</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    my $cache_name = join <span class="charliteral">&#39;:&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;RTREE&#39;</span>,</div>
<div class="line">        $args{file},</div>
<div class="line">        ($args{field} || $NULL_STRING),</div>
<div class="line">        (defined $args{field_val} ? $args{field_val} : $NULL_STRING);</div>
<div class="line">    <span class="keywordflow">return</span> $cache_name;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a51e1aa4082c4a85e17b2a5a1879d52cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_cache_name_sp_point_in_poly_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_cache_name_sp_point_in_poly_shape' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_cache_name_sp_point_in_poly_shape-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_cache_name_sp_point_in_poly_shape-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_cache_name_sp_point_in_poly_shape-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_cache_name_sp_point_in_poly_shape: 11</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a51e1aa4082c4a85e17b2a5a1879d52cb">get_cache_name_sp_point_in_poly_shape</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    my $cache_name = join <span class="charliteral">&#39;:&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;sp_point_in_poly_shape&#39;</span>,</div>
<div class="line">        $args{file},</div>
<div class="line">        ($args{field_name} || $NULL_STRING),</div>
<div class="line">        (defined $args{field_val} ? $args{field_val} : $NULL_STRING);</div>
<div class="line">    <span class="keywordflow">return</span> $cache_name;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a5866868abbebd9cc63f2fb519f458f59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_cache_name_sp_points_in_same_poly_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_cache_name_sp_points_in_same_poly_shape' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_cache_name_sp_points_in_same_poly_shape-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_cache_name_sp_points_in_same_poly_shape-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_cache_name_sp_points_in_same_poly_shape-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_cache_name_sp_points_in_same_poly_shape: 9</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a5866868abbebd9cc63f2fb519f458f59">get_cache_name_sp_points_in_same_poly_shape</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    my $cache_name = join <span class="charliteral">&#39;:&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;sp_points_in_same_poly_shape&#39;</span>,</div>
<div class="line">        $args{file};</div>
<div class="line">    <span class="keywordflow">return</span> $cache_name;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a0c7921bc29310575d2a8e680387bcdb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_cache_points_in_shapepoly </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_cache_points_in_shapepoly' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_cache_points_in_shapepoly-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_cache_points_in_shapepoly-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_cache_points_in_shapepoly-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_cache_points_in_shapepoly: 13</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a0c7921bc29310575d2a8e680387bcdb7">get_cache_points_in_shapepoly</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $cache_name = <span class="stringliteral">&#39;cache_&#39;</span> . $args{file};</div>
<div class="line">    my $cache = $self-&gt;get_cached_value($cache_name);</div>
<div class="line">    <span class="keywordflow">if</span> (!$cache) {</div>
<div class="line">        $cache = {};</div>
<div class="line">        $self-&gt;set_cached_value($cache_name =&gt; $cache);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> $cache;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="add7290474ccbde15ec5e94a52f854851"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_cache_sp_point_in_poly_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_cache_sp_point_in_poly_shape' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_cache_sp_point_in_poly_shape-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_cache_sp_point_in_poly_shape-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_cache_sp_point_in_poly_shape-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_cache_sp_point_in_poly_shape: 12</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#add7290474ccbde15ec5e94a52f854851">get_cache_sp_point_in_poly_shape</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    my $cache_name = $self-&gt;get_cache_name_sp_point_in_poly_shape(%args);</div>
<div class="line">    my $cache = $self-&gt;get_cached_value($cache_name);</div>
<div class="line">    <span class="keywordflow">if</span> (!$cache) {</div>
<div class="line">        $cache = {};</div>
<div class="line">        $self-&gt;set_cached_value($cache_name =&gt; $cache);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> $cache;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a23e290138605de9b18c83b30f2569704"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_cache_sp_points_in_same_poly_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_cache_sp_points_in_same_poly_shape' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_cache_sp_points_in_same_poly_shape-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_cache_sp_points_in_same_poly_shape-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_cache_sp_points_in_same_poly_shape-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_cache_sp_points_in_same_poly_shape: 12</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a23e290138605de9b18c83b30f2569704">get_cache_sp_points_in_same_poly_shape</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    my $cache_name = $self-&gt;get_cache_name_sp_points_in_same_poly_shape(%args);</div>
<div class="line">    my $cache = $self-&gt;get_cached_value($cache_name);</div>
<div class="line">    <span class="keywordflow">if</span> (!$cache) {</div>
<div class="line">        $cache = {};</div>
<div class="line">        $self-&gt;set_cached_value($cache_name =&gt; $cache);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> $cache;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad48684994640814f0d88a83b2ce5b882"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_cached_subset_nbrs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_cached_subset_nbrs' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_cached_subset_nbrs-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_cached_subset_nbrs-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_cached_subset_nbrs-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_cached_subset_nbrs: 26</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ad48684994640814f0d88a83b2ce5b882">get_cached_subset_nbrs</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  this sub only works for simple cases</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span></div>
<div class="line">        <span class="keywordflow">if</span> $self-&gt;get_result_type ne <span class="stringliteral">&#39;subset&#39;</span>;</div>
<div class="line"></div>
<div class="line">    my $cache_name;</div>
<div class="line">    my $cache_pfx = $self-&gt;get_param(<span class="stringliteral">&#39;NBR_CACHE_PFX&#39;</span>);</div>
<div class="line"><span class="preprocessor">    #&#39;SP_SELECT_SEQUENCE_CACHED_NBRS&#39;;    #  BODGE</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my %params = $self-&gt;get_params_hash;    #  find the cache name</div>
<div class="line">    <span class="keywordflow">foreach</span> my $param ( keys %params ) {</div>
<div class="line">        next <span class="keywordflow">if</span> not $param =~ /^$cache_pfx/;</div>
<div class="line">        $cache_name = $param;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keywordflow">if</span> not defined $cache_name;</div>
<div class="line"></div>
<div class="line">    my $cache     = $self-&gt;get_param($cache_name);</div>
<div class="line">    my $sub_cache = $cache-&gt;{ $args{coord_id} };</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %$sub_cache : $sub_cache;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a844ccd79f1a6d26835534845ce069c57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_comparator_for_text_matching </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_comparator_for_text_matching' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_comparator_for_text_matching-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_comparator_for_text_matching-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_comparator_for_text_matching-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_comparator_for_text_matching: 39</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a844ccd79f1a6d26835534845ce069c57">get_comparator_for_text_matching</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $type = $args{type};</div>
<div class="line">    $type ||= eval {$self-&gt;is_def_query()} ? <span class="stringliteral">&#39;proc&#39;</span> : <span class="stringliteral">&#39;nbr&#39;</span>;</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $axis = $args{axis};</div>
<div class="line">    my $compcoord;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (defined $axis) { #  check against one axis</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $type eq <span class="stringliteral">&#39;proc&#39;</span> ) {</div>
<div class="line">            $compcoord = $h-&gt;{coord_array};</div>
<div class="line">        }</div>
<div class="line">        elsif ( $type eq <span class="stringliteral">&#39;nbr&#39;</span> ) {</div>
<div class="line">            $compcoord = $h-&gt;{nbrcoord_array};</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        croak (<span class="stringliteral">&quot;axis argument $args{axis} beyond array bounds, comparing with &quot;</span></div>
<div class="line">            . join (q{ }, @$compcoord)</div>
<div class="line">            )</div>
<div class="line">          if abs ($axis) &gt; $<span class="preprocessor">#$compcoord;</span></div>
<div class="line"><span class="preprocessor"></span>    </div>
<div class="line">        <span class="keywordflow">return</span> $compcoord-&gt;[ $axis ];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( $type eq <span class="stringliteral">&#39;proc&#39;</span> ) {</div>
<div class="line">        $compcoord = $h-&gt;{coord_id1};</div>
<div class="line">    }</div>
<div class="line">    elsif ( $type eq <span class="stringliteral">&#39;nbr&#39;</span> ) {</div>
<div class="line">        $compcoord = $h-&gt;{coord_id2};</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $compcoord;  #  deref scalar reference</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a89b9defc360d865f12953d49c86fb55c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_conditions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_conditions' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_conditions-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_conditions-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_conditions-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_conditions: 11</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a89b9defc360d865f12953d49c86fb55c">get_conditions</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  don&#39;t want to see the $self etc that parsing inserts</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> $self-&gt;get_param(<span class="stringliteral">&#39;CONDITIONS&#39;</span>)</div>
<div class="line">        <span class="keywordflow">if</span> $args{unparsed};</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;get_param(<span class="stringliteral">&#39;PARSED_CONDITIONS&#39;</span>)</div>
<div class="line">        || $self-&gt;get_param(<span class="stringliteral">&#39;CONDITIONS&#39;</span>);  #  THIS NEEDS TO CHANGE</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2fcca908774721d4bc52d49848d6eff4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_conditions_code_ref </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_conditions_code_ref' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_conditions_code_ref-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_conditions_code_ref-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_conditions_code_ref-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_conditions_code_ref: 8</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a2fcca908774721d4bc52d49848d6eff4">get_conditions_code_ref</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my $code_ref = $self-&gt;get_cached_value (<span class="stringliteral">&#39;CODE_REF&#39;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $code_ref <span class="keywordflow">if</span> defined $code_ref &amp;&amp; reftype ($code_ref) eq &#39;CODE&#39;;  <span class="preprocessor">#  need to check for valid code?</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my $conditions_code = &lt;&lt;<span class="stringliteral">&#39;END_OF_CONDITIONS_CODE&#39;</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="af0081b17c5428da27bdd8d95c04921d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_conditions_parsed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_conditions_parsed' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_conditions_parsed-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_conditions_parsed-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_conditions_parsed-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_conditions_parsed: 8</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#af0081b17c5428da27bdd8d95c04921d6">get_conditions_parsed</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my $conditions = $self-&gt;get_param(<span class="stringliteral">&#39;PARSED_CONDITIONS&#39;</span>);</div>
<div class="line">    croak <span class="stringliteral">&quot;Conditions have not been parsed\n&quot;</span> <span class="keywordflow">if</span> !defined $conditions;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $conditions;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a39b7332afe9ec928e9b4ac06586c148e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_conditions_unparsed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_conditions_unparsed' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_conditions_unparsed-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_conditions_unparsed-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_conditions_unparsed-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_conditions_unparsed: 5</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a39b7332afe9ec928e9b4ac06586c148e">get_conditions_unparsed</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;get_conditions( @_, unparsed =&gt; 1 );</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a835ea09410b59c8739421c259e9fc46f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_distances </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_distances' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_distances-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_distances-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_distances-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_distances: 120</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a835ea09410b59c8739421c259e9fc46f">get_distances</a> {</div>
<div class="line"></div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    croak <span class="stringliteral">&quot;coord_array1 argument not specified\n&quot;</span></div>
<div class="line">        <span class="keywordflow">if</span> !defined $args{coord_array1};</div>
<div class="line">    croak <span class="stringliteral">&quot;coord_array2 argument not specified\n&quot;</span></div>
<div class="line">        <span class="keywordflow">if</span> !defined $args{coord_array2};</div>
<div class="line"></div>
<div class="line">    my @element1 = @{ $args{coord_array1} };</div>
<div class="line">    my @element2 = @{ $args{coord_array2} };</div>
<div class="line"></div>
<div class="line">    my @cellsize;</div>
<div class="line">    my $cellsizes = $args{cellsizes};</div>
<div class="line">    <span class="keywordflow">if</span> ( ( ref $cellsizes ) =~ /ARRAY/ ) {</div>
<div class="line">        @cellsize = @$cellsizes;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $params = $self-&gt;get_param(<span class="stringliteral">&#39;USES&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my ( @d, $sumDsqr, @D );</div>
<div class="line">    my ( @c, $sumCsqr, @C );</div>
<div class="line">    my @iters;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if ((not $params-&gt;{use_euc_distance}) and (not $params-&gt;{use_cell_distance})) {</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> (not(   $params-&gt;{use_euc_distance}</div>
<div class="line">            or $params-&gt;{use_cell_distance} )</div>
<div class="line">        )</div>
<div class="line">    {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # don&#39;t need all dists, so only calculate the distances we need,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        # as determined when parsing the spatial params</span></div>
<div class="line"><span class="preprocessor"></span>        my %all_distances = (</div>
<div class="line">            %{ $params-&gt;{use_euc_distances} },</div>
<div class="line">            %{ $params-&gt;{use_abs_euc_distances} },</div>
<div class="line">            %{ $params-&gt;{use_cell_distances} },</div>
<div class="line">            %{ $params-&gt;{use_abs_cell_distances} },</div>
<div class="line">        );</div>
<div class="line">        @iters = keys %all_distances;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        @iters = ( 0 .. $#element1 );    #  <a class="code" href="classBiodiverse_1_1SpatialParams.html#a701cd924707d98cecc2d77c96d088333">evaluate</a> all the coords</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (@iters) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #no warnings qw /numeric/;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #  die on numeric errors</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #use warnings FATAL =&gt; qw { numeric };</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        my $coord1 = $element1[$i];</div>
<div class="line">        croak</div>
<div class="line">            <span class="stringliteral">&#39;coord1 value is not numeric (if you think it is numeric then check your locale): &#39;</span></div>
<div class="line">            . ( defined $coord1 ? $coord1 : <span class="stringliteral">&#39;undef&#39;</span> )</div>
<div class="line">            . <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">            <span class="keywordflow">if</span> !looks_like_number($coord1);</div>
<div class="line"></div>
<div class="line">        my $coord2 = $element2[$i];</div>
<div class="line">        croak</div>
<div class="line">            <span class="stringliteral">&#39;coord2 value is not numeric (if you think it is numeric then check your locale): &#39;</span></div>
<div class="line">            . ( defined $coord2 ? $coord2 : <span class="stringliteral">&#39;undef&#39;</span> )</div>
<div class="line">            . <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">            <span class="keywordflow">if</span> !looks_like_number($coord2);</div>
<div class="line"></div>
<div class="line">        $d[$i] =</div>
<div class="line">            eval { $coord2 - $coord1 }; #  trap errors from non-numeric coords</div>
<div class="line"></div>
<div class="line">        $D[$i] = abs $d[$i];</div>
<div class="line">        $sumDsqr += $d[$i]**2;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  won&#39;t need these most of the time</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> ( $params-&gt;{use_cell_distance}</div>
<div class="line">            or scalar keys %{ $params-&gt;{use_cell_distances} } )</div>
<div class="line">        {</div>
<div class="line"></div>
<div class="line">            croak <span class="stringliteral">&quot;Cannot use cell distances with cellsize of $cellsize[$i]\n&quot;</span></div>
<div class="line">                <span class="keywordflow">if</span> $cellsize[$i] &lt;= 0;</div>
<div class="line"></div>
<div class="line">            $c[$i] = eval { $d[$i] / $cellsize[$i] };</div>
<div class="line">            $C[$i] = eval { abs $c[$i] };</div>
<div class="line">            $sumCsqr += eval { $c[$i]**2 } || 0;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  use sprintf to avoid precision issues at 14 decimals or so</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  - a bit of a kludge, but unavoidable if using storable&#39;s clone methods.</span></div>
<div class="line"><span class="preprocessor"></span>    my $D =</div>
<div class="line">        $params-&gt;{use_euc_distance}</div>
<div class="line">        ? 0 + $self-&gt;set_precision(</div>
<div class="line">            precision =&gt; <span class="stringliteral">&#39;%.10f&#39;</span>,</div>
<div class="line">            value     =&gt; sqrt($sumDsqr),</div>
<div class="line">        )</div>
<div class="line">        : undef;</div>
<div class="line">    my $C =</div>
<div class="line">        $params-&gt;{use_cell_distance}</div>
<div class="line">        ? 0 + $self-&gt;set_precision(</div>
<div class="line">            precision =&gt; <span class="stringliteral">&#39;%.10f&#39;</span>,</div>
<div class="line">            value     =&gt; sqrt($sumCsqr),</div>
<div class="line">        )</div>
<div class="line">        : undef;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  and now trim off any extraneous zeroes after the decimal point</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  ...now handled by the 0+ on conversion</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$D += 0 if defined $D;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$C += 0 if defined $C;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my %hash = (</div>
<div class="line">        d_list =&gt; \@d,</div>
<div class="line">        D_list =&gt; \@D,</div>
<div class="line">        D      =&gt; $D,</div>
<div class="line">        Dsqr   =&gt; $sumDsqr,</div>
<div class="line">        C      =&gt; $C,</div>
<div class="line">        Csqr   =&gt; $sumCsqr,</div>
<div class="line">        C_list =&gt; \@C,</div>
<div class="line">        c_list =&gt; \@c,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %hash : \%hash;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a7e72bf9b5b5bb04db3e8895cf2589d10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_example_sp_get_spatial_output_list_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_example_sp_get_spatial_output_list_value' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_example_sp_get_spatial_output_list_value-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_example_sp_get_spatial_output_list_value-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_example_sp_get_spatial_output_list_value-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_example_sp_get_spatial_output_list_value: 23</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a7e72bf9b5b5bb04db3e8895cf2589d10">get_example_sp_get_spatial_output_list_value</a> {</div>
<div class="line"></div>
<div class="line">    my $ex = &lt;&lt;<span class="stringliteral">&quot;END_EXAMPLE_GSOLV&quot;</span></div>
<div class="line"><span class="preprocessor">#  get the spatial results value for the current neighbour group</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># (or processing group if used as a def query)</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#ab3a77174607719827fd0aa9f636fd114">sp_get_spatial_output_list_value</a> (</div>
<div class="line">    output  =&gt; <span class="stringliteral">&#39;sp1&#39;</span>,</div>
<div class="line">    list    =&gt; <span class="stringliteral">&#39;SPATIAL_RESULTS&#39;</span>,</div>
<div class="line">)</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#  get the spatial results value for group 128:254</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#ab3a77174607719827fd0aa9f636fd114">sp_get_spatial_output_list_value</a> (</div>
<div class="line">    output  =&gt; <span class="stringliteral">&#39;sp1&#39;</span>,</div>
<div class="line">    element =&gt; <span class="stringliteral">&#39;128:254&#39;</span>,</div>
<div class="line">    list    =&gt; <span class="stringliteral">&#39;SPATIAL_RESULTS&#39;</span>,</div>
<div class="line">)</div>
<div class="line">END_EXAMPLE_GSOLV</div>
<div class="line">  ;</div>
<div class="line"></div>
<div class="line">    return $ex;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a47aaadc61d16f6cf5d732687a570be95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_index_max_dist </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_index_max_dist' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_index_max_dist-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_index_max_dist-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_index_max_dist-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_index_max_dist: 8</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a47aaadc61d16f6cf5d732687a570be95">get_index_max_dist</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;get_param(<span class="stringliteral">&#39;INDEX_MAX_DIST&#39;</span>);</div>
<div class="line"><span class="preprocessor">    #  should put some checks in here?</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  or restructure the get_result_type to find both at once</span></div>
<div class="line"><span class="preprocessor">}</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a57df12fec08b1c15892357423f78c70a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_invalid_args_for_sub_call </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_invalid_args_for_sub_call' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_invalid_args_for_sub_call-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_invalid_args_for_sub_call-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_invalid_args_for_sub_call-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_invalid_args_for_sub_call: 17</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a57df12fec08b1c15892357423f78c70a">get_invalid_args_for_sub_call</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %called_args_hash = %{$args{args}};</div>
<div class="line"></div>
<div class="line">    my %metadata = $self-&gt;get_args (sub =&gt; $args{sub});</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $key (qw /required_args optional_args/) {</div>
<div class="line">        my $list = $metadata{$key} || [];</div>
<div class="line">        <span class="keyword">delete</span> @called_args_hash{@$list};</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my @invalid = sort keys %called_args_hash;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? @invalid : \@invalid;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ab4857201a6c16ad526d0ea2ff1db3c85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_annulus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_annulus' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_annulus-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_annulus-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_annulus-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_annulus: 25</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ab4857201a6c16ad526d0ea2ff1db3c85">get_metadata_sp_annulus</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt;</div>
<div class="line">            <span class="stringliteral">&quot;An annulus.  Assessed against all dimensions by default\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&quot;but use the optional \&quot;axes =&gt; []\&quot; arg to specify a subset.\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&#39;Uses group (map) distances.&#39;</span>,</div>
<div class="line">        use_euc_distances =&gt; $args{axes},</div>
<div class="line"><span class="preprocessor">            #  don&#39;t need $D if we&#39;re using a subset</span></div>
<div class="line"><span class="preprocessor"></span>        use_euc_distance  =&gt; $args{axes} ? undef : 1,    </div>
<div class="line"><span class="preprocessor">            #  flag index dist if easy to determine</span></div>
<div class="line"><span class="preprocessor"></span>        index_max_dist =&gt; $args{outer_radius},</div>
<div class="line">        required_args      =&gt; [ <span class="stringliteral">&#39;inner_radius&#39;</span>, <span class="stringliteral">&#39;outer_radius&#39;</span> ],</div>
<div class="line">        optional_args      =&gt; [qw /axes/],</div>
<div class="line">        result_type        =&gt; <span class="stringliteral">&#39;circle&#39;</span>,</div>
<div class="line">        example            =&gt; <span class="stringliteral">&quot;#  an annulus assessed against all axes\n&quot;</span></div>
<div class="line">            . qq{<a class="code" href="classBiodiverse_1_1SpatialParams.html#ad5c8bde3c87a8eb113ac6f9bef1ec452">sp_annulus</a> (inner_radius =&gt; 2000000, outer_radius =&gt; 4000000)\n}</div>
<div class="line">            . <span class="stringliteral">&quot;#  an annulus assessed against axes 0 and 1\n&quot;</span></div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#ad5c8bde3c87a8eb113ac6f9bef1ec452">sp_annulus</a> (inner_radius =&gt; 2000000, outer_radius =&gt; 4000000, axes =&gt; [0,1])},</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="af1498bc106fee924452cd155822128b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_block' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_block-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_block-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_block-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_block: 23</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#af1498bc106fee924452cd155822128b0">get_metadata_sp_block</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt;</div>
<div class="line">            <span class="stringliteral">&#39;A non-overlapping block.  Set an axis to undef to ignore it.&#39;</span>,</div>
<div class="line">        index_max_dist =&gt;</div>
<div class="line">            ( looks_like_number $args{size} ? $args{size} : undef ),</div>
<div class="line">        required_args =&gt; [<span class="stringliteral">&#39;size&#39;</span>],</div>
<div class="line">        optional_args =&gt; [<span class="stringliteral">&#39;origin&#39;</span>],</div>
<div class="line">        result_type   =&gt; <span class="stringliteral">&#39;non_overlapping&#39;</span></div>
<div class="line">        , #  we can recycle results <span class="keywordflow">for</span> <span class="keyword">this</span> (but it must contain the processing group)</div>
<div class="line"><span class="preprocessor">          #  need to add optionals for origin and axes_to_use</span></div>
<div class="line"><span class="preprocessor"></span>        example =&gt; <span class="stringliteral">&quot;sp_block (size =&gt; 3)\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&#39;sp_block (size =&gt; [3,undef,5]) #  rectangular block, ignores second axis&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#  non-overlapping block, cube or hypercube</span></div>
<div class="line"><span class="preprocessor">#  should drop the guts into another sub so we can call it with cell based args</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a4062e4a920a2096f499ed6451a2d18b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_circle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_circle' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_circle-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_circle-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_circle-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_circle: 23</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a4062e4a920a2096f499ed6451a2d18b7">get_metadata_sp_circle</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt;</div>
<div class="line">            <span class="stringliteral">&quot;A circle.  Assessed against all dimensions by default (more properly called a hypersphere)\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&quot;but use the optional \&quot;axes =&gt; []\&quot; arg to specify a subset.\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&#39;Uses group (map) distances.&#39;</span>,</div>
<div class="line">        use_euc_distances =&gt; $args{axes},</div>
<div class="line">        use_euc_distance  =&gt; $args{axes}</div>
<div class="line">        ? undef</div>
<div class="line">        : 1,    #  don<span class="stringliteral">&#39;t need $D if we&#39;</span>re <span class="keyword">using</span> a subset</div>
<div class="line"><span class="preprocessor">                #  flag index dist if easy to determine</span></div>
<div class="line"><span class="preprocessor"></span>        index_max_dist =&gt;</div>
<div class="line">            ( looks_like_number $args{radius} ? $args{radius} : undef ),</div>
<div class="line">        required_args =&gt; [<span class="stringliteral">&#39;radius&#39;</span>],</div>
<div class="line">        optional_args =&gt; [qw /axes/],</div>
<div class="line">        result_type   =&gt; <span class="stringliteral">&#39;circle&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a82f818f7f2287f70379ff0a06afc90b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_circle_cell </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_circle_cell' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_circle_cell-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_circle_cell-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_circle_cell-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_circle_cell: 20</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a82f818f7f2287f70379ff0a06afc90b4">get_metadata_sp_circle_cell</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt;</div>
<div class="line">            <span class="stringliteral">&quot;A circle.  Assessed against all dimensions by default (more properly called a hypersphere)\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&quot;but use the optional \&quot;axes =&gt; []\&quot; arg to specify a subset.\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&#39;Uses cell distances.&#39;</span>,</div>
<div class="line">        use_cell_distances =&gt; $args{axes},</div>
<div class="line">        use_cell_distance  =&gt; $args{axes}</div>
<div class="line">                            ? undef</div>
<div class="line">                            : 1,    #  don<span class="stringliteral">&#39;t need $C if we&#39;</span>re <span class="keyword">using</span> a subset</div>
<div class="line">        required_args =&gt; [<span class="stringliteral">&#39;radius&#39;</span>],</div>
<div class="line">        result_type   =&gt; <span class="stringliteral">&#39;circle&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a5d98fafe7ac5189ee1b72e3a4fe8db7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_ellipse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_ellipse' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_ellipse-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_ellipse-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_ellipse-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_ellipse: 40</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a5d98fafe7ac5189ee1b72e3a4fe8db7e">get_metadata_sp_ellipse</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $axes = $args{axes};</div>
<div class="line">    <span class="keywordflow">if</span> ( ( ref $axes ) !~ /ARRAY/ ) {</div>
<div class="line">        $axes = [ 0, 1 ];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $description =</div>
<div class="line">        q{A two dimensional ellipse.  Use the <span class="stringliteral">&#39;axes&#39;</span> argument to control }</div>
<div class="line">      . q{which are used (<span class="keywordflow">default</span> is [0,1]).  The <span class="keywordflow">default</span> rotate_angle is pi/2.};</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt; $description,</div>
<div class="line">        use_euc_distances =&gt; $axes,</div>
<div class="line">        use_euc_distance  =&gt; $axes ? undef : 1,</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  flag the index dist if easy to determine</span></div>
<div class="line"><span class="preprocessor"></span>        index_max_dist =&gt; (</div>
<div class="line">            looks_like_number $args{major_radius}</div>
<div class="line">            ? $args{major_radius}</div>
<div class="line">            : undef</div>
<div class="line">        ),</div>
<div class="line">        required_args =&gt; [qw /major_radius minor_radius/],</div>
<div class="line">        optional_args =&gt; [qw /axes rotate_angle rotate_angle_deg/],</div>
<div class="line">        result_type   =&gt; <span class="stringliteral">&#39;ellipse&#39;</span>,</div>
<div class="line">        example       =&gt;</div>
<div class="line">              <span class="stringliteral">&#39;# East west aligned ellipse&#39;</span></div>
<div class="line">            . <span class="stringliteral">&#39;sp_ellipse (major_radius =&gt; 300000, &#39;</span></div>
<div class="line">            . <span class="stringliteral">&#39;minor_radius =&gt; 100000, axes =&gt; [0,1], &#39;</span></div>
<div class="line">            . <span class="stringliteral">&#39;rotate_angle =&gt; 1.5714)&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#  a two dimensional ellipse -</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  it would be nice to generalise to more dimensions,</span></div>
<div class="line"><span class="preprocessor">#  but that involves getting mediaeval with matrices</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ac83e7bbecd150f4f6335c2bef69a12fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_get_spatial_output_list_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_get_spatial_output_list_value' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_get_spatial_output_list_value-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_get_spatial_output_list_value-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_get_spatial_output_list_value-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_get_spatial_output_list_value: 22</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ac83e7bbecd150f4f6335c2bef69a12fd">get_metadata_sp_get_spatial_output_list_value</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $description =</div>
<div class="line">        q{Obtain a value from a list in a previously calculated spatial output.};</div>
<div class="line"></div>
<div class="line">    my $example = $self-&gt;get_example_sp_get_spatial_output_list_value;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt; $description,</div>
<div class="line">        index_no_use   =&gt; 1,  #  turn index off since <span class="keyword">this</span> doesn<span class="stringliteral">&#39;t cooperate with the search method</span></div>
<div class="line"><span class="stringliteral">        required_args  =&gt; [qw /output index/],</span></div>
<div class="line"><span class="stringliteral">        optional_args  =&gt; [qw /list element/],</span></div>
<div class="line"><span class="stringliteral">        result_type    =&gt; &#39;</span>always_same<span class="stringliteral">&#39;,</span></div>
<div class="line"><span class="stringliteral">        example        =&gt; $example,</span></div>
<div class="line"><span class="stringliteral">    );</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    return wantarray ? %args_r : \%args_r;</span></div>
<div class="line"><span class="stringliteral">}</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">#  get the value from another spatial output</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a01556ccf12dd4434fa1d7bf308dd9a7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_group_not_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_group_not_empty' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_group_not_empty-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_group_not_empty-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_group_not_empty-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_group_not_empty: 24</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a01556ccf12dd4434fa1d7bf308dd9a7e">get_metadata_sp_group_not_empty</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %metadata = (</div>
<div class="line">        description   =&gt; <span class="stringliteral">&#39;Is an element non-empty?&#39;</span>,</div>
<div class="line">        required_args =&gt; [],</div>
<div class="line">        optional_args =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;element&#39;</span>,      #  which element to use </div>
<div class="line">        ],</div>
<div class="line">        result_type   =&gt; $NULL_STRING,</div>
<div class="line">        example       =&gt;</div>
<div class="line">              q{# Restrict calculations to those non-empty groups.}</div>
<div class="line">            . q{#  Will use the processing group <span class="keywordflow">if</span> a def query, the neighbour group otherwise.}</div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#ab94e012fdc9bf1f4e16929b279c93ffe">sp_group_not_empty</a> ()}</div>
<div class="line">            . q{# The same as above, but being specific about which group (element) to test.}</div>
<div class="line">            . q{#  This is probably best used in cases where the element to check is varied spatially.}</div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#ab94e012fdc9bf1f4e16929b279c93ffe">sp_group_not_empty</a> (element =&gt; <span class="stringliteral">&#39;5467:9876&#39;</span>)},</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %metadata : \%metadata;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a52887bc0cada4339dea8617bbaf05f4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_in_label_range </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_in_label_range' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_in_label_range-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_in_label_range-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_in_label_range-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_in_label_range: 22</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a52887bc0cada4339dea8617bbaf05f4d">get_metadata_sp_in_label_range</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %metadata = (</div>
<div class="line">        description   =&gt; <span class="stringliteral">&quot;Is a label within a group&#39;s range?&quot;</span>,</div>
<div class="line">        required_args =&gt; [<span class="stringliteral">&#39;label&#39;</span>],</div>
<div class="line">        optional_args =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;type&#39;</span>,  #  nbr or proc to control use of nbr or processing groups</div>
<div class="line">        ],</div>
<div class="line">        result_type   =&gt; <span class="stringliteral">&#39;always_same&#39;</span>,</div>
<div class="line">        index_no_use  =&gt; 1,  #  turn index off since <span class="keyword">this</span> doesn<span class="stringliteral">&#39;t cooperate with the search method</span></div>
<div class="line"><span class="stringliteral">        example       =&gt;</span></div>
<div class="line"><span class="stringliteral">              q{# Are we in the range of label called Genus:Sp1?}</span></div>
<div class="line"><span class="stringliteral">            . q{sp_in_label_range(label =&gt; &#39;</span>Genus:Sp1<span class="stringliteral">&#39;)}</span></div>
<div class="line"><span class="stringliteral">    );</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    return wantarray ? %metadata : \%metadata;</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a428dcc284fdb9b55e0c1f99abc00b08d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_in_line_with </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_in_line_with' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_in_line_with-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_in_line_with-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_in_line_with-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_in_line_with: 29</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a428dcc284fdb9b55e0c1f99abc00b08d">get_metadata_sp_in_line_with</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $axes = $args{axes};</div>
<div class="line">    <span class="keywordflow">if</span> ( ( ref $axes ) !~ /ARRAY/ ) {</div>
<div class="line">        $axes = [ 0, 1 ];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $description =</div>
<div class="line">        q{Are we in line with a vector radiating out from the processing cell? }</div>
<div class="line">      . q{Use the <span class="stringliteral">&#39;axes&#39;</span> argument to control }</div>
<div class="line">      . q{which are used (<span class="keywordflow">default</span> is [0,1])};</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt; $description,</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  flag the index dist if easy to determine</span></div>
<div class="line"><span class="preprocessor"></span>        index_max_dist =&gt; undef,</div>
<div class="line">        optional_args =&gt; [qw /axes vector_angle vector_angle_deg/],</div>
<div class="line">        result_type   =&gt; <span class="stringliteral">&#39;side&#39;</span>,</div>
<div class="line">        example       =&gt;</div>
<div class="line">              <span class="stringliteral">&#39;sp_in_line_with (vector_angle =&gt; Math::Trig::pip2) #  pi/2 = 90 degree angle&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="af122f923060540c24da96f5be70372b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_is_left_of </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_is_left_of' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_is_left_of-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_is_left_of-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_is_left_of-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_is_left_of: 29</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#af122f923060540c24da96f5be70372b6">get_metadata_sp_is_left_of</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $axes = $args{axes};</div>
<div class="line">    <span class="keywordflow">if</span> ( ( ref $axes ) !~ /ARRAY/ ) {</div>
<div class="line">        $axes = [ 0, 1 ];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $description =</div>
<div class="line">        q{Are we to the left of a vector radiating out from the processing cell? }</div>
<div class="line">      . q{Use the <span class="stringliteral">&#39;axes&#39;</span> argument to control }</div>
<div class="line">      . q{which are used (<span class="keywordflow">default</span> is [0,1])};</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt; $description,</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  flag the index dist if easy to determine</span></div>
<div class="line"><span class="preprocessor"></span>        index_max_dist =&gt; undef,</div>
<div class="line">        optional_args =&gt; [qw /axes vector_angle vector_angle_deg/],</div>
<div class="line">        result_type   =&gt; <span class="stringliteral">&#39;side&#39;</span>,</div>
<div class="line">        example       =&gt;</div>
<div class="line">              <span class="stringliteral">&#39;sp_is_left_of (vector_angle =&gt; 1.5714)&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a99d9d7130c3379edad7ae2a614faa931"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_is_right_of </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_is_right_of' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_is_right_of-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_is_right_of-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_is_right_of-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_is_right_of: 29</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a99d9d7130c3379edad7ae2a614faa931">get_metadata_sp_is_right_of</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $axes = $args{axes};</div>
<div class="line">    <span class="keywordflow">if</span> ( ( ref $axes ) !~ /ARRAY/ ) {</div>
<div class="line">        $axes = [ 0, 1 ];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $description =</div>
<div class="line">        q{Are we to the right of a vector radiating out from the processing cell? }</div>
<div class="line">      . q{Use the <span class="stringliteral">&#39;axes&#39;</span> argument to control }</div>
<div class="line">      . q{which are used (<span class="keywordflow">default</span> is [0,1])};</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt; $description,</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  flag the index dist if easy to determine</span></div>
<div class="line"><span class="preprocessor"></span>        index_max_dist =&gt; undef,</div>
<div class="line">        optional_args =&gt; [qw /axes vector_angle vector_angle_deg/],</div>
<div class="line">        result_type   =&gt; <span class="stringliteral">&#39;side&#39;</span>,</div>
<div class="line">        example       =&gt;</div>
<div class="line">              <span class="stringliteral">&#39;sp_is_right_of (vector_angle =&gt; 1.5714)&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a4659ec746b9233712e705d1ddef9f944"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_match_regex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_match_regex' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_match_regex-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_match_regex-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_match_regex-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_match_regex: 44</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a4659ec746b9233712e705d1ddef9f944">get_metadata_sp_match_regex</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my $example = &lt;&lt;<span class="stringliteral">&#39;END_RE_EXAMPLE&#39;</span></div>
<div class="line"><span class="preprocessor">#  use any neighbour where the first axis includes the text &quot;type1&quot;</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a2916b3e5c3652a081fabf8fa5691969f">sp_match_regex</a> (re =&gt; qr<span class="stringliteral">&#39;type1&#39;</span>, axis =&gt; 0, type =&gt; <span class="stringliteral">&#39;nbr&#39;</span>)</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># match only when the third neighbour axis starts with</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># the processing group&#39;s second axis</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a2916b3e5c3652a081fabf8fa5691969f">sp_match_regex</a> (re =&gt; qr/^$coord[2]/, axis =&gt; 2, type =&gt; <span class="stringliteral">&#39;nbr&#39;</span>)</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># match the whole coordinate ID (element name)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># where Biome can be 1 or 2 and the rest of the name contains &quot;dry&quot;</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a2916b3e5c3652a081fabf8fa5691969f">sp_match_regex</a> (re =&gt; qr/^Biome[12]:.+dry/)</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># Set a definition query to only use groups where the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># third axis ends in &#39;park&#39; (case insensitive)</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a2916b3e5c3652a081fabf8fa5691969f">sp_match_regex</a> (text =&gt; qr{park$}i, axis =&gt; 2, type =&gt; <span class="stringliteral">&#39;proc&#39;</span>)</div>
<div class="line"></div>
<div class="line">END_RE_EXAMPLE</div>
<div class="line">    ;</div>
<div class="line"></div>
<div class="line">    my $description = <span class="stringliteral">&#39;Select all neighbours with an axis matching &#39;</span></div>
<div class="line">        . <span class="stringliteral">&#39;a regular expresion&#39;</span>;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description        =&gt; $description,</div>
<div class="line">        index_max_dist =&gt; undef,</div>
<div class="line"></div>
<div class="line">        required_args =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;re&#39;</span>,    #  the regex</div>
<div class="line">        ],</div>
<div class="line">        optional_args =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;type&#39;</span>,  #  nbr or proc to control use of nbr or processing groups</div>
<div class="line">            <span class="stringliteral">&#39;axis&#39;</span>,  #  which axis from nbrcoord to use in the match</div>
<div class="line">        ],</div>
<div class="line">        index_no_use =&gt; 1,                   #  turn the index off</div>
<div class="line">        result_type  =&gt; <span class="stringliteral">&#39;non_overlapping&#39;</span>,</div>
<div class="line">        example      =&gt; $example,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a55e483761be631e5ef642d7af827391b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_match_text </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_match_text' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_match_text-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_match_text-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_match_text-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_match_text: 40</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a55e483761be631e5ef642d7af827391b">get_metadata_sp_match_text</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my $example =&lt;&lt;<span class="stringliteral">&#39;END_SP_MT_EX&#39;</span></div>
<div class="line"><span class="preprocessor">#  use any neighbour where the first axis has value of &quot;type1&quot;</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a7dd1d7a800c58d0f9f7f73027e68c4e5">sp_match_text</a> (text =&gt; <span class="stringliteral">&#39;type1&#39;</span>, axis =&gt; 0, type =&gt; <span class="stringliteral">&#39;nbr&#39;</span>)</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># match only when the third neighbour axis is the same</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   as the processing group&#39;s second axis</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a7dd1d7a800c58d0f9f7f73027e68c4e5">sp_match_text</a> (text =&gt; $coord[2], axis =&gt; 2, type =&gt; <span class="stringliteral">&#39;nbr&#39;</span>)</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># match where the whole coordinate ID (element name)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># is &#39;Biome1:savannah forest&#39;</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a7dd1d7a800c58d0f9f7f73027e68c4e5">sp_match_text</a> (text =&gt; <span class="stringliteral">&#39;Biome1:savannah forest&#39;</span>)</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># Set a definition query to only use groups with &#39;NK&#39; in the third axis</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#a7dd1d7a800c58d0f9f7f73027e68c4e5">sp_match_text</a> (text =&gt; <span class="stringliteral">&#39;NK&#39;</span>, axis =&gt; 2, type =&gt; <span class="stringliteral">&#39;proc&#39;</span>)</div>
<div class="line">END_SP_MT_EX</div>
<div class="line">  ;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description        =&gt; &#39;Select all neighbours matching a text <span class="keywordtype">string</span>&#39;,</div>
<div class="line">        index_max_dist =&gt; undef,</div>
<div class="line"></div>
<div class="line">        <span class="preprocessor">#required_args =&gt; [&#39;axis&#39;],</span></div>
<div class="line"><span class="preprocessor"></span>        required_args =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;text&#39;</span>,  #  the match text</div>
<div class="line">        ],</div>
<div class="line">        optional_args =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;axis&#39;</span>,  #  which axis from nbrcoord to use in the match</div>
<div class="line">            <span class="stringliteral">&#39;type&#39;</span>,  #  nbr or proc to control use of nbr or processing groups</div>
<div class="line">        ],</div>
<div class="line">        index_no_use =&gt; 1,                   #  turn the index off</div>
<div class="line">        result_type  =&gt; <span class="stringliteral">&#39;text_match_exact&#39;</span>,</div>
<div class="line">        example =&gt; $example,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="af8ce160f07c3af103e1c71dbad464151"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_point_in_poly </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_point_in_poly' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_point_in_poly-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_point_in_poly-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_point_in_poly-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_point_in_poly: 25</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#af8ce160f07c3af103e1c71dbad464151">get_metadata_sp_point_in_poly</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %metadata = (</div>
<div class="line">        description =&gt;</div>
<div class="line">            <span class="stringliteral">&#39;Select groups that occur within a user-defined polygon&#39;</span>,</div>
<div class="line">        required_args      =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;polygon&#39;</span>,           #  array of vertices, or a Math::Polygon object</div>
<div class="line">        ],</div>
<div class="line">        optional_args =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;point&#39;</span>,      #  point to use </div>
<div class="line">        ],</div>
<div class="line">        index_no_use =&gt; 1,</div>
<div class="line">        result_type  =&gt; <span class="stringliteral">&#39;always_same&#39;</span>,</div>
<div class="line">        example =&gt;</div>
<div class="line">              q{# Is the neighbour coord in a square polygon?}</div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#a16386447dd62d71855308dc41af5ad11">sp_point_in_poly</a> (polygon =&gt; [[0,0],[0,1],[1,1],[1,0],[0,0]], point =&gt; \@nbrcoord)}</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %metadata : \%metadata;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a8551712446813bb4d55871dc15657d0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_point_in_poly_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_point_in_poly_shape' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_point_in_poly_shape-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_point_in_poly_shape-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_point_in_poly_shape-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_point_in_poly_shape: 24</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a8551712446813bb4d55871dc15657d0f">get_metadata_sp_point_in_poly_shape</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    my $examples = $self-&gt;_get_shp_examples;</div>
<div class="line"></div>
<div class="line">    my %metadata = (</div>
<div class="line">        description =&gt;</div>
<div class="line">            <span class="stringliteral">&#39;Select groups that occur within a polygon or polygons extracted from a shapefile&#39;</span>,</div>
<div class="line">        required_args =&gt; [</div>
<div class="line">            qw /file/,</div>
<div class="line">        ],</div>
<div class="line">        optional_args =&gt; [</div>
<div class="line">            qw /point field_name field_val axes no_cache/,</div>
<div class="line">        ],</div>
<div class="line">        index_no_use =&gt; 1,</div>
<div class="line">        result_type  =&gt; <span class="stringliteral">&#39;always_same&#39;</span>,</div>
<div class="line">        example =&gt; $examples,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %metadata : \%metadata;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a34031c3287a7dfd5640fe454f9d060ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_points_in_same_poly_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_points_in_same_poly_shape' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_points_in_same_poly_shape-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_points_in_same_poly_shape-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_points_in_same_poly_shape-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_points_in_same_poly_shape: 24</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a34031c3287a7dfd5640fe454f9d060ff">get_metadata_sp_points_in_same_poly_shape</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $examples = <span class="stringliteral">&#39;NEED SOME EXAMPLES&#39;</span>;</div>
<div class="line"></div>
<div class="line">    my %metadata = (</div>
<div class="line">        description =&gt;</div>
<div class="line">            <span class="stringliteral">&#39;Returns true when two points are within the same shapefile polygon&#39;</span>,</div>
<div class="line">        required_args =&gt; [</div>
<div class="line">            qw /file/,</div>
<div class="line">        ],</div>
<div class="line">        optional_args =&gt; [</div>
<div class="line">            qw /point1 point2 axes no_cache/,</div>
<div class="line">        ],</div>
<div class="line">        index_no_use =&gt; 1,</div>
<div class="line">        result_type  =&gt; <span class="stringliteral">&#39;non_overlapping&#39;</span>,</div>
<div class="line">        example =&gt; $examples,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %metadata : \%metadata;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad3701a915f5ccfbe331695f7bdfc2be4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_select_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_select_all' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_select_all-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_select_all-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_select_all-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_select_all: 14</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ad3701a915f5ccfbe331695f7bdfc2be4">get_metadata_sp_select_all</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description    =&gt; <span class="stringliteral">&#39;Select all elements as neighbours&#39;</span>,</div>
<div class="line">        result_type    =&gt; <span class="stringliteral">&#39;always_true&#39;</span>,</div>
<div class="line">        example        =&gt; <span class="stringliteral">&#39;sp_select_all() #  select every group&#39;</span>,</div>
<div class="line">        index_max_dist =&gt; -1,  #  search whole index <span class="keywordflow">if</span> <span class="keyword">using</span> <span class="keyword">this</span> in a complex condition</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a4e561a08e56d5fa2d951ab9e879a904b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_select_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_select_block' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_select_block-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_select_block-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_select_block-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_select_block: 40</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a4e561a08e56d5fa2d951ab9e879a904b">get_metadata_sp_select_block</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %metadata = (</div>
<div class="line">        description =&gt;</div>
<div class="line">            <span class="stringliteral">&#39;Select a subset of all available neighbours based on a block sample sequence&#39;</span>,</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  flag index dist if easy to determine</span></div>
<div class="line"><span class="preprocessor"></span>        index_max_dist =&gt;</div>
<div class="line">            ( looks_like_number $args{size} ? $args{size} : undef ),</div>
<div class="line">        required_args      =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;size&#39;</span>,           #  size of the block</div>
<div class="line">        ],    </div>
<div class="line">        optional_args =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;count&#39;</span>,      #  how many groups per block?</div>
<div class="line">            <span class="stringliteral">&#39;use_cache&#39;</span>,      #  a <span class="keywordtype">boolean</span> flag, defaults to 1</div>
<div class="line">            <span class="stringliteral">&#39;reverse_order&#39;</span>,  #  work from the other end</div>
<div class="line">            <span class="stringliteral">&#39;random&#39;</span>,         #  randomise within blocks?</div>
<div class="line">            <span class="stringliteral">&#39;prng_seed&#39;</span>,      #  seed <span class="keywordflow">for</span> the PRNG</div>
<div class="line">        ],</div>
<div class="line">        #index_no_use =&gt; 1,          #  turn the index off</div>
<div class="line">        #result_type  =&gt; <span class="stringliteral">&#39;subset&#39;</span>,</div>
<div class="line">        #result_type  =&gt; <span class="stringliteral">&#39;non_overlapping&#39;</span>,</div>
<div class="line">        result_type  =&gt; <span class="stringliteral">&#39;complex&#39;</span>,  #  need to make it a subset, but that part needs work</div>
<div class="line">        example =&gt;</div>
<div class="line">            <span class="stringliteral">&#39;# Select up to two groups per block with each block being 5 groups &#39;</span></div>
<div class="line">            . <span class="stringliteral">&quot;on a side where the group size is 100\n&quot;</span></div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#a7914ab1786e4b588a3f655127f2e7038">sp_select_block</a> (size =&gt; 500, count =&gt; 2)}</div>
<div class="line">            . <span class="stringliteral">&quot;#  Now do it non-randomly and start from the lower right\n&quot;</span></div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#a7914ab1786e4b588a3f655127f2e7038">sp_select_block</a> (size =&gt; 500, count =&gt; 10, random =&gt; 0, reverse =&gt; 1)}</div>
<div class="line">            . <span class="stringliteral">&quot;#  Rectangular block with user specified PRNG starting seed\n&quot;</span></div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#a7914ab1786e4b588a3f655127f2e7038">sp_select_block</a> (size =&gt; [300, 500], count =&gt; 1, prng_seed =&gt; 454678)}</div>
<div class="line">            . <span class="stringliteral">&quot;# Lower memory footprint (but longer running times for neighbour searches)\n&quot;</span></div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#a7914ab1786e4b588a3f655127f2e7038">sp_select_block</a> (size =&gt; 500, count =&gt; 2, clear_cache =&gt; 1)}</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %metadata : \%metadata;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a24d2cabc6e67e8761f50213037b62813"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_select_element </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_select_element' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_select_element-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_select_element-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_select_element-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_select_element: 28</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a24d2cabc6e67e8761f50213037b62813">get_metadata_sp_select_element</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my $example =&lt;&lt;<span class="stringliteral">&#39;END_SP_SELECT_ELEMENT&#39;</span></div>
<div class="line"><span class="preprocessor"># match where the whole coordinate ID (element name)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># is &#39;Biome1:savannah forest&#39;</span></div>
<div class="line"><span class="preprocessor"></span><a class="code" href="classBiodiverse_1_1SpatialParams.html#aced4e8125084ae0d1fe15bdf5e6f7969">sp_select_element</a> (element =&gt; <span class="stringliteral">&#39;Biome1:savannah forest&#39;</span>)</div>
<div class="line">END_SP_SELECT_ELEMENT</div>
<div class="line">  ;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt; &#39;Select a specific element.  Basically the same as <a class="code" href="classBiodiverse_1_1SpatialParams.html#a7dd1d7a800c58d0f9f7f73027e68c4e5">sp_match_text</a>, but with optimisations enabled&#39;,</div>
<div class="line">        index_max_dist =&gt; undef,</div>
<div class="line"></div>
<div class="line">        required_args =&gt; [</div>
<div class="line">            &#39;element&#39;,  <span class="preprocessor">#  the element name</span></div>
<div class="line"><span class="preprocessor"></span>        ],</div>
<div class="line">        optional_args =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;type&#39;</span>,  #  nbr or proc to control use of nbr or processing groups</div>
<div class="line">        ],</div>
<div class="line">        index_no_use =&gt; 1,</div>
<div class="line">        result_type  =&gt; <span class="stringliteral">&#39;always_same&#39;</span>,</div>
<div class="line">        example =&gt; $example,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a787d68af04956d0a60ec07135c54af5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_select_sequence </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_select_sequence' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_select_sequence-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_select_sequence-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_select_sequence-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_select_sequence: 32</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a787d68af04956d0a60ec07135c54af5e">get_metadata_sp_select_sequence</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt;</div>
<div class="line">            <span class="stringliteral">&#39;Select a subset of all available neighbours based on a sample sequence &#39;</span></div>
<div class="line">            . <span class="stringliteral">&#39;(note that groups are sorted south-west to north-east)&#39;</span>,</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  flag index dist if easy to determine</span></div>
<div class="line"><span class="preprocessor"></span>        index_max_dist =&gt; undef,</div>
<div class="line">        required_args      =&gt; [qw /frequency/]</div>
<div class="line">        ,    #  frequency is how many groups apart they should be</div>
<div class="line">        optional_args =&gt; [</div>
<div class="line">            <span class="stringliteral">&#39;first_offset&#39;</span>,     #  the first offset, defaults to 0</div>
<div class="line">            <span class="stringliteral">&#39;use_cache&#39;</span>,        #  a <span class="keywordtype">boolean</span> flag, defaults to 1</div>
<div class="line">            <span class="stringliteral">&#39;reverse_order&#39;</span>,    #  work from the other end</div>
<div class="line">            <span class="stringliteral">&#39;cycle_offset&#39;</span>,</div>
<div class="line">        ],</div>
<div class="line">        index_no_use =&gt; 1,          #  turn the index off</div>
<div class="line">        result_type  =&gt; <span class="stringliteral">&#39;subset&#39;</span>,</div>
<div class="line">        example =&gt;</div>
<div class="line">            <span class="stringliteral">&quot;# Select every tenth group (groups are sorted alphabetically)\n&quot;</span></div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#a1e1588a1dc3a718ade5b743e3111fdef">sp_select_sequence</a> (frequency =&gt; 10)}</div>
<div class="line">            . <span class="stringliteral">&quot;#  Select every tenth group, starting from the third\n&quot;</span></div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#a1e1588a1dc3a718ade5b743e3111fdef">sp_select_sequence</a> (frequency =&gt; 10, first_offset =&gt; 2)}</div>
<div class="line">            . <span class="stringliteral">&quot;#  Select every tenth group, starting from the third last and working backwards\n&quot;</span></div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#a1e1588a1dc3a718ade5b743e3111fdef">sp_select_sequence</a> (frequency =&gt; 10, first_offset =&gt; 2, reverse_order =&gt; 1)},</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="abf796c3bdb189f0bfa7efa4857594325"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_self_only </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_self_only' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_self_only-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_self_only-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_self_only-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_self_only: 13</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#abf796c3bdb189f0bfa7efa4857594325">get_metadata_sp_self_only</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description    =&gt; <span class="stringliteral">&#39;Select only the processing group&#39;</span>,</div>
<div class="line">        result_type    =&gt; <span class="stringliteral">&#39;self_only&#39;</span>,</div>
<div class="line">        index_max_dist =&gt; 0,    #  search only <span class="keyword">self</span> <span class="keywordflow">if</span> <span class="keyword">using</span> index</div>
<div class="line">        example        =&gt; <span class="stringliteral">&#39;sp_self_only() #  only use the proceessing cell&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a85080d0055a43f3537e5d95f357fda96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_square </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_square' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_square-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_square-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_square-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_square: 26</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a85080d0055a43f3537e5d95f357fda96">get_metadata_sp_square</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt;</div>
<div class="line">            <span class="stringliteral">&quot;An overlapping square assessed against all dimensions (more properly called a hypercube).\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&#39;Uses group (map) distances.&#39;</span>,</div>
<div class="line">        use_euc_distance =&gt; 1,    #  need all the distances</div>
<div class="line"><span class="preprocessor">                                  #  flag index dist if easy to determine</span></div>
<div class="line"><span class="preprocessor"></span>        index_max_dist =&gt;</div>
<div class="line">            ( looks_like_number $args{size} ? $args{size} : undef ),</div>
<div class="line">        required_args =&gt; [<span class="stringliteral">&#39;size&#39;</span>],</div>
<div class="line">        result_type   =&gt; <span class="stringliteral">&#39;square&#39;</span>,</div>
<div class="line">        example =&gt;</div>
<div class="line">            q{#  an overlapping square, cube or hypercube depending on the number of axes}</div>
<div class="line">            . q{#    note - you cannot yet specify which axes to use }</div>
<div class="line">            . q{#    so it will be square on all sides}</div>
<div class="line">            . q{<a class="code" href="classBiodiverse_1_1SpatialParams.html#a5535d7a8ddae1bf27d892d1bcfc209c7">sp_square</a> (size =&gt; 300000)},</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#  sub to run a square (or hypercube for n-dimensions)</span></div>
<div class="line"><span class="preprocessor">#  should allow control over which axes to use</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a77199baf145a433c91f295afd8a61149"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_metadata_sp_square_cell </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_metadata_sp_square_cell' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_metadata_sp_square_cell-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_metadata_sp_square_cell-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_metadata_sp_square_cell-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_metadata_sp_square_cell: 20</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a77199baf145a433c91f295afd8a61149">get_metadata_sp_square_cell</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $description =</div>
<div class="line">      <span class="stringliteral">&#39;A square assessed against all dimensions &#39;</span></div>
<div class="line">      . <span class="stringliteral">&quot;(more properly called a hypercube).\n&quot;</span></div>
<div class="line">      . q{Uses <span class="stringliteral">&#39;cell&#39;</span> distances.};</div>
<div class="line"></div>
<div class="line">    my %args_r = (</div>
<div class="line">        description =&gt; $description,</div>
<div class="line">        use_cell_distance =&gt; 1,    #  need all the distances</div>
<div class="line">        required_args =&gt; [<span class="stringliteral">&#39;size&#39;</span>],</div>
<div class="line">        result_type   =&gt; <span class="stringliteral">&#39;square&#39;</span>,</div>
<div class="line">        example       =&gt; <span class="stringliteral">&#39;sp_square_cell (size =&gt; 3)&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %args_r : \%args_r;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aa08aa09c3a900758017af40a82316268"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_polygons_from_shapefile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_polygons_from_shapefile' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_polygons_from_shapefile-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_polygons_from_shapefile-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_polygons_from_shapefile-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_polygons_from_shapefile: 57</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#aa08aa09c3a900758017af40a82316268">get_polygons_from_shapefile</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $file = $args{file};</div>
<div class="line">    $file =~ s/\.(shp|shx|dbf)$<span class="comment">//;</span></div>
<div class="line"></div>
<div class="line">    my $field = $args{field_name};</div>
<div class="line"></div>
<div class="line">    my $field_val = $args{field_val};</div>
<div class="line"></div>
<div class="line">    my $cache_name = join <span class="charliteral">&#39;:&#39;</span>, <span class="stringliteral">&#39;SHAPEPOLYS&#39;</span>, $file, ($field || $NULL_STRING), (defined $field_val ? $field_val : $NULL_STRING);</div>
<div class="line">    my $cached     = $self-&gt;get_cached_value($cache_name);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> (wantarray ? @$cached : $cached) <span class="keywordflow">if</span> $cached;</div>
<div class="line"></div>
<div class="line">    my $shapefile = Geo::ShapeFile-&gt;new($file);</div>
<div class="line"></div>
<div class="line">    my @shapes;</div>
<div class="line">    <span class="keywordflow">if</span> ((!defined $field || $field eq <span class="stringliteral">&#39;FID&#39;</span>) &amp;&amp; defined $field_val) {</div>
<div class="line">        my $shape = $shapefile-&gt;get_shp_record($field_val);</div>
<div class="line">        push @shapes, $shape;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        my $progress_bar = <a class="code" href="classBiodiverse_1_1Progress.html">Biodiverse::Progress</a>-&gt;<a class="code" href="classBiodiverse_1_1Progress.html#a88f4cef6f66986952a850fb70a2b62d8">new</a>(gui_only =&gt; 1);</div>
<div class="line">        my $n_shapes = $shapefile-&gt;shapes();</div>
<div class="line"></div>
<div class="line">        REC:</div>
<div class="line">        <span class="keywordflow">for</span> my $rec (1 .. $n_shapes) {  #  brute force search</div>
<div class="line"></div>
<div class="line">            $progress_bar-&gt;update(</div>
<div class="line">                <span class="stringliteral">&quot;Processing $file\n&quot;</span> .</div>
<div class="line">                <span class="stringliteral">&quot;Shape $rec of $n_shapes\n&quot;</span>,</div>
<div class="line">                $rec / $n_shapes,</div>
<div class="line">            );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  get the lot</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> ((!defined $field || $field eq <span class="stringliteral">&#39;FID&#39;</span>) &amp;&amp; !defined $field_val) {</div>
<div class="line">                push @shapes, $shapefile-&gt;get_shp_record($rec);</div>
<div class="line">                next REC;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  get all that satisfy the condition</span></div>
<div class="line"><span class="preprocessor"></span>            my %db = $shapefile-&gt;get_dbf_record($rec);</div>
<div class="line">            my $is_num = looks_like_number ($db{$field});</div>
<div class="line">            <span class="keywordflow">if</span> ($is_num ? $field_val == $db{$field} : $field_val eq $db{$field}) {</div>
<div class="line">                push @shapes, $shapefile-&gt;get_shp_record($rec);</div>
<div class="line"><span class="preprocessor">                #last REC;</span></div>
<div class="line"><span class="preprocessor"></span>            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $self-&gt;set_cached_value($cache_name =&gt; \@shapes);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? @shapes : \@shapes;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ae6bc374a3bf8b76cade82d9ea8a4637f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_result_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_result_type' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_result_type-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_result_type-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_result_type-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_result_type: 83</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ae6bc374a3bf8b76cade82d9ea8a4637f">get_result_type</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $type = $self-&gt;get_param(<span class="stringliteral">&#39;RESULT_TYPE&#39;</span>);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  must contain some non-whitespace</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ( defined $type and length $type and $type =~ /\S/ ) {</div>
<div class="line">        <span class="keywordflow">return</span> $type;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $condition = $self-&gt;get_conditions;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  Check if always true</span></div>
<div class="line"><span class="preprocessor"></span>    my $check = looks_like_number($condition)</div>
<div class="line">        and $condition    <span class="preprocessor">#  a non-zero number</span></div>
<div class="line"><span class="preprocessor"></span>        or $condition =~ /^\$[DC]\s*&gt;=\s*0$/    #  $D&gt;=0, $C&gt;=0</div>
<div class="line">        ;</div>
<div class="line">    <span class="keywordflow">if</span> ($check) {</div>
<div class="line">        $self-&gt;set_param( <span class="stringliteral">&#39;RESULT_TYPE&#39;</span> =&gt; <span class="stringliteral">&#39;always_true&#39;</span> );</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&#39;always_true&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  check if always false</span></div>
<div class="line"><span class="preprocessor"></span>    $check = $condition =~ /^0*$/               #  one or more zeros</div>
<div class="line">        or $condition =~ /^\$[DC]\s*&lt;\s*0$/     #  $D&lt;0, $C&lt;0 with whitespace</div>
<div class="line">        ;</div>
<div class="line">    <span class="keywordflow">if</span> ($check) {</div>
<div class="line">        $self-&gt;set_param( <span class="stringliteral">&#39;RESULT_TYPE&#39;</span> =&gt; <span class="stringliteral">&#39;always_false&#39;</span> );</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&#39;always_false&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($condition =~ /^\$[DC]\s*&lt;=+\s*(.+)$/    #  $D&lt;=5 etc</div>
<div class="line">        and looks_like_number($1)</div>
<div class="line">        )</div>
<div class="line">    {</div>
<div class="line">        $self-&gt;set_param( <span class="stringliteral">&#39;RESULT_TYPE&#39;</span> =&gt; <span class="stringliteral">&#39;circle&#39;</span> );</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&#39;circle&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( $condition =~ /^\$[DC][&lt;=]=0$/ ) {      #  $D==0, $C&lt;=0 etc</div>
<div class="line">        $self-&gt;set_param( <span class="stringliteral">&#39;RESULT_TYPE&#39;</span> =&gt; <span class="stringliteral">&#39;self_only&#39;</span> );</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&#39;self_only&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  &#39;$D&gt;=0 and $D&lt;=5&#39; etc.  The (?:) groups don&#39;t assign to $1 etc</span></div>
<div class="line"><span class="preprocessor"></span>    my $RE_GE_LE = qr</div>
<div class="line">        {</div>
<div class="line">            ^</div>
<div class="line">            (?:</div>
<div class="line">                \$[DC](</div>
<div class="line">                    [&lt;&gt;]</div>
<div class="line">                )</div>
<div class="line">                =+</div>
<div class="line">                $RE_NUMBER</div>
<div class="line">            )\s*</div>
<div class="line">            (?:</div>
<div class="line">                and|&amp;&amp;</div>
<div class="line">            )</div>
<div class="line">            \s*</div>
<div class="line">            (?:</div>
<div class="line">                \$[DC]</div>
<div class="line">            )</div>
<div class="line">            (</div>
<div class="line">                [&lt;&gt;]</div>
<div class="line">            )</div>
<div class="line">            (?:</div>
<div class="line">                &lt;=+$RE_NUMBER</div>
<div class="line">            )</div>
<div class="line">            $</div>
<div class="line">        }xo;</div>
<div class="line"></div>
<div class="line">    $check = $condition =~ $RE_GE_LE;</div>
<div class="line">    <span class="keywordflow">if</span> ( $check and $1 ne $2 ) {</div>
<div class="line">        $self-&gt;set_param( <span class="stringliteral">&#39;RESULT_TYPE&#39;</span> =&gt; <span class="stringliteral">&#39;complex annulus&#39;</span> );</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&#39;complex annulus&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  otherwise it is a &quot;complex&quot; case which is</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  too hard to work out, and so any analyses have to check all candidates</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;set_param( <span class="stringliteral">&#39;RESULT_TYPE&#39;</span> =&gt; <span class="stringliteral">&#39;complex&#39;</span> );</div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&#39;complex&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a714e610ffb99e142b4990a4ff6e4ce69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_rtree_for_polygons_from_shapefile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_rtree_for_polygons_from_shapefile' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_rtree_for_polygons_from_shapefile-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_rtree_for_polygons_from_shapefile-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_rtree_for_polygons_from_shapefile-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_rtree_for_polygons_from_shapefile: 18</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a714e610ffb99e142b4990a4ff6e4ce69">get_rtree_for_polygons_from_shapefile</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    my $shapes = $args{shapes};</div>
<div class="line"></div>
<div class="line">    my $rtree_cache_name = $self-&gt;get_cache_name_rtree(%args);</div>
<div class="line">    my $rtree = $self-&gt;get_cached_value($rtree_cache_name);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!$rtree) {</div>
<div class="line"><span class="preprocessor">        #print &quot;Building R-Tree $rtree_cache_name\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>        $rtree = $self-&gt;build_rtree_for_shapepolys (shapes =&gt; $shapes);</div>
<div class="line">        $self-&gt;set_cached_value($rtree_cache_name =&gt; $rtree);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $rtree;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ab9e2e9471166ce9c416548b706b7dc25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_spatial_output_sp_select_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_spatial_output_sp_select_block' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_spatial_output_sp_select_block-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_spatial_output_sp_select_block-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_spatial_output_sp_select_block-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_spatial_output_sp_select_block: 28</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ab9e2e9471166ce9c416548b706b7dc25">get_spatial_output_sp_select_block</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $size = $args{size};</div>
<div class="line"></div>
<div class="line">    my $bd = $args{basedata_ref};</div>
<div class="line">    my $sp = $bd-&gt;add_spatial_output (name =&gt; <span class="stringliteral">&#39;get nbrs for sp_select_block &#39;</span> . time());</div>
<div class="line">    $bd-&gt;delete_output(output =&gt; $sp, delete_basedata_ref =&gt; 0);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  add a null element to avoid some errors</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$sp-&gt;add_element(group =&gt; &#39;null_group&#39;, label =&gt; &#39;null_label&#39;);</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my $spatial_conditions = [<span class="stringliteral">&quot;sp_block (size =&gt; $size)&quot;</span>];</div>
<div class="line"></div>
<div class="line">    $sp-&gt;run_analysis(</div>
<div class="line">        calculations                  =&gt; [],</div>
<div class="line">        override_valid_analysis_check =&gt; 1,</div>
<div class="line">        spatial_conditions            =&gt; $spatial_conditions,</div>
<div class="line">        #definition_query              =&gt; $definition_query,</div>
<div class="line">        no_create_failed_def_query    =&gt; 1,  #  only want those that pass the def query</div>
<div class="line">        calc_only_elements_to_calc    =&gt; 1,</div>
<div class="line">        #basedata_ref                  =&gt; $bd,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $sp;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="af476e932cd36f06c619497416ac6c0bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_type' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_type-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_type-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_type-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_type: 1</span></div>
<div class="line"><span class="preprocessor">sub get_type {return &#39;spatial conditions&#39;};</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a72b2fc40c4ff618d6c54cefcb596ce21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::get_used_dists </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_used_dists' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_used_dists-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_used_dists-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_used_dists-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_used_dists: 4</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a72b2fc40c4ff618d6c54cefcb596ce21">get_used_dists</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;get_param(<span class="stringliteral">&#39;USES&#39;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aacc3472150877a8b2d757199cb10bcf0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::has_conditions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-has_conditions' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-has_conditions-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-has_conditions-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-has_conditions-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in has_conditions: 10</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#aacc3472150877a8b2d757199cb10bcf0">has_conditions</a> {</div>
<div class="line">    my $self       = shift;</div>
<div class="line">    my $conditions = $self-&gt;get_conditions;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # anything left after whitespace means it has a condition</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # - will this always work? nope - comments not handled</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # update - should do now as comments are stripped in parsing</span></div>
<div class="line"><span class="preprocessor"></span>    $conditions =~ s/\s<span class="comment">//g;</span></div>
<div class="line">    <span class="keywordflow">return</span> length $conditions;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a4e5ca0defb3b91547abba077d22fac97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::max </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-max' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-max-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-max-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-max-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in max: 1</span></div>
<div class="line"><span class="preprocessor">sub max { return $_[0] &gt; $_[1] ? $_[0] : $_[1] }</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a6c31a9b917e5c959c44fbe24ee0c451a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Biodiverse::SpatialParams::method </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection--trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection--summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection--content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in : 80</span></div>
<div class="line"><span class="preprocessor"></span>sub {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  CHEATING... should use a generic means of getting at the caller object</span></div>
<div class="line"><span class="preprocessor"></span>    my $basedata = $args{basedata} || $args{caller_object}; </div>
<div class="line"></div>
<div class="line">    my %dists;</div>
<div class="line"></div>
<div class="line">    my ( @d, @D, $D, $Dsqr, @c, @C, $C, $Csqr );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( $args{calc_distances} ) {</div>
<div class="line">        %dists = eval { $self-&gt;get_distances(@_) };</div>
<div class="line">        croak $EVAL_ERROR <span class="keywordflow">if</span> $EVAL_ERROR;</div>
<div class="line"></div>
<div class="line">        @d    = @{ $dists{d_list} };</div>
<div class="line">        @D    = @{ $dists{D_list} };</div>
<div class="line">        $D    = $dists{D};</div>
<div class="line">        $Dsqr = $dists{Dsqr};</div>
<div class="line">        @c    = @{ $dists{c_list} };</div>
<div class="line">        @C    = @{ $dists{C_list} };</div>
<div class="line">        $C    = $dists{C};</div>
<div class="line">        $Csqr = $dists{Csqr};</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($self-&gt;get_param (<span class="stringliteral">&#39;KEEP_LAST_DISTANCES&#39;</span>)) {</div>
<div class="line">            $self-&gt;set_param (LAST_DISTS =&gt; \%dists);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  Should only generate the shorthands when they are actually needed.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my $coord_id1 = $args{coord_id1};</div>
<div class="line">    my $coord_id2 = $args{coord_id2};</div>
<div class="line"></div>
<div class="line">    my @coord = @{ $args{coord_array1} };</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  shorthands - most cases will be 2D</span></div>
<div class="line"><span class="preprocessor"></span>    my ( $x, $y, $z ) = ( $coord[0], $coord[1], $coord[2] );</div>
<div class="line"></div>
<div class="line">    my @nbrcoord = $args{coord_array2} ? @{ $args{coord_array2} } : ();</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  shorthands - most cases will be 2D</span></div>
<div class="line"><span class="preprocessor"></span>    my ( $nbr_x, $nbr_y, $nbr_z ) =</div>
<div class="line">      ( $nbrcoord[0], $nbrcoord[1], $nbrcoord[2] );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  These are used by the sp_* subs</span></div>
<div class="line"><span class="preprocessor"></span>    my $current_args = {</div>
<div class="line">        basedata   =&gt; $basedata,</div>
<div class="line">        dists      =&gt; \%dists,</div>
<div class="line">        coord_array    =&gt; \@coord,</div>
<div class="line">        nbrcoord_array =&gt; \@nbrcoord,</div>
<div class="line">        coord_id1 =&gt; $coord_id1,</div>
<div class="line">        coord_id2 =&gt; $coord_id2,</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    $self-&gt;set_param( CURRENT_ARGS =&gt; $current_args );</div>
<div class="line"></div>
<div class="line">    my $result = eval { CONDITIONS_STRING_GOES_HERE };</div>
<div class="line">    my $error  = $EVAL_ERROR;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  clear the args, avoid ref cycles</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;set_param( CURRENT_ARGS =&gt; undef );</div>
<div class="line"></div>
<div class="line">    croak $error <span class="keywordflow">if</span> $error;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $result;</div>
<div class="line">}</div>
<div class="line">END_OF_CONDITIONS_CODE</div>
<div class="line">      ;</div>
<div class="line"></div>
<div class="line">    my $conditions = $self-&gt;get_conditions_parsed;</div>
<div class="line">    say <span class="stringliteral">&quot;PARSED CONDITIONS:  $conditions&quot;</span>;</div>
<div class="line">    $conditions_code =~ s/CONDITIONS_STRING_GOES_HERE/$conditions/m;</div>
<div class="line"></div>
<div class="line">    $code_ref = eval $conditions_code;</div>
<div class="line">    croak $EVAL_ERROR <span class="keywordflow">if</span> $EVAL_ERROR;</div>
<div class="line"></div>
<div class="line">    $self-&gt;set_cached_value (CODE_REF =&gt; $code_ref);</div>
<div class="line">    <span class="keywordflow">return</span> $code_ref;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a495668a49f3ce120fd0b38f120510fe8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::min </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-min' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-min-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-min-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-min-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in min: 3</span></div>
<div class="line"><span class="preprocessor">sub min { return $_[0] &lt; $_[1] ? $_[0] : $_[1] }</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ac00e15542ca8b5c91b7c581d5f80f7f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-new' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in new: 31</span></div>
<div class="line"><span class="preprocessor"></span>sub <span class="keyword">new</span> {</div>
<div class="line">    my $class = shift;</div>
<div class="line">    my $self = bless {}, $class;</div>
<div class="line"></div>
<div class="line">    my %args = @_;</div>
<div class="line">    <span class="keywordflow">if</span> ( !defined $args{conditions} ) {</div>
<div class="line">        carp <span class="stringliteral">&quot;[SPATIALPARAMS] Warning, no conditions specified\n&quot;</span>;</div>
<div class="line">        $args{conditions} = $NULL_STRING;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    $self-&gt;set_basedata_ref (BASEDATA_REF =&gt; $args{basedata_ref});</div>
<div class="line"></div>
<div class="line">    my $conditions = $args{conditions};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  strip any leading or trailing whitespace</span></div>
<div class="line"><span class="preprocessor"></span>    $conditions =~ s/^\s+<span class="comment">//xms;</span></div>
<div class="line">    $conditions =~ s/\s+$<span class="comment">//xms;</span></div>
<div class="line"></div>
<div class="line">    $self-&gt;set_param(</div>
<div class="line">        CONDITIONS    =&gt; $conditions,</div>
<div class="line">        WARNING_COUNT =&gt; 0,</div>
<div class="line">        KEEP_LAST_DISTANCES =&gt; $args{keep_last_distances},</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    eval {$self-&gt;parse_distances};</div>
<div class="line">    croak $EVAL_ERROR <span class="keywordflow">if</span> $EVAL_ERROR;</div>
<div class="line"></div>
<div class="line">    $self-&gt;get_result_type;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a146efa736db75b594672e9b771ea6fc8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::parse_distances </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-parse_distances' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-parse_distances-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-parse_distances-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-parse_distances-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in parse_distances: 273</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a146efa736db75b594672e9b771ea6fc8">parse_distances</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $conditions = $self-&gt;get_conditions;  #  should call unparsed??</div>
<div class="line">    $conditions .= <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    $conditions =~ s/$RE_COMMENT<span class="comment">//g;</span></div>
<div class="line"></div>
<div class="line">    my %params;</div>
<div class="line">    my %missing_args;</div>
<div class="line">    my %missing_opt_args;</div>
<div class="line">    my %invalid_args;</div>
<div class="line">    my %incorrect_args;</div>
<div class="line">    my $results_types = $NULL_STRING;</div>
<div class="line">    my $index_max_dist;</div>
<div class="line">    my $index_max_dist_off;</div>
<div class="line">    my $index_no_use;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  some default values</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  - inefficient as they are duplicated from sub verify</span></div>
<div class="line"><span class="preprocessor"></span>    my $D = my $C = my $Dsqr = my $Csqr = 1;</div>
<div class="line">    my @D = my @C = (1) x 20;</div>
<div class="line">    my @d = my @c = (1) x 20;</div>
<div class="line">    my @coord = @d;</div>
<div class="line">    my ( $x, $y, $z ) = ( 1, 1, 1 );</div>
<div class="line">    my @nbrcoord = @d;</div>
<div class="line">    my ( $nbr_x, $nbr_y, $nbr_z ) = ( 1, 1, 1 );</div>
<div class="line"></div>
<div class="line">    $params{use_euc_distance} = undef;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  match $D with no trailing subscript, any amount of whitespace</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  check all possible matches</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $match ( $conditions =~ /\$D\b\s*\W/g ) {</div>
<div class="line">        next <span class="keywordflow">if</span> ( $match =~ /\[/ );</div>
<div class="line">        $params{use_euc_distance} = 1;</div>
<div class="line">        last;    # drop out <span class="keywordflow">if</span> found</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $params{use_cell_distance} = undef;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  match $C with no trailing subscript, any amount of whitespace</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  check all possible matches</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $match ( $conditions =~ /\$C\b\s*\W/g ) {</div>
<div class="line">        next <span class="keywordflow">if</span> ( $match =~ /\[/ );</div>
<div class="line">        $params{use_cell_distance} = 1;</div>
<div class="line">        last;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $params{use_euc_distances} = {};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  matches $d[0], $d[1] etc.  Loops over any subscripts present</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $dist ( $conditions =~ /\$d\[\s*($RE_INT)\]/g ) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  hash indexed by distances used</span></div>
<div class="line"><span class="preprocessor"></span>        $params{use_euc_distances}{$dist}++;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $params{use_abs_euc_distances} = {};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  matches $D[0], $D[1] etc.</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $dist ( $conditions =~ /\$D\[\s*($RE_INT)\]/g ) {</div>
<div class="line">        $params{use_abs_euc_distances}{$dist}++;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $params{use_cell_distances} = {};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  matches $c[0], $c[1] etc.</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $dist ( $conditions =~ /\$c\[\s*($RE_INT)\]/g ) {</div>
<div class="line">        $params{use_cell_distances}{$dist}++;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $params{use_abs_cell_distances} = {};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  matches $C[0], $C[1] etc.</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $dist ( $conditions =~ /\$C\[\s*($RE_INT)\]/g ) {</div>
<div class="line">        $params{use_abs_cell_distances}{$dist}++;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  match $nbr_z==5, $nbrcoord[1]&lt;=10 etc</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $dist ( $conditions =~ /$BOUNDED_COND_RE/gc ) {</div>
<div class="line">        $results_types .= <span class="stringliteral">&#39; non_overlapping&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  nested function finder from Friedl&#39;s book Mastering Regular Expressions</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $levelN;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$levelN = qr /\(( [^()] | (??{ $levelN }) )* \) /x;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  need to trap sets, eg:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  sp_circle (dist =&gt; sp_square (c =&gt; 5), radius =&gt; (f =&gt; 10))</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    #  search for all relevant subs</span></div>
<div class="line"><span class="preprocessor"></span>    my %subs_to_check     = $self-&gt;get_subs_with_prefix( prefix =&gt; <span class="stringliteral">&#39;sp_&#39;</span> );</div>
<div class="line">    my @subs_to_check     = keys %subs_to_check;</div>
<div class="line">    my $re_sub_names_text = <span class="stringliteral">&#39;\b(?:&#39;</span> . join( q{|}, @subs_to_check ) . <span class="stringliteral">&#39;)\b&#39;</span>;</div>
<div class="line">    my $re_sub_names      = qr /$re_sub_names_text/xsm;</div>
<div class="line"></div>
<div class="line">    my $str_len = length $conditions;</div>
<div class="line">    pos($conditions) = 0;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  loop idea also courtesy Friedl</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    CHECK_CONDITIONS:</div>
<div class="line">    <span class="keywordflow">while</span> ( not $conditions =~ m/ \G \z /xgcs ) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  haven&#39;t hit the end of line yet</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        #print &quot;\nParsing $conditions\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #print &quot;Position is &quot; . (pos $conditions) . &quot; of $str_len\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        #  march through any whitespace and newlines</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> ( $conditions =~ m/ \G [\s\n\r]+ /xgcs ) {</div>
<div class="line">            next CHECK_CONDITIONS;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  find anything that matches our valid subs</span></div>
<div class="line"><span class="preprocessor"></span>        elsif ( $conditions =~ m/ \G ( $re_sub_names ) \s* /xgcs ) {</div>
<div class="line"></div>
<div class="line">            my $sub = $1;</div>
<div class="line"></div>
<div class="line">            my $sub_args = $NULL_STRING;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  get the contents of the sub&#39;s arguments (text in brackets)</span></div>
<div class="line"><span class="preprocessor"></span>            $conditions =~ m/ \G \( ( $re_text_in_brackets ) \) /xgcs;</div>
<div class="line">            <span class="keywordflow">if</span> ( defined $1 ) {</div>
<div class="line">                $sub_args = $1;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            my $sub_name_and_args = <span class="stringliteral">&quot;$sub ($sub_args)&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  Get all the args and components.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #  This does not allow for variables,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #  which we haven&#39;t handled here.</span></div>
<div class="line"><span class="preprocessor"></span>            my %hash_1;</div>
<div class="line">            <span class="keywordflow">if</span> ($sub_args) {</div>
<div class="line">                use warnings FATAL =&gt; qw(all);  #  make warnings fatal so we <span class="keyword">get</span> any eval error</div>
<div class="line">                eval {</div>
<div class="line">                    %hash_1 = ( eval $sub_args );</div>
<div class="line">                };</div>
<div class="line">                <span class="keywordflow">if</span> ($EVAL_ERROR) {</div>
<div class="line">                    $incorrect_args{$sub} = qq{$sub_name_and_args . <span class="stringliteral">&quot;\n&quot;</span> . $EVAL_ERROR};</div>
<div class="line">                    $conditions =~ m/ \G (.) /xgcs; #  bump along by one</div>
<div class="line">                    next CHECK_CONDITIONS;          #  and move to the next part</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            my $invalid = $self-&gt;get_invalid_args_for_sub_call (sub =&gt; $sub, args =&gt; \%hash_1);</div>
<div class="line">            <span class="keywordflow">if</span> (scalar @$invalid) {</div>
<div class="line">                $invalid_args{$sub_name_and_args} = $invalid;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            my %res = $self-&gt;get_args( sub =&gt; $sub, %hash_1 );</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">foreach</span> my $key ( keys %res ) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">                #  what params do we need?</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                #  (handle the use_euc_distances flags etc)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                #  just use the ones we care about</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> ( exists $params{$key} ) {</div>
<div class="line">                    <span class="keywordflow">if</span> ( ref( $res{$key} ) =~ /HASH/ ) {</div>
<div class="line">                        my $h = $res{$key};</div>
<div class="line">                        <span class="keywordflow">foreach</span> my $dist ( keys %$h ) {</div>
<div class="line">                            $params{$key}{$dist}++;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    elsif ( ref( $res{$key} ) =~ /ARRAY/ ) {</div>
<div class="line">                        my $a = $res{$key};</div>
<div class="line">                        <span class="keywordflow">foreach</span> my $dist (@$a) {</div>
<div class="line">                            $params{$key}{$dist}++;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span> {  #  <span class="keyword">get</span> the <a class="code" href="classBiodiverse_1_1SpatialParams.html#a4e5ca0defb3b91547abba077d22fac97">max</a> of all the inputs, assuming numeric</div>
<div class="line">                        $params{$key} =</div>
<div class="line">                            <a class="code" href="classBiodiverse_1_1SpatialParams.html#a4e5ca0defb3b91547abba077d22fac97">max</a>( $res{$key} || 0, $params{$key} || 0 );</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">                #  check required args are present (but not that they are valid)</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> ( $key eq <span class="stringliteral">&#39;required_args&#39;</span> ) {</div>
<div class="line">                    <span class="keywordflow">foreach</span> my $req ( @{ $res{$key} } ) {</div>
<div class="line">                        <span class="keywordflow">if</span> ( not exists $hash_1{$req} ) {</div>
<div class="line">                            $missing_args{$sub_name_and_args}{$req}++;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">                #  check which optional args are missing (but not that they are valid)</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> ( $key eq <span class="stringliteral">&#39;optional_args&#39;</span> ) {</div>
<div class="line">                    <span class="keywordflow">foreach</span> my $req ( @{ $res{$key} } ) {</div>
<div class="line">                        <span class="keywordflow">if</span> ( not exists $hash_1{$req} ) {</div>
<div class="line">                            $missing_opt_args{$sub_name_and_args}{$req}++;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">                #  REALLY BAD CODE - does not allow for other</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                #  functions and operators</span></div>
<div class="line"><span class="preprocessor"></span>                elsif ( $key eq <span class="stringliteral">&#39;result_type&#39;</span> ) {</div>
<div class="line">                    $results_types .= <span class="stringliteral">&quot; $res{$key}&quot;</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">                #  need to handle -ve values to turn off the index</span></div>
<div class="line"><span class="preprocessor"></span>                elsif (     $key eq <span class="stringliteral">&#39;index_max_dist&#39;</span></div>
<div class="line">                        and defined $res{$key}</div>
<div class="line">                        and not $index_max_dist_off )</div>
<div class="line">                {</div>
<div class="line">                    $index_max_dist =</div>
<div class="line">                      defined $index_max_dist</div>
<div class="line">                        ? <a class="code" href="classBiodiverse_1_1SpatialParams.html#a4e5ca0defb3b91547abba077d22fac97">max</a>( $index_max_dist, $res{$key} )</div>
<div class="line">                        : $res{$key};</div>
<div class="line">                    <span class="keywordflow">if</span> ( $res{$key} &lt; 0 ) {</div>
<div class="line">                        $index_max_dist_off = 1;</div>
<div class="line">                        $index_max_dist     = undef;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">                #  should we not use a spatial index?</span></div>
<div class="line"><span class="preprocessor"></span>                elsif ( $key eq <span class="stringliteral">&#39;index_no_use&#39;</span> and $res{$key} ) {</div>
<div class="line">                    $index_no_use = 1;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {    #  bumpalong by one</div>
<div class="line">            $conditions =~ m/ \G (.) /xgcs;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $results_types =~ s/^\s+<span class="comment">//;    #  strip any leading whitespace</span></div>
<div class="line">    $self-&gt;set_param( RESULT_TYPE    =&gt; $results_types );</div>
<div class="line">    $self-&gt;set_param( INDEX_MAX_DIST =&gt; $index_max_dist );</div>
<div class="line">    $self-&gt;set_param( INDEX_NO_USE   =&gt; $index_no_use );</div>
<div class="line">    $self-&gt;set_param( MISSING_ARGS   =&gt; \%missing_args );</div>
<div class="line">    $self-&gt;set_param( INVALID_ARGS   =&gt; \%invalid_args );</div>
<div class="line">    $self-&gt;set_param( INCORRECT_ARGS =&gt; \%incorrect_args );</div>
<div class="line">    $self-&gt;set_param( MISSING_OPT_ARGS =&gt; \%missing_opt_args );</div>
<div class="line">    $self-&gt;set_param( USES           =&gt; \%params );</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  do we need to calculate the distances?  NEEDS A BIT MORE THOUGHT</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;set_param( CALC_DISTANCES =&gt; undef );</div>
<div class="line">    <span class="keywordflow">foreach</span> my $value ( values %params ) {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( ref $value ) {        #  assuming hash here</div>
<div class="line">            my $count = scalar keys %$value;</div>
<div class="line">            <span class="keywordflow">if</span> ($count) {</div>
<div class="line">                $self-&gt;set_param( CALC_DISTANCES =&gt; 1 );</div>
<div class="line">                last;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        elsif ( defined $value ) {</div>
<div class="line">            $self-&gt;set_param( CALC_DISTANCES =&gt; 1 );</div>
<div class="line">            last;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  add $self -&gt; to each condition that does not have it</span></div>
<div class="line"><span class="preprocessor"></span>    my $re_object_call = qr {</div>
<div class="line">                (</div>
<div class="line">                  (?&lt;!\w)     #  negative lookbehind <span class="keywordflow">for</span> any non-punctuation in <span class="keywordflow">case</span> a valid sub name is used in text </div>
<div class="line">                  (?&lt;!\-\&gt;\s) #  negative lookbehind <span class="keywordflow">for</span> <a class="code" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> call, eg <span class="stringliteral">&#39;$self-&gt; &#39;</span></div>
<div class="line">                  (?&lt;!\-\&gt;)   #  negative lookbehind <span class="keywordflow">for</span> <a class="code" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> call, eg <span class="stringliteral">&#39;$self-&gt;&#39;</span></div>
<div class="line">                  (?:$re_sub_names)  <span class="preprocessor">#  one of our valid sp_ subs - should require a &quot;(&quot;?</span></div>
<div class="line"><span class="preprocessor"></span>                )</div>
<div class="line">            }xms;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  add $self-&gt; to all the sp_ object calls</span></div>
<div class="line"><span class="preprocessor"></span>    $conditions =~ s{$re_object_call}</div>
<div class="line">                    {\$self-&gt;$1}gxms;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #print $conditions;</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;set_param( PARSED_CONDITIONS =&gt; $conditions );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad5c8bde3c87a8eb113ac6f9bef1ec452"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_annulus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_annulus' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_annulus-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_annulus-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_annulus-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_annulus: 31</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ad5c8bde3c87a8eb113ac6f9bef1ec452">sp_annulus</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $dist;</div>
<div class="line">    <span class="keywordflow">if</span> ( $args{axes} ) {</div>
<div class="line">        my $axes  = $args{axes};</div>
<div class="line">        my $dists = $h-&gt;{dists}{D_list};</div>
<div class="line">        my $d_sqr = 0;</div>
<div class="line">        <span class="keywordflow">foreach</span> my $axis (@$axes) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  drop out clause to save some comparisons over large data sets</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">return</span> <span class="keywordflow">if</span> $dists-&gt;[$axis] &gt; $args{radius};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # increment</span></div>
<div class="line"><span class="preprocessor"></span>            $d_sqr += $dists-&gt;[$axis]**2;</div>
<div class="line">        }</div>
<div class="line">        $dist = sqrt $d_sqr;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $dist = $h-&gt;{dists}{D};</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $test =</div>
<div class="line">        eval { $dist &gt;= $args{inner_radius} &amp;&amp; $dist &lt;= $args{outer_radius} };</div>
<div class="line">    croak $EVAL_ERROR <span class="keywordflow">if</span> $EVAL_ERROR;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $test;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a8ae8739427cc1b0f8d0e9aafa2e47e67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_block' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_block-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_block-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_block-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_block: 40</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a8ae8739427cc1b0f8d0e9aafa2e47e67">sp_block</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    croak <span class="stringliteral">&quot;sp_block: argument &#39;size&#39; not specified\n&quot;</span></div>
<div class="line">        <span class="keywordflow">if</span> not defined $args{size};</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $coord    = $h-&gt;{coord_array};</div>
<div class="line">    my $nbrcoord = $h-&gt;{nbrcoord_array};</div>
<div class="line"></div>
<div class="line">    my $size = $args{size};    #  need a handler <span class="keywordflow">for</span> size == 0</div>
<div class="line">    <span class="keywordflow">if</span> ( ( ref $size ) !~ /ARRAY/ ) {</div>
<div class="line">        $size = [ ($size) x scalar @$coord ];</div>
<div class="line">    };    #  make it an array <span class="keywordflow">if</span> necessary;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  the origin allows the user to shift the blocks around</span></div>
<div class="line"><span class="preprocessor"></span>    my $origin = $args{origin} || [ (0) x scalar @$coord ];</div>
<div class="line">    <span class="keywordflow">if</span> ( ( ref $origin ) !~ /ARRAY/ ) {</div>
<div class="line">        $origin = [ ($origin) x scalar @$coord ];</div>
<div class="line">    }    #  make it an array <span class="keywordflow">if</span> necessary</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $i ( 0 .. $#$coord ) {</div>
<div class="line"><span class="preprocessor">        #  should add an arg to use a slice (subset) of the coord array</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #  Should also use floor() instead of fmod()</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        next <span class="keywordflow">if</span> not defined $size-&gt;[$i];    #  ignore <span class="keywordflow">if</span> <span class="keyword">this</span> is undef</div>
<div class="line">        my $axis   = $coord-&gt;[$i];</div>
<div class="line">        my $tmp    = $axis - $origin-&gt;[$i];</div>
<div class="line">        my $offset = fmod( $tmp, $size-&gt;[$i] );</div>
<div class="line">        my $edge   = $offset &lt; 0               #  <span class="stringliteral">&quot;left&quot;</span> edge</div>
<div class="line">            ? $axis - $offset - $size-&gt;[$i]    #  allow <span class="keywordflow">for</span> -ve fmod results</div>
<div class="line">            : $axis - $offset;</div>
<div class="line">        my $dist = $nbrcoord-&gt;[$i] - $edge;</div>
<div class="line">        <span class="keywordflow">return</span> 0 <span class="keywordflow">if</span> $dist &lt; 0 or $dist &gt; $size-&gt;[$i];</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2d6202d00fd2b0cd536c1869669dbdba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_circle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_circle' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_circle-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_circle-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_circle-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_circle: 30</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a2d6202d00fd2b0cd536c1869669dbdba">sp_circle</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $dist;</div>
<div class="line">    <span class="keywordflow">if</span> ( $args{axes} ) {</div>
<div class="line">        my $axes  = $args{axes};</div>
<div class="line">        my $dists = $h-&gt;{dists}{D_list};</div>
<div class="line">        my $d_sqr = 0;</div>
<div class="line">        <span class="keywordflow">foreach</span> my $axis (@$axes) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  drop out clause to save some comparisons over large data sets</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">return</span> <span class="keywordflow">if</span> $dists-&gt;[$axis] &gt; $args{radius};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # increment</span></div>
<div class="line"><span class="preprocessor"></span>            $d_sqr += $dists-&gt;[$axis]**2;</div>
<div class="line">        }</div>
<div class="line">        $dist = sqrt $d_sqr;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $dist = $h-&gt;{dists}{D}; </div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  could put into the return, but this helps debugging</span></div>
<div class="line"><span class="preprocessor"></span>    my $test = $dist &lt;= $args{radius};    </div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $test;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a7351f152af7fb71395177e45e3415758"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_circle_cell </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_circle_cell' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_circle_cell-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_circle_cell-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_circle_cell-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_circle_cell: 25</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a7351f152af7fb71395177e45e3415758">sp_circle_cell</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $dist;</div>
<div class="line">    <span class="keywordflow">if</span> ( $args{axes} ) {</div>
<div class="line">        my $axes  = $args{axes};</div>
<div class="line">        my $dists = $h-&gt;{dists}{C_list};</div>
<div class="line">        my $d_sqr = 0;</div>
<div class="line">        <span class="keywordflow">foreach</span> my $axis (@$axes) {</div>
<div class="line">            $d_sqr += $dists-&gt;[$axis]**2;</div>
<div class="line">        }</div>
<div class="line">        $dist = sqrt $d_sqr;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $dist = $h-&gt;{dists}{C};</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  could put into the return, but still debugging</span></div>
<div class="line"><span class="preprocessor"></span>    my $test = $dist &lt;= $args{radius};</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $test;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="afb9c4e4eb9526fa0124df632735c528a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_ellipse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_ellipse' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_ellipse-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_ellipse-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_ellipse-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_ellipse: 70</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#afb9c4e4eb9526fa0124df632735c528a">sp_ellipse</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $axes = $args{axes};</div>
<div class="line">    <span class="keywordflow">if</span> ( defined $axes ) {</div>
<div class="line">        croak <span class="stringliteral">&quot;sp_ellipse:  axes arg is not an array ref\n&quot;</span></div>
<div class="line">            <span class="keywordflow">if</span> ( ref $axes ) !~ /ARRAY/;</div>
<div class="line">        my $axis_count = scalar @$axes;</div>
<div class="line">        croak</div>
<div class="line">            <span class="stringliteral">&quot;sp_ellipse:  axes array needs two axes, you have given $axis_count\n&quot;</span></div>
<div class="line">            <span class="keywordflow">if</span> $axis_count != 2;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $axes = [ 0, 1 ];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my @d = @{ $h-&gt;{dists}{d_list} };</div>
<div class="line"></div>
<div class="line">    my $major_radius = $args{major_radius};    #  longest axis</div>
<div class="line">    my $minor_radius = $args{minor_radius};    #  shortest axis</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  set the default offset as north in radians, anticlockwise 1.57 is north</span></div>
<div class="line"><span class="preprocessor"></span>    my $rotate_angle =</div>
<div class="line">        defined $args{rotate_angle} ? $args{rotate_angle} : Math::Trig::pi2;</div>
<div class="line">    <span class="keywordflow">if</span> ( defined $args{rotate_angle_deg} and not defined $rotate_angle ) {</div>
<div class="line">        $rotate_angle = deg2rad ( $args{rotate_angle_deg} );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $d0 = $d[ $axes-&gt;[0] ];</div>
<div class="line">    my $d1 = $d[ $axes-&gt;[1] ];</div>
<div class="line">    my $D  = sqrt ($d0 ** 2 + $d1 ** 2);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  now calc the bearing to rotate the coords by</span></div>
<div class="line"><span class="preprocessor"></span>    my $bearing = atan2( $d0, $d1 ) + $rotate_angle;</div>
<div class="line"></div>
<div class="line">    my $r_x = sin($bearing) * $D;    #  rotated x coord</div>
<div class="line">    my $r_y = cos($bearing) * $D;    #  rotated y coord</div>
<div class="line"></div>
<div class="line">    my $a_dist = ( $r_y ** 2 ) / ( $major_radius**2 );</div>
<div class="line">    my $b_dist = ( $r_x ** 2 ) / ( $minor_radius**2 );</div>
<div class="line">    my $precision = <span class="stringliteral">&#39;%.14f&#39;</span>;</div>
<div class="line">    $a_dist = $self-&gt;set_precision(value =&gt; $a_dist, precision =&gt; $precision) + 0;</div>
<div class="line">    $b_dist = $self-&gt;set_precision(value =&gt; $b_dist, precision =&gt; $precision) + 0;</div>
<div class="line"></div>
<div class="line">    my $test = eval { 1 &gt;= ( $a_dist + $b_dist ) };</div>
<div class="line">    croak $EVAL_ERROR <span class="keywordflow">if</span> $EVAL_ERROR;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $test;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#sub _sp_random_select {</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    my %args = @_;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    ARGS: if ($args{get_args}) {</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#        my %args_r = (</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                    description =&gt; &quot;Randomly select a set of neighbours&quot;,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                    #  flag index dist if easy to determine</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                    index_max_dist =&gt; undef,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                    required_args =&gt; [qw //],</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                    optional_args =&gt; [qw //],</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                    result_type =&gt; &quot;random&quot;,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                    );</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#        return wantarray ? %args_r : \%args_r;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    }</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor">#}</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ab3a77174607719827fd0aa9f636fd114"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_get_spatial_output_list_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_get_spatial_output_list_value' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_get_spatial_output_list_value-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_get_spatial_output_list_value-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_get_spatial_output_list_value-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_get_spatial_output_list_value: 83</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ab3a77174607719827fd0aa9f636fd114">sp_get_spatial_output_list_value</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $list_name = $args{list} <span class="comment">// &#39;SPATIAL_RESULTS&#39;;</span></div>
<div class="line">    my $index     = $args{index};</div>
<div class="line">    </div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $default_element</div>
<div class="line">      = eval {$self-&gt;is_def_query}</div>
<div class="line">      ? $h-&gt;{coord_id1}</div>
<div class="line">      : $h-&gt;{coord_id2};</div>
<div class="line"></div>
<div class="line">    my $element = $args{element} <span class="comment">// $default_element;</span></div>
<div class="line"></div>
<div class="line">    my $bd      = eval {$self-&gt;get_basedata_ref} || $h-&gt;{basedata} || $h-&gt;{caller_object};</div>
<div class="line">    my $sp_name = $args{output};</div>
<div class="line">    croak <span class="stringliteral">&quot;Spatial output name not defined\n&quot;</span> <span class="keywordflow">if</span> not defined $sp_name;</div>
<div class="line"></div>
<div class="line">    my $sp = $bd-&gt;get_spatial_output_ref (name =&gt; $sp_name)</div>
<div class="line">      or croak <span class="stringliteral">&#39;Spatial output $sp_name does not exist in basedata &#39;</span></div>
<div class="line">                . $bd-&gt;get_param (<span class="stringliteral">&#39;NAME&#39;</span>)</div>
<div class="line">                . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">    croak <span class="stringliteral">&quot;element $element is not in spatial output\n&quot;</span></div>
<div class="line">      <span class="keywordflow">if</span> not $sp-&gt;exists_element (element =&gt; $element);</div>
<div class="line"></div>
<div class="line">    my $list = $sp-&gt;get_list_ref (list =&gt; $list_name, element =&gt; $element);</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keywordflow">if</span> not exists $list-&gt;{$index};</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $list-&gt;{$index};</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">=head1 NAME</div>
<div class="line"></div>
<div class="line"><a class="code" href="classBiodiverse_1_1SpatialParams.html">Biodiverse::SpatialParams</a></div>
<div class="line"></div>
<div class="line">=head1 SYNOPSIS</div>
<div class="line"></div>
<div class="line">  use Biodiverse::SpatialParams;</div>
<div class="line">  $object = Biodiverse::SpatialParams-&gt;<a class="code" href="classBiodiverse_1_1SpatialParams.html#ac00e15542ca8b5c91b7c581d5f80f7f4">new</a>();</div>
<div class="line"></div>
<div class="line">=head1 DESCRIPTION</div>
<div class="line"></div>
<div class="line">TO BE FILLED IN</div>
<div class="line"></div>
<div class="line">=head1 METHODS</div>
<div class="line"></div>
<div class="line">=over</div>
<div class="line"></div>
<div class="line">=item INSERT METHODS</div>
<div class="line"></div>
<div class="line">=back</div>
<div class="line"></div>
<div class="line">=head1 REPORTING ERRORS</div>
<div class="line"></div>
<div class="line">Use the issue tracker at http:<span class="comment">//www.purl.org/biodiverse</span></div>
<div class="line"></div>
<div class="line">=head1 COPYRIGHT</div>
<div class="line"></div>
<div class="line">Copyright (c) 2010 Shawn Laffan. All rights reserved.  </div>
<div class="line"></div>
<div class="line">=head1 LICENSE</div>
<div class="line"></div>
<div class="line">This program is free software: you can redistribute it and/or modify</div>
<div class="line">it under the terms of the GNU General Public License as published by</div>
<div class="line">the Free Software Foundation, either version 3 of the License, or</div>
<div class="line">(at your option) any later version.</div>
<div class="line"></div>
<div class="line">This program is distributed in the hope that it will be useful,</div>
<div class="line">but WITHOUT ANY WARRANTY; without even the implied warranty of</div>
<div class="line">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</div>
<div class="line">GNU General Public License <span class="keywordflow">for</span> more details.</div>
<div class="line"></div>
<div class="line">For a full copy of the license see &lt;http:<span class="comment">//www.gnu.org/licenses/&gt;.</span></div>
<div class="line"></div>
<div class="line">=cut</div>
<div class="line"></div>
<div class="line">1;</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ab94e012fdc9bf1f4e16929b279c93ffe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_group_not_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_group_not_empty' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_group_not_empty-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_group_not_empty-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_group_not_empty-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_group_not_empty: 16</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ab94e012fdc9bf1f4e16929b279c93ffe">sp_group_not_empty</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line">    </div>
<div class="line">    my $element = $args{element};</div>
<div class="line">    <span class="keywordflow">if</span> (not defined $element) {</div>
<div class="line">        $element = eval {$self-&gt;is_def_query()} ? $h-&gt;{coord_id1} : $h-&gt;{coord_id2};</div>
<div class="line"><span class="preprocessor">        #$element = ${$element};  #  deref it</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line"></div>
<div class="line">    my $bd  = $h-&gt;{basedata};</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $bd-&gt;get_richness (element =&gt; $element) ? 1 : 0;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a82600d7e67dde7b77cb20df8322251c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_in_label_range </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_in_label_range' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_in_label_range-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_in_label_range-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_in_label_range-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_in_label_range: 30</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a82600d7e67dde7b77cb20df8322251c8">sp_in_label_range</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $label = $args{label} <span class="comment">// croak &quot;argument label not defined\n&quot;;</span></div>
<div class="line"></div>
<div class="line">    my $type = $args{type};</div>
<div class="line">    $type ||= eval {$self-&gt;is_def_query()} ? <span class="stringliteral">&#39;proc&#39;</span> : <span class="stringliteral">&#39;nbr&#39;</span>;</div>
<div class="line"></div>
<div class="line">    my $group;</div>
<div class="line">    <span class="keywordflow">if</span> ( $type eq <span class="stringliteral">&#39;proc&#39;</span> ) {</div>
<div class="line">        $group = $h-&gt;{coord_id1};</div>
<div class="line">    }</div>
<div class="line">    elsif ( $type eq <span class="stringliteral">&#39;nbr&#39;</span> ) {</div>
<div class="line">        $group = $h-&gt;{coord_id2};</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $bd  = $h-&gt;{basedata};</div>
<div class="line"></div>
<div class="line">    my $labels_in_group = $bd-&gt;get_labels_in_group_as_hash (group =&gt; $group);</div>
<div class="line"></div>
<div class="line">    my $exists = exists $labels_in_group-&gt;{$label};</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $exists;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a22112f923ba3a2e773c2b0c6f02c6ec3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_in_line_with </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_in_line_with' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_in_line_with-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_in_line_with-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_in_line_with-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_in_line_with: 8</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a22112f923ba3a2e773c2b0c6f02c6ec3">sp_in_line_with</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;_sp_side(@_) == 0; </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ae8334a0306ac5cd1f5bd80db966fa5ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_is_left_of </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_is_left_of' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_is_left_of-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_is_left_of-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_is_left_of-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_is_left_of: 7</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#ae8334a0306ac5cd1f5bd80db966fa5ba">sp_is_left_of</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;_sp_side(@_) &lt; 0; </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a4b63605ef3413cb4c0f23b5c1edf68a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_is_right_of </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_is_right_of' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_is_right_of-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_is_right_of-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_is_right_of-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_is_right_of: 7</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a4b63605ef3413cb4c0f23b5c1edf68a3">sp_is_right_of</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;_sp_side(@_) &gt; 0; </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2916b3e5c3652a081fabf8fa5691969f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_match_regex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_match_regex' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_match_regex-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_match_regex-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_match_regex-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_match_regex: 10</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a2916b3e5c3652a081fabf8fa5691969f">sp_match_regex</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $comparator = $self-&gt;get_comparator_for_text_matching (%args);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $comparator =~ $args{re};</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#  get the relevant string for the text match subs</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a7dd1d7a800c58d0f9f7f73027e68c4e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_match_text </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_match_text' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_match_text-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_match_text-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_match_text-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_match_text: 9</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a7dd1d7a800c58d0f9f7f73027e68c4e5">sp_match_text</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $comparator = $self-&gt;get_comparator_for_text_matching (%args);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $args{text} eq $comparator;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a16386447dd62d71855308dc41af5ad11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_point_in_poly </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_point_in_poly' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_point_in_poly-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_point_in_poly-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_point_in_poly-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_point_in_poly: 16</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a16386447dd62d71855308dc41af5ad11">sp_point_in_poly</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $vertices = $args{polygon};</div>
<div class="line">    my $point = $args{point};</div>
<div class="line">    $point ||= eval {$self-&gt;is_def_query} ? $h-&gt;{coord_array} : $h-&gt;{nbrcoord_array};</div>
<div class="line"></div>
<div class="line">    my $poly = (blessed ($vertices) || $NULL_STRING) eq <span class="stringliteral">&#39;Math::Polygon&#39;</span></div>
<div class="line">                ? $vertices</div>
<div class="line">                : Math::Polygon-&gt;<span class="keyword">new</span>( points =&gt; $vertices );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $poly-&gt;contains($point);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a88278224863c1f6e2a8cf763abd6bc74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_point_in_poly_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_point_in_poly_shape' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_point_in_poly_shape-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_point_in_poly_shape-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_point_in_poly_shape-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_point_in_poly_shape: 71</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a88278224863c1f6e2a8cf763abd6bc74">sp_point_in_poly_shape</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $no_cache = $args{no_cache};</div>
<div class="line">    my $axes = $args{axes} || [0,1];</div>
<div class="line"></div>
<div class="line">    my $point = $args{point};</div>
<div class="line">    <span class="keywordflow">if</span> (!defined $point) {  #  convoluted, but syntax highlighting plays up with ternary op</div>
<div class="line">        <span class="keywordflow">if</span> (eval {$self-&gt;is_def_query}) {</div>
<div class="line">            $point = $h-&gt;{coord_array};</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            $point = $h-&gt;{nbrcoord_array};</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $x_coord = $point-&gt;[$axes-&gt;[0]];</div>
<div class="line">    my $y_coord = $point-&gt;[$axes-&gt;[1]];</div>
<div class="line"></div>
<div class="line">    my $cached_results = $self-&gt;get_cache_sp_point_in_poly_shape(%args);</div>
<div class="line">    my $point_string = join (<span class="charliteral">&#39;:&#39;</span>, $x_coord, $y_coord);</div>
<div class="line">    <span class="keywordflow">if</span> (!$no_cache &amp;&amp; exists $cached_results-&gt;{$point_string}) {</div>
<div class="line">        <span class="keywordflow">return</span> $cached_results-&gt;{$point_string};</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $polys = $self-&gt;get_polygons_from_shapefile (%args);</div>
<div class="line"></div>
<div class="line">    my $pointshape = Geo::ShapeFile::Point-&gt;new(X =&gt; $x_coord, Y =&gt; $y_coord);</div>
<div class="line"></div>
<div class="line">    my $rtree = $self-&gt;get_rtree_for_polygons_from_shapefile (%args, shapes =&gt; $polys);</div>
<div class="line">    my $bd = $h-&gt;{basedata};</div>
<div class="line">    my @cell_sizes = @{$bd-&gt;get_param(<span class="stringliteral">&#39;CELL_SIZES&#39;</span>)};</div>
<div class="line">    my ($cell_x, $cell_y) = ($cell_sizes[$axes-&gt;[0]], $cell_sizes[$axes-&gt;[1]]);</div>
<div class="line">    my @rect = (</div>
<div class="line">        $x_coord - $cell_x / 2,</div>
<div class="line">        $y_coord - $cell_y / 2,</div>
<div class="line">        $x_coord + $cell_x / 2,</div>
<div class="line">        $y_coord + $cell_y / 2,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    my $rtree_polys = [];</div>
<div class="line">    $rtree-&gt;query_partly_within_rect(@rect, $rtree_polys);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  need a progress dialogue for involved searches</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $progress = Biodiverse::Progress-&gt;new(text =&gt; &#39;Point in poly search&#39;);</span></div>
<div class="line"><span class="preprocessor"></span>    my ($i, $target) = (1, scalar @$rtree_polys);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $poly (@$rtree_polys) {</div>
<div class="line"><span class="preprocessor">        #$progress-&gt;update(</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #    &quot;Checking if point $point_string\nis in polygon\n$i of $target&quot;,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #    $i / $target,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #);</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> ($poly-&gt;contains_point($pointshape)) {</div>
<div class="line">            <span class="keywordflow">if</span> (!$no_cache) {</div>
<div class="line">                $cached_results-&gt;{$point_string} = 1;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> 1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!$no_cache) {</div>
<div class="line">        $cached_results-&gt;{$point_string} = 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a4ce0d8ce65495f5e53620a51a90902a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_points_in_same_poly_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_points_in_same_poly_shape' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_points_in_same_poly_shape-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_points_in_same_poly_shape-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_points_in_same_poly_shape-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_points_in_same_poly_shape: 98</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a4ce0d8ce65495f5e53620a51a90902a4">sp_points_in_same_poly_shape</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $no_cache = $args{no_cache};</div>
<div class="line">    my $axes = $args{axes} || [0,1];</div>
<div class="line"></div>
<div class="line">    my $point1 = $args{point1} <span class="comment">// $h-&gt;{coord_array};</span></div>
<div class="line">    my $point2 = $args{point2} <span class="comment">// $h-&gt;{nbrcoord_array};</span></div>
<div class="line"></div>
<div class="line">    my $x_coord1 = $point1-&gt;[$axes-&gt;[0]];</div>
<div class="line">    my $y_coord1 = $point1-&gt;[$axes-&gt;[1]];</div>
<div class="line">    my $x_coord2 = $point2-&gt;[$axes-&gt;[0]];</div>
<div class="line">    my $y_coord2 = $point2-&gt;[$axes-&gt;[1]];</div>
<div class="line"></div>
<div class="line">    my $cached_results     = $self-&gt;get_cache_sp_points_in_same_poly_shape(%args);</div>
<div class="line">    my $cached_pts_in_poly = $self-&gt;get_cache_points_in_shapepoly(%args);</div>
<div class="line"></div>
<div class="line">    my $point_string1 = join (<span class="charliteral">&#39;:&#39;</span>, $x_coord1, $y_coord1, $x_coord2, $y_coord2);</div>
<div class="line">    my $point_string2 = join (<span class="charliteral">&#39;:&#39;</span>, $x_coord2, $y_coord2, $x_coord1, $y_coord1);    </div>
<div class="line">    <span class="keywordflow">if</span> (!$no_cache) {</div>
<div class="line">        <span class="keywordflow">for</span> my $point_string ($point_string1, $point_string2) {</div>
<div class="line">            <span class="keywordflow">return</span> $cached_results-&gt;{$point_string}</div>
<div class="line">              <span class="keywordflow">if</span> (exists $cached_results-&gt;{$point_string});</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $polys = $self-&gt;get_polygons_from_shapefile (%args);</div>
<div class="line"></div>
<div class="line">    my $pointshape1 = Geo::ShapeFile::Point-&gt;new(X =&gt; $x_coord1, Y =&gt; $y_coord1);</div>
<div class="line">    my $pointshape2 = Geo::ShapeFile::Point-&gt;new(X =&gt; $x_coord2, Y =&gt; $y_coord2);</div>
<div class="line"></div>
<div class="line">    my $rtree = $self-&gt;get_rtree_for_polygons_from_shapefile (%args, shapes =&gt; $polys);</div>
<div class="line">    my $bd = $h-&gt;{basedata};</div>
<div class="line">    my @cell_sizes = @{$bd-&gt;get_param(<span class="stringliteral">&#39;CELL_SIZES&#39;</span>)};</div>
<div class="line">    my ($cell_x, $cell_y) = ($cell_sizes[$axes-&gt;[0]], $cell_sizes[$axes-&gt;[1]]);</div>
<div class="line">    </div>
<div class="line">    my @rect1 = (</div>
<div class="line">        $x_coord1 - $cell_x / 2,</div>
<div class="line">        $y_coord1 - $cell_y / 2,</div>
<div class="line">        $x_coord1 + $cell_x / 2,</div>
<div class="line">        $y_coord1 + $cell_y / 2,</div>
<div class="line">    );</div>
<div class="line">    my $rtree_polys1 = [];</div>
<div class="line">    $rtree-&gt;query_partly_within_rect(@rect1, $rtree_polys1);</div>
<div class="line"></div>
<div class="line">    my @rect2 = (</div>
<div class="line">        $x_coord2 - $cell_x / 2,</div>
<div class="line">        $y_coord2 - $cell_y / 2,</div>
<div class="line">        $x_coord2 + $cell_x / 2,</div>
<div class="line">        $y_coord2 + $cell_y / 2,</div>
<div class="line">    );</div>
<div class="line">    my $rtree_polys2 = [];</div>
<div class="line">    $rtree-&gt;query_partly_within_rect(@rect2, $rtree_polys2);</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  get the list of common polys</span></div>
<div class="line"><span class="preprocessor"></span>    my @rtree_polys_common = grep {</div>
<div class="line">        my $check = $_;</div>
<div class="line">        List::MoreUtils::any {$_ eq $check} @$rtree_polys2</div>
<div class="line">    } @$rtree_polys1;</div>
<div class="line"></div>
<div class="line">    my ($i, $target) = (1, scalar @$rtree_polys1);</div>
<div class="line">    my $point1_str = join <span class="charliteral">&#39;:&#39;</span>, $x_coord1, $y_coord1;</div>
<div class="line">    my $point2_str = join <span class="charliteral">&#39;:&#39;</span>, $x_coord2, $y_coord2;</div>
<div class="line">    </div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $poly (@rtree_polys_common) {</div>
<div class="line">        my $poly_id     = $poly-&gt;shape_id();</div>
<div class="line"></div>
<div class="line">        my $pt1_in_poly = $cached_pts_in_poly-&gt;{$poly_id}{$point1_str};</div>
<div class="line">        <span class="keywordflow">if</span> (!defined $pt1_in_poly) {</div>
<div class="line">            $pt1_in_poly = $poly-&gt;contains_point($pointshape1);</div>
<div class="line">            $cached_pts_in_poly-&gt;{$poly_id}{$point1_str} = $pt1_in_poly ? 1 : 0;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        my $pt2_in_poly = $cached_pts_in_poly-&gt;{$poly_id}{$point2_str};</div>
<div class="line">        <span class="keywordflow">if</span> (!defined $pt2_in_poly) {</div>
<div class="line">            $pt2_in_poly = $poly-&gt;contains_point($pointshape2);</div>
<div class="line">            $cached_pts_in_poly-&gt;{$poly_id}{$point2_str} = $pt2_in_poly ? 1 : 0;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($pt1_in_poly || $pt2_in_poly) {</div>
<div class="line">            my $result = $pt1_in_poly &amp;&amp; $pt2_in_poly;</div>
<div class="line">            <span class="keywordflow">if</span> (!$no_cache) {</div>
<div class="line">                $cached_results-&gt;{$point_string1} = $result;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> $result;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!$no_cache) {</div>
<div class="line">        $cached_results-&gt;{$point_string1} = 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a257d56a5c44dcaacc0f486ca9433f431"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_select_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_select_all' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_select_all-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_select_all-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_select_all-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_select_all: 7</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a257d56a5c44dcaacc0f486ca9433f431">sp_select_all</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"><span class="preprocessor">    #my %args = @_;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">return</span> 1;    #  always returns <span class="keyword">true</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a7914ab1786e4b588a3f655127f2e7038"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_select_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_select_block' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_select_block-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_select_block-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_select_block-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_select_block: 83</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a7914ab1786e4b588a3f655127f2e7038">sp_select_block</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  do stuff here</span></div>
<div class="line"><span class="preprocessor"></span>    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $bd        = $args{caller_object} || $h-&gt;{basedata};</div>
<div class="line">    my $coord_id1 = $h-&gt;{coord_id1};</div>
<div class="line">    my $coord_id2 = $h-&gt;{coord_id2};</div>
<div class="line"></div>
<div class="line">    my $verifying = $self-&gt;get_param(<span class="stringliteral">&#39;VERIFYING&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $frequency    = $args{count} <span class="comment">// 1;</span></div>
<div class="line">    my $size         = $args{size}; #  should be a <span class="keyword">function</span> of cellsizes</div>
<div class="line">    my $prng_seed    = $args{prng_seed};</div>
<div class="line">    my $random       = $args{random} <span class="comment">// 1;</span></div>
<div class="line">    my $use_cache    = $args{use_cache} <span class="comment">// 1;</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($args{clear_cache}) {</div>
<div class="line">        $self-&gt;set_param(SP_SELECT_BLOCK_CLEAR_CACHE =&gt; 1);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $cache_sp_out_name   = <span class="stringliteral">&#39;SP_SELECT_BLOCK_CACHED_SP_OUT&#39;</span>;</div>
<div class="line">    my $cached_sp_list_name = <span class="stringliteral">&#39;SP_BLOCK_NBRS&#39;</span>;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  generate the spatial output and get the relevant groups</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  NEED TO USE THE PARENT DEF QUERY IF SET? Not if this is to calculate it...</span></div>
<div class="line"><span class="preprocessor"></span>    my $sp = $self-&gt;get_param ($cache_sp_out_name);</div>
<div class="line">    my $prng;</div>
<div class="line">    <span class="keywordflow">if</span> (! $sp) {</div>
<div class="line">        $sp = $self-&gt;get_spatial_output_sp_select_block (</div>
<div class="line">            basedata_ref =&gt; $bd,</div>
<div class="line">            size         =&gt; $size,</div>
<div class="line">        );    </div>
<div class="line">        $self-&gt;set_param($cache_sp_out_name =&gt; $sp);</div>
<div class="line">        $prng = $sp-&gt;initialise_rand(seed =&gt; $prng_seed);</div>
<div class="line">        $sp-&gt;set_param(PRNG =&gt; $prng);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $prng = $sp-&gt;get_param (<span class="stringliteral">&#39;PRNG&#39;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $nbrs = {};</div>
<div class="line">    my @groups;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ( $sp-&gt;exists_list(list =&gt; $cached_sp_list_name, element =&gt; $coord_id1) ) {</div>
<div class="line">        $nbrs = $sp-&gt;get_list_values (</div>
<div class="line">            element =&gt; $coord_id1,</div>
<div class="line">            list    =&gt; $cached_sp_list_name,</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        my $these_nbrs = $sp-&gt;get_list_values (</div>
<div class="line">            element =&gt; $coord_id1,</div>
<div class="line">            list    =&gt; <span class="stringliteral">&#39;_NBR_SET1&#39;</span>,</div>
<div class="line">        );</div>
<div class="line">        my $sorted_nbrs = $sp-&gt;get_element_list_sorted(list =&gt; $these_nbrs);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( $args{reverse_order} ) {</div>
<div class="line">            $sorted_nbrs = [reverse @$sorted_nbrs];</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> ($random) {</div>
<div class="line">            $sorted_nbrs = $prng-&gt;shuffle($sorted_nbrs);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        my $target = <a class="code" href="classBiodiverse_1_1SpatialParams.html#a495668a49f3ce120fd0b38f120510fe8">min</a> (($frequency - 1), $#$sorted_nbrs);</div>
<div class="line">        @groups = @$sorted_nbrs[0 .. $target];</div>
<div class="line">        @$nbrs{@groups} = (1) x scalar @groups;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> my $nbr (@$these_nbrs) {  #  cache it</div>
<div class="line">            $sp-&gt;add_to_lists (</div>
<div class="line">                element              =&gt; $nbr,</div>
<div class="line">                $cached_sp_list_name =&gt; $nbrs,</div>
<div class="line">                use_ref              =&gt; 1,</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> defined $coord_id2 ? exists $nbrs-&gt;{$coord_id2} : 0;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aced4e8125084ae0d1fe15bdf5e6f7969"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_select_element </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_select_element' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_select_element-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_select_element-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_select_element-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_select_element: 12</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#aced4e8125084ae0d1fe15bdf5e6f7969">sp_select_element</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">delete</span> $args{axes};  #  <span class="keyword">remove</span> the axes arg <span class="keywordflow">if</span> <span class="keyword">set</span></div>
<div class="line"></div>
<div class="line">    my $comparator = $self-&gt;get_comparator_for_text_matching (%args);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $args{element} eq $comparator;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a1e1588a1dc3a718ade5b743e3111fdef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_select_sequence </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_select_sequence' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_select_sequence-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_select_sequence-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_select_sequence-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_select_sequence: 117</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a1e1588a1dc3a718ade5b743e3111fdef">sp_select_sequence</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $h           = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $bd        = $args{caller_object} || $h-&gt;{basedata};</div>
<div class="line">    my $coord_id1 = $h-&gt;{coord_id1};</div>
<div class="line">    my $coord_id2 = $h-&gt;{coord_id2};</div>
<div class="line"></div>
<div class="line">    my $verifying = $self-&gt;get_param(<span class="stringliteral">&#39;VERIFYING&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $spacing      = $args{frequency};</div>
<div class="line">    my $cycle_offset = $args{cycle_offset} <span class="comment">// 1;</span></div>
<div class="line">    my $use_cache    = $args{use_cache} <span class="comment">// 1;</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($args{clear_cache}) {</div>
<div class="line">        $self-&gt;set_param(SP_SELECT_SEQUENCE_CLEAR_CACHE =&gt; 1);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $ID                = join q{,}, @_;</div>
<div class="line">    my $cache_gp_name     = <span class="stringliteral">&#39;SP_SELECT_SEQUENCE_CACHED_GROUP_LIST&#39;</span> . $ID;</div>
<div class="line">    my $cache_nbr_name    = <span class="stringliteral">&#39;SP_SELECT_SEQUENCE_CACHED_NBRS&#39;</span> . $ID;</div>
<div class="line">    my $cache_offset_name = <span class="stringliteral">&#39;SP_SELECT_SEQUENCE_LAST_OFFSET&#39;</span> . $ID;</div>
<div class="line">    my $cache_last_coord_id_name = <span class="stringliteral">&#39;SP_SELECT_SEQUENCE_LAST_COORD_ID1&#39;</span> . $ID;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  inefficient - should put in metadata</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;set_param(NBR_CACHE_PFX =&gt; <span class="stringliteral">&#39;SP_SELECT_SEQUENCE_CACHED_NBRS&#39;</span>);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  get the offset and increment if needed</span></div>
<div class="line"><span class="preprocessor"></span>    my $offset = $self-&gt;get_cached_value($cache_offset_name);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #my $start_pos;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my $last_coord_id1;</div>
<div class="line">    <span class="keywordflow">if</span> ( not defined $offset ) {</div>
<div class="line">        $offset = $args{first_offset} || 0;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #$start_pos = $offset;</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line">    <span class="keywordflow">else</span> {    #  should we increment the offset?</div>
<div class="line">        $last_coord_id1 = $self-&gt;get_cached_value($cache_last_coord_id_name);</div>
<div class="line">        <span class="keywordflow">if</span> ( defined $last_coord_id1 and $last_coord_id1 ne $coord_id1 ) {</div>
<div class="line">            $offset++;</div>
<div class="line">            <span class="keywordflow">if</span> ( $cycle_offset and $offset &gt;= $spacing ) {</div>
<div class="line">                $offset = 0;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    $self-&gt;set_cached_value( $cache_last_coord_id_name =&gt; $coord_id1 );</div>
<div class="line">    $self-&gt;set_cached_value( $cache_offset_name        =&gt; $offset );</div>
<div class="line"></div>
<div class="line">    my $cached_nbrs = $self-&gt;get_cached_value($cache_nbr_name);</div>
<div class="line">    <span class="keywordflow">if</span> ( not $cached_nbrs ) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  cache this regardless - what matters is where it is used</span></div>
<div class="line"><span class="preprocessor"></span>        $cached_nbrs = {};</div>
<div class="line">        $self-&gt;set_cached_value( $cache_nbr_name =&gt; $cached_nbrs );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $nbrs;</div>
<div class="line">    <span class="keywordflow">if</span> (    $use_cache</div>
<div class="line">        and scalar keys %$cached_nbrs</div>
<div class="line">        and exists $cached_nbrs-&gt;{$coord_id1} )</div>
<div class="line">    {</div>
<div class="line">        $nbrs = $cached_nbrs-&gt;{$coord_id1};</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        my @groups;</div>
<div class="line">        my $cached_gps = $self-&gt;get_cached_value($cache_gp_name);</div>
<div class="line">        <span class="keywordflow">if</span> ( $use_cache and $cached_gps ) {</div>
<div class="line">            @groups = @$cached_gps;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  get in some order</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #  (should also put in a random option)</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">            <span class="keywordflow">if</span> ( $args{reverse_order} ) {</div>
<div class="line">                @groups = reverse $bd-&gt;get_groups_ref-&gt;get_element_list_sorted;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                @groups = $bd-&gt;get_groups_ref-&gt;get_element_list_sorted;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> ( $use_cache and not $verifying ) {</div>
<div class="line">                $self-&gt;set_cached_value( $cache_gp_name =&gt; \@groups );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        my $last_i = -1;</div>
<div class="line">        <span class="keywordflow">for</span> ( my $i = $offset; $i &lt;= $#groups; $i += $spacing ) {</div>
<div class="line">            my $ii = <span class="keywordtype">int</span> $i;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #print &quot;$ii &quot;;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">            next <span class="keywordflow">if</span> $ii == $last_i;    #  <span class="keywordflow">if</span> we <span class="keyword">get</span> spacings less than 1</div>
<div class="line"></div>
<div class="line">            my $gp = $groups[$ii];</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  should we skip this comparison?</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #next if ($args{ignore_after_use} and exists $cached_nbrs-&gt;{$gp});</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">            $nbrs-&gt;{$gp} = 1;</div>
<div class="line">            $last_i = $ii;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #if ($use_cache and not $verifying) {</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> ( not $verifying ) {</div>
<div class="line">            $cached_nbrs-&gt;{$coord_id1} = $nbrs;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> defined $coord_id2 ? exists $nbrs-&gt;{$coord_id2} : 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#  get the list of cached nbrs - VERY BODGY needs generalising</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a551bfeb158890c5af33c135c408e23fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_self_only </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_self_only' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_self_only-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_self_only-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_self_only-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_self_only: 9</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a551bfeb158890c5af33c135c408e23fb">sp_self_only</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $h-&gt;{coord_id1} eq $h-&gt;{coord_id2};</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a5535d7a8ddae1bf27d892d1bcfc209c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_square </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_square' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_square-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_square-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_square-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_square: 16</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a5535d7a8ddae1bf27d892d1bcfc209c7">sp_square</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $size = $args{size} / 2;</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my @x = @{ $h-&gt;{dists}{D_list} }; </div>
<div class="line">    <span class="keywordflow">foreach</span> my $dist (@x) {</div>
<div class="line">        <span class="keywordflow">return</span> 0 <span class="keywordflow">if</span> $dist &gt; $size;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 1;  #  <span class="keywordflow">if</span> we <span class="keyword">get</span> <span class="keyword">this</span> far then we are OK.</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a325884b7b1a27da29046fdb6133b60d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::sp_square_cell </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-sp_square_cell' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-sp_square_cell-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-sp_square_cell-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-sp_square_cell-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in sp_square_cell: 17</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a325884b7b1a27da29046fdb6133b60d7">sp_square_cell</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $size = $args{size} / 2;</div>
<div class="line"></div>
<div class="line">    my $h = $self-&gt;get_param(<span class="stringliteral">&#39;CURRENT_ARGS&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my @x = @{ $h-&gt;{dists}{C_list} };</div>
<div class="line">    <span class="keywordflow">foreach</span> my $dist (@x) {</div>
<div class="line">        <span class="keywordflow">return</span> 0 <span class="keywordflow">if</span> $dist &gt; $size;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  if we get this far then we are OK.</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a514b48f7b6d001a813e0c3af3a4635e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBiodiverse_1_1SpatialParams.html#a6c31a9b917e5c959c44fbe24ee0c451a">method</a> Biodiverse::SpatialParams::verify </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-verify' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-verify-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-verify-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-verify-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in verify: 130</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1SpatialParams.html#a514b48f7b6d001a813e0c3af3a4635e1">verify</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line"></div>
<div class="line">    my $msg;</div>
<div class="line">    my $SPACE = q{ };    #  looks weird, but is Perl Best Practice.</div>
<div class="line"></div>
<div class="line">    my $valid = 1;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  this needs refactoring, but watch for validity flag in opt args</span></div>
<div class="line"><span class="preprocessor"></span>    my $missing = $self-&gt;get_param(<span class="stringliteral">&#39;MISSING_ARGS&#39;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> ( $missing and scalar keys %$missing ) {</div>
<div class="line">        $msg .= <span class="stringliteral">&quot;Subs are missing required arguments\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span> my $sub ( keys %$missing ) {</div>
<div class="line">            my $sub_m = $missing-&gt;{$sub};</div>
<div class="line">            $msg .= <span class="stringliteral">&quot;$sub : &quot;</span> . join( <span class="stringliteral">&#39;, &#39;</span>, keys %$sub_m ) . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        $valid = 0;</div>
<div class="line">        $msg .= <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $missing_opt_args = $self-&gt;get_param(<span class="stringliteral">&#39;MISSING_OPT_ARGS&#39;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> ( $missing_opt_args and scalar keys %$missing_opt_args ) {</div>
<div class="line">        $msg .= <span class="stringliteral">&quot;Unused optional arguments\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span> my $sub ( sort keys %$missing_opt_args ) {</div>
<div class="line">            my $sub_m = $missing_opt_args-&gt;{$sub};</div>
<div class="line">            $msg .= <span class="stringliteral">&quot;$sub : &quot;</span> . join( <span class="stringliteral">&#39;, &#39;</span>, keys %$sub_m ) . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        $msg .= <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    my $incorrect_args = $self-&gt;get_param(<span class="stringliteral">&#39;INCORRECT_ARGS&#39;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> ( $incorrect_args and scalar keys %$incorrect_args ) {</div>
<div class="line">        $msg .= <span class="stringliteral">&quot;\nSubs have incorrectly specified arguments\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span> my $sub ( sort keys %$incorrect_args ) {</div>
<div class="line">            $msg .= $incorrect_args-&gt;{$sub} . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        $valid = 0;</div>
<div class="line">        $msg .= <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $invalid_args = $self-&gt;get_param (<span class="stringliteral">&#39;INVALID_ARGS&#39;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> ( $incorrect_args and scalar keys %$invalid_args ) {</div>
<div class="line">        $msg .= <span class="stringliteral">&quot;\nSubs have invalid arguments - they might not work as you hope.\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span> my $sub ( sort keys %$invalid_args ) {</div>
<div class="line">            my $sub_m = $invalid_args-&gt;{$sub};</div>
<div class="line">            $msg .= <span class="stringliteral">&quot;$sub : &quot;</span> . join( <span class="stringliteral">&#39;, &#39;</span>, @$sub_m ) . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        $valid = 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($valid) {</div>
<div class="line"></div>
<div class="line">        my $basedata = $args{basedata};  #  should use <span class="keyword">this</span> <span class="keywordflow">for</span> the distances</div>
<div class="line">        my $bd = $args{basedata};</div>
<div class="line"></div>
<div class="line">        $self-&gt;set_param( VERIFYING =&gt; 1 );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #my $conditions = $self-&gt;get_conditions;  #  not used in this block</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        #  Get the first two elements</span></div>
<div class="line"><span class="preprocessor"></span>        my $elements = $bd-&gt;get_groups;</div>
<div class="line">        my $element1 = $elements-&gt;[0];</div>
<div class="line">        my $element2 = scalar @$elements &gt; 1 ? $elements-&gt;[1] : $elements-&gt;[0];</div>
<div class="line"></div>
<div class="line">        my $coord_array1 =</div>
<div class="line">           $bd-&gt;get_group_element_as_array (element =&gt; $element1);</div>
<div class="line">        my $coord_array2 =</div>
<div class="line">           $bd-&gt;get_group_element_as_array (element =&gt; $element2);</div>
<div class="line"></div>
<div class="line">        my %eval_args;   </div>
<div class="line">        <span class="keywordflow">if</span> (eval {$self-&gt;is_def_query}) {  </div>
<div class="line">            %eval_args = (</div>
<div class="line">                coord_array1 =&gt; $coord_array2,</div>
<div class="line">                coord_id1    =&gt; $element2,</div>
<div class="line">                coord_id2    =&gt; $element2,</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            %eval_args = (</div>
<div class="line">                coord_array1 =&gt; $coord_array1,</div>
<div class="line">                coord_array2 =&gt; $coord_array2,</div>
<div class="line">                coord_id1    =&gt; $element1,</div>
<div class="line">                coord_id2    =&gt; $element2,</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        my $cellsizes = $bd-&gt;get_param (<span class="stringliteral">&#39;CELL_SIZES&#39;</span>);</div>
<div class="line"></div>
<div class="line">        my $success = eval {</div>
<div class="line">            $self-&gt;evaluate (</div>
<div class="line">                %eval_args,</div>
<div class="line">                cellsizes     =&gt; $cellsizes,</div>
<div class="line">                caller_object =&gt; $bd,</div>
<div class="line">                basedata      =&gt; $bd,</div>
<div class="line">            );</div>
<div class="line">        };</div>
<div class="line">        my $error  = $EVAL_ERROR;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($error) {</div>
<div class="line">            $msg = <span class="stringliteral">&quot;Syntax error:\n\n$EVAL_ERROR&quot;</span>;</div>
<div class="line">            $valid = 0;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $self-&gt;set_param( VERIFYING =&gt; undef );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my %hash = (</div>
<div class="line">        msg =&gt; <span class="stringliteral">&quot;Syntax OK\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&quot;(note that this does not\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&quot;guarantee that it will\n&quot;</span></div>
<div class="line">            . <span class="stringliteral">&#39;work as desired)&#39;</span>,</div>
<div class="line">        type =&gt; <span class="stringliteral">&#39;info&#39;</span>,</div>
<div class="line">        ret  =&gt; <span class="stringliteral">&#39;ok&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($msg) {</div>
<div class="line">        <span class="keywordflow">if</span> ($valid) {  #  append optional args messages</div>
<div class="line">            $hash{msg} = $hash{msg} . <span class="stringliteral">&quot;\n\n&quot;</span> . $msg;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {         #  flag errors</div>
<div class="line">            %hash = (</div>
<div class="line">                msg  =&gt; $msg,</div>
<div class="line">                type =&gt; <span class="stringliteral">&#39;error&#39;</span>,</div>
<div class="line">                ret  =&gt; <span class="stringliteral">&#39;error&#39;</span>,</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %hash : \%hash;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/Biodiverse/<a class="el" href="SpatialParams_8pm_source.html">SpatialParams.pm</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Biodiverse</b></li><li class="navelem"><a class="el" href="classBiodiverse_1_1SpatialParams.html">SpatialParams</a></li>
    <li class="footer">Generated on Tue Nov 5 2013 19:07:28 for Biodiverse by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
