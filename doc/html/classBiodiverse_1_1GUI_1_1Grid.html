<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Biodiverse: Biodiverse::GUI::Grid Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Biodiverse
   &#160;<span id="projectnumber">0.19</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classBiodiverse_1_1GUI_1_1Grid.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classBiodiverse_1_1GUI_1_1Grid-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Biodiverse::GUI::Grid Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Biodiverse::GUI::Grid:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classBiodiverse_1_1GUI_1_1Grid__coll__graph.png" border="0" usemap="#Biodiverse_1_1GUI_1_1Grid_coll__map" alt="Collaboration graph"/></div>
<map name="Biodiverse_1_1GUI_1_1Grid_coll__map" id="Biodiverse_1_1GUI_1_1Grid_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a75a88e1b6ff97169a457a9113d660872"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a75a88e1b6ff97169a457a9113d660872"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>progress_update_interval</b></td></tr>
<tr class="separator:a75a88e1b6ff97169a457a9113d660872"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Avaliable Methods</h2></td></tr>
<tr class="memitem:a946965bc246eaef4122a5b3ddf8f69b1"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a946965bc246eaef4122a5b3ddf8f69b1">max</a> ()</td></tr>
<tr class="separator:a946965bc246eaef4122a5b3ddf8f69b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46f25122152a0055ebe7aa44a84e4330"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a46f25122152a0055ebe7aa44a84e4330">get_colour_none</a> ()</td></tr>
<tr class="separator:a46f25122152a0055ebe7aa44a84e4330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cd9f5061f898c820ece35c0182d8491"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a7cd9f5061f898c820ece35c0182d8491">makeMark</a> ()</td></tr>
<tr class="separator:a7cd9f5061f898c820ece35c0182d8491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab34ff8c9778f8e68ab4ba2f9898fb16"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#aab34ff8c9778f8e68ab4ba2f9898fb16">format_number_for_display</a> ()</td></tr>
<tr class="separator:aab34ff8c9778f8e68ab4ba2f9898fb16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c49b200cb4b39c0f2ddce8ba2d2271"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ad7c49b200cb4b39c0f2ddce8ba2d2271">postZoom</a> ()</td></tr>
<tr class="separator:ad7c49b200cb4b39c0f2ddce8ba2d2271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae99856ee4d5b2460fe45883991fb9baf"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ae99856ee4d5b2460fe45883991fb9baf">setBaseStruct</a> ()</td></tr>
<tr class="separator:ae99856ee4d5b2460fe45883991fb9baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd0356d8134f4052bc3fb3975113878e"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#abd0356d8134f4052bc3fb3975113878e">maxmin</a> ()</td></tr>
<tr class="separator:abd0356d8134f4052bc3fb3975113878e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fca704a51a5672406823c520c22a245"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a2fca704a51a5672406823c520c22a245">setValueLabel</a> ()</td></tr>
<tr class="separator:a2fca704a51a5672406823c520c22a245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91cc10c0592e77213cd8f064f566a682"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a91cc10c0592e77213cd8f064f566a682">showLegend</a> ()</td></tr>
<tr class="separator:a91cc10c0592e77213cd8f064f566a682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc6f833301a5295b2f756a21702d240a"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#adc6f833301a5295b2f756a21702d240a">get_legend_hue</a> ()</td></tr>
<tr class="separator:adc6f833301a5295b2f756a21702d240a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fb262164b146ce78e01362c68d34ed9"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a5fb262164b146ce78e01362c68d34ed9">new</a> ()</td></tr>
<tr class="separator:a5fb262164b146ce78e01362c68d34ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5be80c3d455aaecce54951d0ec1d487"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ad5be80c3d455aaecce54951d0ec1d487">get_rtree</a> ()</td></tr>
<tr class="separator:ad5be80c3d455aaecce54951d0ec1d487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c94a0e1104884e7d7a53c05a0d3a5d7"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a2c94a0e1104884e7d7a53c05a0d3a5d7">drawMinus</a> ()</td></tr>
<tr class="separator:a2c94a0e1104884e7d7a53c05a0d3a5d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a0775b6aa0ef5da735be429da6695a3"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a1a0775b6aa0ef5da735be429da6695a3">resizeBackgroundRect</a> ()</td></tr>
<tr class="separator:a1a0775b6aa0ef5da735be429da6695a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4488b4860c8b2aa17de39b85ee5af1fb"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a4488b4860c8b2aa17de39b85ee5af1fb">setupScrollbars</a> ()</td></tr>
<tr class="separator:a4488b4860c8b2aa17de39b85ee5af1fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0ebc7237d5fc2c26219fa6aa435a08f"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ae0ebc7237d5fc2c26219fa6aa435a08f">zoomFit</a> ()</td></tr>
<tr class="separator:ae0ebc7237d5fc2c26219fa6aa435a08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a211634e9a9771cebe09d07106d9ce008"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a211634e9a9771cebe09d07106d9ce008">fitGrid</a> ()</td></tr>
<tr class="separator:a211634e9a9771cebe09d07106d9ce008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eacb23c04f55e7e35607d4c1c56b623"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a0eacb23c04f55e7e35607d4c1c56b623">units_canvas2basestruct</a> ()</td></tr>
<tr class="separator:a0eacb23c04f55e7e35607d4c1c56b623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f079bd138c2b92d42ef2b117e4cac8f"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a7f079bd138c2b92d42ef2b117e4cac8f">setLegendMinMax</a> ()</td></tr>
<tr class="separator:a7f079bd138c2b92d42ef2b117e4cac8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca830fd8fec18c11bedd99399cb23fb1"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#aca830fd8fec18c11bedd99399cb23fb1">zoomIn</a> ()</td></tr>
<tr class="separator:aca830fd8fec18c11bedd99399cb23fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8497111eedf7ce0e0985a9b68e12b3f3"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a8497111eedf7ce0e0985a9b68e12b3f3">getColourHue</a> ()</td></tr>
<tr class="separator:a8497111eedf7ce0e0985a9b68e12b3f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a316107daf700f50c83cadf80bcb006bf"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a316107daf700f50c83cadf80bcb006bf">makeLegendPixbuf</a> ()</td></tr>
<tr class="separator:a316107daf700f50c83cadf80bcb006bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c7966596fac4e5dc1209bf5e7d0329d"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a2c7966596fac4e5dc1209bf5e7d0329d">markIfExists</a> ()</td></tr>
<tr class="separator:a2c7966596fac4e5dc1209bf5e7d0329d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32a748e36124574e38082f3ec72e283e"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a32a748e36124574e38082f3ec72e283e">onMarkerEvent</a> ()</td></tr>
<tr class="separator:a32a748e36124574e38082f3ec72e283e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8fbe2ec12cfce99ed468c0ab16cada3"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ab8fbe2ec12cfce99ed468c0ab16cada3">setCalculationList</a> ()</td></tr>
<tr class="separator:ab8fbe2ec12cfce99ed468c0ab16cada3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f04266a28c5e9d29b8377f25413c6b"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a86f04266a28c5e9d29b8377f25413c6b">set_legend_lt_flag</a> ()</td></tr>
<tr class="separator:a86f04266a28c5e9d29b8377f25413c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af145ad1754d4a28b30142bb926322d23"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#af145ad1754d4a28b30142bb926322d23">getColourSaturation</a> ()</td></tr>
<tr class="separator:af145ad1754d4a28b30142bb926322d23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb083f9ddeb8e228704cf09241456c73"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#acb083f9ddeb8e228704cf09241456c73">hideLegend</a> ()</td></tr>
<tr class="separator:acb083f9ddeb8e228704cf09241456c73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17eead38473fbcd1db7ebeb8716617ff"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a17eead38473fbcd1db7ebeb8716617ff">grayoutElements</a> ()</td></tr>
<tr class="separator:a17eead38473fbcd1db7ebeb8716617ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7cf586a3805b43fd19a6fb51f120d3b"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#aa7cf586a3805b43fd19a6fb51f120d3b">setupValueLabel</a> ()</td></tr>
<tr class="separator:aa7cf586a3805b43fd19a6fb51f120d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c1fa2fcfdbf54f25bfe7e58ac2c984"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ac9c1fa2fcfdbf54f25bfe7e58ac2c984">setOverlay</a> ()</td></tr>
<tr class="separator:ac9c1fa2fcfdbf54f25bfe7e58ac2c984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5570f048f39e4b57664eb42b749a28e4"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a5570f048f39e4b57664eb42b749a28e4">zoomOut</a> ()</td></tr>
<tr class="separator:a5570f048f39e4b57664eb42b749a28e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf5382a58b1678aee708bf99a648ca13"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#aaf5382a58b1678aee708bf99a648ca13">get_colour_from_chooser</a> ()</td></tr>
<tr class="separator:aaf5382a58b1678aee708bf99a648ca13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6dc2fff9f08a2208e5e4da3b1ae6bce"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ac6dc2fff9f08a2208e5e4da3b1ae6bce">onScrollbarsScroll</a> ()</td></tr>
<tr class="separator:ac6dc2fff9f08a2208e5e4da3b1ae6bce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b62e6e3b40f7b0f0806fc0c1e0cf54c"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a9b62e6e3b40f7b0f0806fc0c1e0cf54c">loadShapefile</a> ()</td></tr>
<tr class="separator:a9b62e6e3b40f7b0f0806fc0c1e0cf54c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92038def1aae6b7f55c81a28ad40b306"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a92038def1aae6b7f55c81a28ad40b306">getBaseStruct</a> ()</td></tr>
<tr class="separator:a92038def1aae6b7f55c81a28ad40b306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ada9365be284034ed7010e4fe9f9b6d"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a8ada9365be284034ed7010e4fe9f9b6d">colour</a> ()</td></tr>
<tr class="separator:a8ada9365be284034ed7010e4fe9f9b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9a27e641e451d98e1b73c94b6467ecf"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ad9a27e641e451d98e1b73c94b6467ecf">colourCells</a> ()</td></tr>
<tr class="separator:ad9a27e641e451d98e1b73c94b6467ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cea4d602b8c0a78fbcc707dea03c555"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a2cea4d602b8c0a78fbcc707dea03c555">updateScrollbars</a> ()</td></tr>
<tr class="separator:a2cea4d602b8c0a78fbcc707dea03c555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3694f5b6c5125b9762647a4d1db56bf1"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a3694f5b6c5125b9762647a4d1db56bf1">rgb_to_hsv</a> ()</td></tr>
<tr class="separator:a3694f5b6c5125b9762647a4d1db56bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2faee8fc9879c90fe2e39e968cef9cd"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ad2faee8fc9879c90fe2e39e968cef9cd">getColourGrey</a> ()</td></tr>
<tr class="separator:ad2faee8fc9879c90fe2e39e968cef9cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a720a9fe99ec66731c3c4f8dfabb72128"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a720a9fe99ec66731c3c4f8dfabb72128">set_cell_outline_colour</a> ()</td></tr>
<tr class="separator:a720a9fe99ec66731c3c4f8dfabb72128"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12b8ecffcaaf6b6d4fc802235064fa04"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a12b8ecffcaaf6b6d4fc802235064fa04">onSizeAllocate</a> ()</td></tr>
<tr class="separator:a12b8ecffcaaf6b6d4fc802235064fa04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ba6e6414dcae02826b701e02c98724b"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a2ba6e6414dcae02826b701e02c98724b">set_legend_gt_flag</a> ()</td></tr>
<tr class="separator:a2ba6e6414dcae02826b701e02c98724b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a4d9ee015261076b7a5b4d324b1f7ef"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a6a4d9ee015261076b7a5b4d324b1f7ef">getColour</a> ()</td></tr>
<tr class="separator:a6a4d9ee015261076b7a5b4d324b1f7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6404705342d23cc491eb3ede7a287630"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a6404705342d23cc491eb3ede7a287630">drawCircle</a> ()</td></tr>
<tr class="separator:a6404705342d23cc491eb3ede7a287630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61d5a576ebec48fcb9276b6ce2109691"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a61d5a576ebec48fcb9276b6ce2109691">onEvent</a> ()</td></tr>
<tr class="separator:a61d5a576ebec48fcb9276b6ce2109691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1583e7c6d19b35ef6bd5f85f5d8482a"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ac1583e7c6d19b35ef6bd5f85f5d8482a">reposition</a> ()</td></tr>
<tr class="separator:ac1583e7c6d19b35ef6bd5f85f5d8482a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac81b8f561854a043458e7b85527f8a"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a3ac81b8f561854a043458e7b85527f8a">endSelection</a> ()</td></tr>
<tr class="separator:a3ac81b8f561854a043458e7b85527f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae13a9ad1b58b6d9aeb99127d51a975a1"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ae13a9ad1b58b6d9aeb99127d51a975a1">destroy</a> ()</td></tr>
<tr class="separator:ae13a9ad1b58b6d9aeb99127d51a975a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a195b24dbb741998c20614026412501f3"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a195b24dbb741998c20614026412501f3">onScroll</a> ()</td></tr>
<tr class="separator:a195b24dbb741998c20614026412501f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54327966b997c4b241a8a53306b17506"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a54327966b997c4b241a8a53306b17506">rescale_grey</a> ()</td></tr>
<tr class="separator:a54327966b997c4b241a8a53306b17506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a89852abe040c2d28ce52ed0256dd4"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a78a89852abe040c2d28ce52ed0256dd4">setLegendMode</a> ()</td></tr>
<tr class="separator:a78a89852abe040c2d28ce52ed0256dd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0766f87488796d4cf0814ca9b2028d8c"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a0766f87488796d4cf0814ca9b2028d8c">getCellSizes</a> ()</td></tr>
<tr class="separator:a0766f87488796d4cf0814ca9b2028d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0660313e18bdd06c91f57e8bc564ba45"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a0660313e18bdd06c91f57e8bc564ba45">findMaxMin</a> ()</td></tr>
<tr class="separator:a0660313e18bdd06c91f57e8bc564ba45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae39bf845c65dacd94c7a1a3e37459522"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#ae39bf845c65dacd94c7a1a3e37459522">hsv_to_rgb</a> ()</td></tr>
<tr class="separator:ae39bf845c65dacd94c7a1a3e37459522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48611865fed2e892a15191dca7059316"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#a48611865fed2e892a15191dca7059316">onBackgroundEvent</a> ()</td></tr>
<tr class="separator:a48611865fed2e892a15191dca7059316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedaa13e0d9d3fb79e4d7a8103599f74c"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html#aedaa13e0d9d3fb79e4d7a8103599f74c">setLegendHue</a> ()</td></tr>
<tr class="separator:aedaa13e0d9d3fb79e4d7a8103599f74c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><ul>
<li>
<p class="startli"><a class="anchor" id="item_frame"></a><b>frame</b> </p>
<p>The GtkFrame to hold the canvas</p>
<p class="endli"></p>
</li>
<li>
<a class="anchor" id="item_hscroll"></a><b>hscroll</b>  </li>
<li>
<p class="startli"><a class="anchor" id="item_vscroll"></a><b>vscroll</b> </p>
<p>The scrollbars for the canvas</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item_show_legend"></a><b>show_legend</b> </p>
<p>Whether to show the legend colour-bar on the right. Used when spatial indices are plotted</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><a class="anchor" id="item_show_value"></a><b>show_value</b> </p>
<p>Whether to show a label in the top-left corner. It can be changed by calling setValueLabel</p>
<p class="endli"></p>
</li>
<li>
<a class="anchor" id="item_hover_func"></a><b>hover_func</b>  </li>
<li>
<p class="startli"><a class="anchor" id="item_click_func"></a><b>click_func</b> </p>
<p>Closures that will be invoked with the grid cell's element name whenever cell is hovered over or clicked</p>
<p class="endli"></p>
</li>
</ul>
<p>Sets the hue for the saturation (constant-hue) colouring mode</p>

<p>Definition at line <a class="el" href="Grid_8pm_source.html#l00081">81</a> of file <a class="el" href="Grid_8pm_source.html">Grid.pm</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a8ada9365be284034ed7010e4fe9f9b6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::colour </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-colour' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-colour-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-colour-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-colour-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in colour: 22</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a8ada9365be284034ed7010e4fe9f9b6d">colour</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $callback = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#print &quot;Colouring &quot; . (scalar keys %{$self-&gt;{cells}}) . &quot; cells\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">foreach</span> my $cell (values %{$self-&gt;{cells}}) {</div>
<div class="line"></div>
<div class="line">        my $colour_ref = &amp;$callback($cell-&gt;[INDEX_ELEMENT]);</div>
<div class="line">        <span class="keywordflow">if</span> (not defined $colour_ref) {</div>
<div class="line"><span class="preprocessor">            #warn $cell-&gt;[INDEX_ELEMENT] . &quot; is undef\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>            $colour_ref = CELL_WHITE;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #if (not $colour_ref-&gt;equal($cell-&gt;[INDEX_COLOUR])) {</span></div>
<div class="line"><span class="preprocessor"></span>            $cell-&gt;[INDEX_RECT]-&gt;set(<span class="stringliteral">&#39;fill-color-gdk&#39;</span> =&gt; $colour_ref);</div>
<div class="line">            $cell-&gt;[INDEX_COLOUR] = $colour_ref;</div>
<div class="line"><span class="preprocessor">        #}</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad9a27e641e451d98e1b73c94b6467ecf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::colourCells </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-colourCells' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-colourCells-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-colourCells-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-colourCells-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in colourCells: 16</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ad9a27e641e451d98e1b73c94b6467ecf">colourCells</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  default to black if an analysis is specified, white otherwise</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $colour_none = shift || (defined $self-&gt;{analysis} ? CELL_BLACK : CELL_WHITE);</span></div>
<div class="line"><span class="preprocessor"></span>    my $colour_none = $self-&gt;get_colour_none;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $cell (values %{$self-&gt;{cells}}) {</div>
<div class="line">        my $val = defined $self-&gt;{analysis} ? $cell-&gt;[INDEX_VALUES]{$self-&gt;{analysis}} : undef;</div>
<div class="line">        my $rect = $cell-&gt;[INDEX_RECT];</div>
<div class="line">        my $colour = defined $val ? $self-&gt;getColour($val, $self-&gt;{min}, $self-&gt;{<a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a946965bc246eaef4122a5b3ddf8f69b1">max</a>}) : $colour_none;</div>
<div class="line">        $rect-&gt;set(<span class="stringliteral">&#39;fill-color-gdk&#39;</span>,  $colour);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ae13a9ad1b58b6d9aeb99127d51a975a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-destroy' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-destroy-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-destroy-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-destroy-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in destroy: 43</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ae13a9ad1b58b6d9aeb99127d51a975a1">destroy</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Destroy cell groups</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ($self-&gt;{shapefile_group}) {</div>
<div class="line">        $self-&gt;{shapefile_group}-&gt;destroy();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;{cells_group}) {</div>
<div class="line">        $self-&gt;{cells_group}-&gt;destroy();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;{legend}) {</div>
<div class="line">        $self-&gt;{legend}-&gt;destroy();</div>
<div class="line">        <span class="keyword">delete</span> $self-&gt;{legend};</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> my $i (0..3) {</div>
<div class="line">            $self-&gt;{marks}[$i]-&gt;destroy();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $self-&gt;{value_group}-&gt;destroy <span class="keywordflow">if</span> $self-&gt;{value_group};</div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{value_group};</div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{value_text};</div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{value_rect};</div>
<div class="line"></div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{marks};</div>
<div class="line"></div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{hover_func};  #??? not sure <span class="keywordflow">if</span> helps</div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{click_func};  #??? not sure <span class="keywordflow">if</span> helps</div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{select_func}; #??? not sure <span class="keywordflow">if</span> helps</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{cells_group}; #!!!! Without <span class="keyword">this</span>, GnomeCanvas __crashes__</div>
<div class="line"><span class="preprocessor">                                # Apparently, a reference cycle prevents it</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                                #   from being destroyed properly,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                                # and a bug makes it repaint in a half-dead state</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">delete</span> $self-&gt;{shapefile_group};</div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{back_rect};</div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{cells};</div>
<div class="line"></div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{canvas};</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a6404705342d23cc491eb3ede7a287630"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::drawCircle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-drawCircle' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-drawCircle-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-drawCircle-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-drawCircle-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in drawCircle: 18</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a6404705342d23cc491eb3ede7a287630">drawCircle</a> {</div>
<div class="line">    my ($self, $group) = @_;</div>
<div class="line">    my $offset_x = (CELL_SIZE_X - CIRCLE_DIAMETER) / 2;</div>
<div class="line">    my $offset_y = ($self-&gt;{cell_size_y} - CIRCLE_DIAMETER) / 2;</div>
<div class="line"></div>
<div class="line">    my $item = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">        $group,</div>
<div class="line">        <span class="stringliteral">&#39;Gnome2::Canvas::Ellipse&#39;</span>,</div>
<div class="line">        x1                =&gt; $offset_x,</div>
<div class="line">        y1                =&gt; $offset_y,</div>
<div class="line">        x2                =&gt; $offset_x + CIRCLE_DIAMETER,</div>
<div class="line">        y2                =&gt; $offset_y + CIRCLE_DIAMETER,</div>
<div class="line">        fill_color_gdk    =&gt; CELL_BLACK,</div>
<div class="line">        outline_color_gdk =&gt; CELL_BLACK,</div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">    #$item-&gt;signal_connect_swapped(event =&gt; \&amp;onMarkerEvent, $self);</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> $item;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2c94a0e1104884e7d7a53c05a0d3a5d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::drawMinus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-drawMinus' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-drawMinus-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-drawMinus-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-drawMinus-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in drawMinus: 18</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a2c94a0e1104884e7d7a53c05a0d3a5d7">drawMinus</a> {</div>
<div class="line">    my ($self, $group) = @_;</div>
<div class="line">    my $offset_y = ($self-&gt;{cell_size_y} - 1) / 2;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">        $group,</div>
<div class="line">        <span class="stringliteral">&#39;Gnome2::Canvas::Line&#39;</span>,</div>
<div class="line">        points =&gt; [</div>
<div class="line">            MARK_X_OFFSET,</div>
<div class="line">            $offset_y,</div>
<div class="line">            CELL_SIZE_X - MARK_X_OFFSET,</div>
<div class="line">            $offset_y,</div>
<div class="line">        ],</div>
<div class="line">        fill_color_gdk =&gt; CELL_BLACK,</div>
<div class="line">        width_units =&gt; 1,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a3ac81b8f561854a043458e7b85527f8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::endSelection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-endSelection' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-endSelection-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-endSelection-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-endSelection-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in endSelection: 49</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a3ac81b8f561854a043458e7b85527f8a">endSelection</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my ($x_start, $y_start, $x_end, $y_end) = @_;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Find selected elements</span></div>
<div class="line"><span class="preprocessor"></span>    my $yoffset = $self-&gt;{height_units} - 2 * BORDER_SIZE;</div>
<div class="line"></div>
<div class="line">    my @rect = (</div>
<div class="line">        $x_start - BORDER_SIZE,</div>
<div class="line">        $yoffset - $y_start,</div>
<div class="line">        $x_end - BORDER_SIZE,</div>
<div class="line">        $yoffset - $y_end,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make sure end distances are greater than start distances</span></div>
<div class="line"><span class="preprocessor"></span>    my $tmp;</div>
<div class="line">    <span class="keywordflow">if</span> ($rect[0] &gt; $rect[2]) {</div>
<div class="line">        $tmp = $rect[0];</div>
<div class="line">        $rect[0] = $rect[2];</div>
<div class="line">        $rect[2] = $tmp;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> ($rect[1] &gt; $rect[3]) {</div>
<div class="line">        $tmp = $rect[1];</div>
<div class="line">        $rect[1] = $rect[3];</div>
<div class="line">        $rect[3] = $tmp;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my @rect_baseunits = (</div>
<div class="line">        $self-&gt;units_canvas2basestruct ($rect[0], $rect[1]),</div>
<div class="line">        $self-&gt;units_canvas2basestruct ($rect[2], $rect[3]),</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    my $elements = [];</div>
<div class="line"><span class="preprocessor">    #$self-&gt;{rtree}-&gt;query_partly_within_rect(@rect, $elements);</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{rtree}-&gt;query_partly_within_rect(@rect_baseunits, $elements);</div>
<div class="line"><span class="preprocessor">    #my $elements = $self-&gt;{rtree}-&gt;getEnclosedObjects (@rect);</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> (0) {</div>
<div class="line">        print <span class="stringliteral">&quot;[Grid] selection rect: @rect\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">for</span> my $element (@$elements) {</div>
<div class="line">            print <span class="stringliteral">&quot;[Grid]\tselected: $element\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # call callback</span></div>
<div class="line"><span class="preprocessor"></span>    my $f = $self-&gt;{select_func};</div>
<div class="line">    &amp;$f($elements);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a0660313e18bdd06c91f57e8bc564ba45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::findMaxMin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-findMaxMin' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-findMaxMin-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-findMaxMin-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-findMaxMin-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in findMaxMin: 18</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a0660313e18bdd06c91f57e8bc564ba45">findMaxMin</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $data = shift;</div>
<div class="line">    my ($minX, $maxX, $minY, $maxY);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> ($data-&gt;get_element_list) {</div>
<div class="line"></div>
<div class="line">        my ($x, $y) = $data-&gt;get_element_name_coord (element =&gt; $_);</div>
<div class="line"></div>
<div class="line">        $minX = $x <span class="keywordflow">if</span> ( (not defined $minX) || $x &lt; $minX);</div>
<div class="line">        $minY = $y <span class="keywordflow">if</span> ( (not defined $minY) || $y &lt; $minY);</div>
<div class="line"></div>
<div class="line">        $maxX = $x <span class="keywordflow">if</span> ( (not defined $maxX) || $x &gt; $maxX);</div>
<div class="line">        $maxY = $y <span class="keywordflow">if</span> ( (not defined $maxY) || $y &gt; $maxY);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> ($minX, $maxX, $minY, $maxY);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a211634e9a9771cebe09d07106d9ce008"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::fitGrid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-fitGrid' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-fitGrid-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fitGrid-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fitGrid-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in fitGrid: 11</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a211634e9a9771cebe09d07106d9ce008">fitGrid</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my $ppu_width = $self-&gt;{width_px} / $self-&gt;{width_units};</div>
<div class="line">    my $ppu_height = $self-&gt;{height_px} / $self-&gt;{height_units};</div>
<div class="line">    my $min_ppu = $ppu_width &lt; $ppu_height ? $ppu_width : $ppu_height;</div>
<div class="line">    $self-&gt;{canvas}-&gt;set_pixels_per_unit( $min_ppu );</div>
<div class="line"><span class="preprocessor">    #print &quot;[Grid] Setting grid zoom (pixels per unit) to $min_ppu\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aab34ff8c9778f8e68ab4ba2f9898fb16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::format_number_for_display </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-format_number_for_display' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-format_number_for_display-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-format_number_for_display-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-format_number_for_display-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in format_number_for_display: 14</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#aab34ff8c9778f8e68ab4ba2f9898fb16">format_number_for_display</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my %args = @_;</div>
<div class="line">    my $val = $args{number};</div>
<div class="line"></div>
<div class="line">    my $text = sprintf (<span class="stringliteral">&#39;%.4f&#39;</span>, $val); # round to 4 d.p.</div>
<div class="line">    <span class="keywordflow">if</span> ($text == 0) {</div>
<div class="line">        $text = sprintf (<span class="stringliteral">&#39;%.2e&#39;</span>, $val);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> ($text == 0) {</div>
<div class="line">        $text = 0;  #  make sure it is 0 and not 0.00e+000</div>
<div class="line">    };</div>
<div class="line">    <span class="keywordflow">return</span> $text;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aaf5382a58b1678aee708bf99a648ca13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::get_colour_from_chooser </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_colour_from_chooser' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_colour_from_chooser-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_colour_from_chooser-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_colour_from_chooser-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_colour_from_chooser: 20</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#aaf5382a58b1678aee708bf99a648ca13">get_colour_from_chooser</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line">    my $dialog = Gtk2::ColorSelectionDialog-&gt;new (<span class="stringliteral">&#39;Select a color&#39;</span>);</div>
<div class="line">    my $c;</div>
<div class="line">    <span class="keywordflow">if</span> (<span class="stringliteral">&#39;ok&#39;</span> eq $dialog-&gt;run) {</div>
<div class="line">        $c = $dialog-&gt;colorsel-&gt;get_current_color;</div>
<div class="line">    }</div>
<div class="line">    $dialog-&gt;destroy;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #if ($c) {</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    my %colours = (</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #        red =&gt; $c-&gt;red,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #        green =&gt; $c-&gt;green,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #        blue =&gt; $c-&gt;blue,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    );</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    print %colours; </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #}</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> $c;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a46f25122152a0055ebe7aa44a84e4330"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::get_colour_none </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_colour_none' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_colour_none-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_colour_none-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_colour_none-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_colour_none: 12</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a46f25122152a0055ebe7aa44a84e4330">get_colour_none</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $colour_none = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  default to black if an analysis is specified, white otherwise</span></div>
<div class="line"><span class="preprocessor"></span>    my $null    = $self-&gt;{colour_none} || CELL_BLACK;</div>
<div class="line">    my $default = defined $self-&gt;{analysis} ? $null : CELL_WHITE;</div>
<div class="line"></div>
<div class="line">    $colour_none ||= $default;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $colour_none;    </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="adc6f833301a5295b2f756a21702d240a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::get_legend_hue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_legend_hue' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_legend_hue-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_legend_hue-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_legend_hue-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_legend_hue: 4</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#adc6f833301a5295b2f756a21702d240a">get_legend_hue</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;{hue};</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad5be80c3d455aaecce54951d0ec1d487"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::get_rtree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-get_rtree' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-get_rtree-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_rtree-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_rtree-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in get_rtree: 18</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ad5be80c3d455aaecce54951d0ec1d487">get_rtree</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  return if we have one</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> $self-&gt;{rtree} <span class="keywordflow">if</span> ($self-&gt;{rtree});</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  check basestruct</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{rtree} = $self-&gt;{base_struct}-&gt;get_param(<span class="stringliteral">&#39;RTREE&#39;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;{rtree} <span class="keywordflow">if</span> ($self-&gt;{rtree});</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  otherwise build it ourselves and cache it</span></div>
<div class="line"><span class="preprocessor"></span>    my $rtree = Tree::R-&gt;new();</div>
<div class="line">    $self-&gt;{rtree} = $rtree;</div>
<div class="line">    $self-&gt;{base_struct}-&gt;set_param (RTREE =&gt; $rtree);</div>
<div class="line">    $self-&gt;{build_rtree} = 1;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;{rtree};</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a92038def1aae6b7f55c81a28ad40b306"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::getBaseStruct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getBaseStruct' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-getBaseStruct-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getBaseStruct-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getBaseStruct-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in getBaseStruct: 4</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a92038def1aae6b7f55c81a28ad40b306">getBaseStruct</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;{base_struct};</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a0766f87488796d4cf0814ca9b2028d8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::getCellSizes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getCellSizes' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-getCellSizes-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getCellSizes-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getCellSizes-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in getCellSizes: 48</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a0766f87488796d4cf0814ca9b2028d8c">getCellSizes</a> {</div>
<div class="line">    my $data = $_[1];</div>
<div class="line"><span class="preprocessor">    #my ($cellX, $cellY) = @{$data-&gt;get_param(&quot;CELL_SIZES&quot;)};</span></div>
<div class="line"><span class="preprocessor"></span>    my @cell_sizes = @{$data-&gt;get_param(<span class="stringliteral">&quot;CELL_SIZES&quot;</span>)};  #  work on a copy</div>
<div class="line"><span class="preprocessor">    #my $cellWidth = 0;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my $i = 0;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $axis (@cell_sizes) {</div>
<div class="line">        <span class="keywordflow">if</span> ($axis == 0) {  </div>
<div class="line"><span class="preprocessor">            # If zero size, we want to display every point</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # Fast dodgy method for computing cell size</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # 1. Sort coordinates</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # 2. Find successive differences</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # 3. Sort differences</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # 4. Make cells square with median distances</span></div>
<div class="line"><span class="preprocessor"></span>    </div>
<div class="line">            print <span class="stringliteral">&quot;[Grid] Calculating minimal cell size for axis $i\n&quot;</span>;</div>
<div class="line">    </div>
<div class="line">            my $elts = $data-&gt;get_element_hash();</div>
<div class="line">            my %axis_coords;  #  want a list of all the unique coords on <span class="keyword">this</span> axis</div>
<div class="line">            <span class="keywordflow">foreach</span> my $element (keys %$elts) {</div>
<div class="line">                my @axes = $data-&gt;get_element_name_as_array(element =&gt; $element);</div>
<div class="line">                $axis_coords{$axes[$i]} = 1; </div>
<div class="line">            }</div>
<div class="line">            </div>
<div class="line">            my $j = 0;</div>
<div class="line">            my @array = sort {$a &lt;=&gt; $b} keys %axis_coords;</div>
<div class="line"><span class="preprocessor">            #print &quot;@array\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>            my @diffs;</div>
<div class="line">            <span class="keywordflow">foreach</span> my $i (1 .. $#array) {</div>
<div class="line">                my $diff = abs( $array[$i] - $array[$i-1]);</div>
<div class="line">                push @diffs, $diff;</div>
<div class="line">            }</div>
<div class="line">            </div>
<div class="line">            @diffs = sort {$a &lt;=&gt; $b} @diffs;</div>
<div class="line">            $cell_sizes[$i] = ($diffs[int ($#diffs / 2)] || 0);</div>
<div class="line">            $j++;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">            #$cellWidth = 2; # If have zero cell size, make squares more visible  NOW HANDLED ELSEWHERE</span></div>
<div class="line"><span class="preprocessor"></span>            </div>
<div class="line">        }</div>
<div class="line">        elsif ($axis &lt; 0) {  #  really should loop over each axis</div>
<div class="line">            $cell_sizes[$i] = 1;</div>
<div class="line"><span class="preprocessor">            #$cellWidth = 2;</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line">        $i++;</div>
<div class="line">    }</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a6a4d9ee015261076b7a5b4d324b1f7ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::getColour </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getColour' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-getColour-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getColour-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getColour-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in getColour: 26</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a6a4d9ee015261076b7a5b4d324b1f7ef">getColour</a> {</div>
<div class="line">    my ($self, $val, $min, $max) = @_;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (defined $min and $val &lt; $min) {</div>
<div class="line">        $val = $min;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (defined $max and $val &gt; $max) {</div>
<div class="line">        $val = $max;</div>
<div class="line">    }</div>
<div class="line">    my @args = ($val, $min, $max);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span>    ($self-&gt;{legend_mode} eq <span class="stringliteral">&#39;Hue&#39;</span>) {</div>
<div class="line">        <span class="keywordflow">return</span> $self-&gt;getColourHue(@args);</div>
<div class="line">    }</div>
<div class="line">    elsif ($self-&gt;{legend_mode} eq <span class="stringliteral">&#39;Sat&#39;</span>) {</div>
<div class="line">        <span class="keywordflow">return</span> $self-&gt;getColourSaturation(@args);</div>
<div class="line">    }</div>
<div class="line">    elsif ($self-&gt;{legend_mode} eq <span class="stringliteral">&#39;Grey&#39;</span>) {</div>
<div class="line">        <span class="keywordflow">return</span> $self-&gt;getColourGrey(@args);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        croak <span class="stringliteral">&quot;Unknown colour system: &quot;</span> . $self-&gt;{legend_mode} . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad2faee8fc9879c90fe2e39e968cef9cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::getColourGrey </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getColourGrey' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-getColourGrey-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getColourGrey-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getColourGrey-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in getColourGrey: 23</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ad2faee8fc9879c90fe2e39e968cef9cd">getColourGrey</a> {</div>
<div class="line">    my ($self, $val, $min, $max) = @_;</div>
<div class="line">    </div>
<div class="line">    my $sat;</div>
<div class="line">    <span class="keywordflow">if</span> (! defined $max || ! defined $min) {</div>
<div class="line">        <span class="keywordflow">return</span> Gtk2::Gdk::Color-&gt;new(0, 0, 0);</div>
<div class="line"><span class="preprocessor">        #return CELL_BLACK;</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line">    elsif ($max != $min) {</div>
<div class="line">        <span class="keywordflow">return</span> Gtk2::Gdk::Color-&gt;new(0, 0, 0)</div>
<div class="line">          <span class="keywordflow">if</span> ! defined $val;</div>
<div class="line">        </div>
<div class="line">        $sat = ($val - $min) / ($max - $min);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $sat = 1;</div>
<div class="line">    }</div>
<div class="line">    $sat *= 255;</div>
<div class="line">    $sat = $self-&gt;rescale_grey($sat);  #  don<span class="stringliteral">&#39;t use all the shades</span></div>
<div class="line"><span class="stringliteral">    $sat *= 257;</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral">    return Gtk2::Gdk::Color-&gt;new($sat, $sat, $sat);</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a8497111eedf7ce0e0985a9b68e12b3f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::getColourHue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getColourHue' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-getColourHue-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getColourHue-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getColourHue-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in getColourHue: 26</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a8497111eedf7ce0e0985a9b68e12b3f3">getColourHue</a> {</div>
<div class="line">    my ($self, $val, $min, $max) = @_;</div>
<div class="line"><span class="preprocessor">    # We use the following system:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #   Linear interpolation between min...max</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #   HUE goes from 180 to 0 as val goes from min to max</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #   Saturation, Brightness are 1</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    my $hue;</div>
<div class="line">    <span class="keywordflow">if</span> (! defined $max || ! defined $min) {</div>
<div class="line">        <span class="keywordflow">return</span> Gtk2::Gdk::Color-&gt;new(0, 0, 0);</div>
<div class="line"><span class="preprocessor">        #return CELL_BLACK;</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line">    elsif ($max != $min) {</div>
<div class="line">        <span class="keywordflow">return</span> Gtk2::Gdk::Color-&gt;new(0, 0, 0) <span class="keywordflow">if</span> ! defined $val;</div>
<div class="line">        $hue = ($val - $min) / ($max - $min) * 180;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $hue = 0;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    $hue = int(180 - $hue); # reverse 0..180 to 180..0 (<span class="keyword">this</span> makes high values red)</div>
<div class="line">    </div>
<div class="line">    my ($r, $g, $b) = <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ae39bf845c65dacd94c7a1a3e37459522">hsv_to_rgb</a>($hue, 1, 1);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> Gtk2::Gdk::Color-&gt;new($r*257, $g*257, $b*257);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="af145ad1754d4a28b30142bb926322d23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::getColourSaturation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getColourSaturation' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-getColourSaturation-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getColourSaturation-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getColourSaturation-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in getColourSaturation: 22</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#af145ad1754d4a28b30142bb926322d23">getColourSaturation</a> {</div>
<div class="line">    my ($self, $val, $min, $max) = @_;</div>
<div class="line"><span class="preprocessor">    #   Linear interpolation between min...max</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #   SATURATION goes from 0 to 1 as val goes from min to max</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #   Hue is variable, Brightness 1</span></div>
<div class="line"><span class="preprocessor"></span>    my $sat;</div>
<div class="line">    <span class="keywordflow">if</span> (! defined $max || ! defined $min) {</div>
<div class="line">        <span class="keywordflow">return</span> Gtk2::Gdk::Color-&gt;new(0, 0, 0);</div>
<div class="line"><span class="preprocessor">        #return CELL_BLACK;</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line">    elsif ($max != $min) {</div>
<div class="line">        <span class="keywordflow">return</span> Gtk2::Gdk::Color-&gt;new(0, 0, 0) <span class="keywordflow">if</span> ! defined $val;</div>
<div class="line">        $sat = ($val - $min) / ($max - $min);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        $sat = 1;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    my ($r, $g, $b) = <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ae39bf845c65dacd94c7a1a3e37459522">hsv_to_rgb</a>($self-&gt;{hue}, $sat, 1);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> Gtk2::Gdk::Color-&gt;new($r*257, $g*257, $b*257);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a17eead38473fbcd1db7ebeb8716617ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::grayoutElements </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-grayoutElements' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-grayoutElements-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-grayoutElements-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-grayoutElements-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in grayoutElements: 18</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a17eead38473fbcd1db7ebeb8716617ff">grayoutElements</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # ed: actually just white works better - leaving this in just in case is handy elsewhere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # This is from the GnomeCanvas demo</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $gray50_width = 4;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $gray50_height = 4;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $gray50_bits = pack &quot;CC&quot;, 0x80, 0x01, 0x80, 0x01;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $stipple = Gtk2::Gdk::Bitmap-&gt;create_from_data (undef, $gray50_bits, $gray50_width, $gray50_height);</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">foreach</span> my $cell (values %{$self-&gt;{cells}}) {</div>
<div class="line">        my $rect = $cell-&gt;[INDEX_RECT];</div>
<div class="line">        $rect-&gt;set(<span class="stringliteral">&#39;fill-color&#39;</span>, <span class="stringliteral">&#39;#FFFFFF&#39;</span>); # , <span class="stringliteral">&#39;fill-stipple&#39;</span>, $stipple);</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="acb083f9ddeb8e228704cf09241456c73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::hideLegend </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-hideLegend' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-hideLegend-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-hideLegend-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-hideLegend-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in hideLegend: 15</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#acb083f9ddeb8e228704cf09241456c73">hideLegend</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;{legend}) {</div>
<div class="line">        $self-&gt;{legend}-&gt;destroy();</div>
<div class="line">        <span class="keyword">delete</span> $self-&gt;{legend};</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> my $i (0..3) {</div>
<div class="line">            $self-&gt;{marks}[$i]-&gt;destroy();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">delete</span> $self-&gt;{marks};</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ae39bf845c65dacd94c7a1a3e37459522"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::hsv_to_rgb </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-hsv_to_rgb' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-hsv_to_rgb-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-hsv_to_rgb-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-hsv_to_rgb-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in hsv_to_rgb: 22</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ae39bf845c65dacd94c7a1a3e37459522">hsv_to_rgb</a> {</div>
<div class="line">    my($h, $s, $v) = @_;</div>
<div class="line">    $v = $v &gt;= 1.0 ? 255 : $v * 256;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Grey image.</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span>((<span class="keywordtype">int</span>($v)) x 3) <span class="keywordflow">if</span> ($s == 0);</div>
<div class="line"></div>
<div class="line">    $h /= 60;</div>
<div class="line">    my $i = int($h);</div>
<div class="line">    my $f = $h - int($i);</div>
<div class="line">    my $p = int($v * (1 - $s));</div>
<div class="line">    my $q = int($v * (1 - $s * $f));</div>
<div class="line">    my $t = int($v * (1 - $s * (1 - $f)));</div>
<div class="line">    $v = int($v);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>   ($i == 0) { <span class="keywordflow">return</span>($v, $t, $p); }</div>
<div class="line">    elsif($i == 1) { <span class="keywordflow">return</span>($q, $v, $p); }</div>
<div class="line">    elsif($i == 2) { <span class="keywordflow">return</span>($p, $v, $t); }</div>
<div class="line">    elsif($i == 3) { <span class="keywordflow">return</span>($p, $q, $v); }</div>
<div class="line">    elsif($i == 4) { <span class="keywordflow">return</span>($t, $p, $v); }</div>
<div class="line">    <span class="keywordflow">else</span>           { <span class="keywordflow">return</span>($v, $p, $q); }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a9b62e6e3b40f7b0f0806fc0c1e0cf54c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::loadShapefile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-loadShapefile' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-loadShapefile-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-loadShapefile-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-loadShapefile-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in loadShapefile: 86</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a9b62e6e3b40f7b0f0806fc0c1e0cf54c">loadShapefile</a> {</div>
<div class="line">    my ($self, $minX, $minY, $maxX, $maxY, $cellX, $cellY, $shapefile, $colour) = @_;</div>
<div class="line"></div>
<div class="line">    my @rect = (</div>
<div class="line">        $minX - $cellX,</div>
<div class="line">        $minY - $cellY,</div>
<div class="line">        $maxX + $cellX,</div>
<div class="line">        $maxY + $cellY,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Get shapes within visible region - allow for cell extents</span></div>
<div class="line"><span class="preprocessor"></span>    my @shapes;</div>
<div class="line">    @shapes = $shapefile-&gt;shapes_in_area (@rect);</div>
<div class="line"><span class="preprocessor">    #  try to get all, but canvas ignores those outside the area...</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #@shapes = $shapefile-&gt;shapes_in_area ($shapefile-&gt;bounds);</span></div>
<div class="line"><span class="preprocessor"></span>    </div>
<div class="line">    my $num = @shapes;</div>
<div class="line">    print <span class="stringliteral">&quot;[Grid] Shapes within plot area: $num\n&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Work out how far away a point has to be from the previous point</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # to not get clipped - REDUNDANT NOW</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # This will massively reduce detail when we&#39;re zoomed out</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $ppu = $self-&gt;{canvas}-&gt;get_pixels_per_unit();</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $min_distance = 1 / $ppu * 3; # don&#39;t draw points within 3px of each other</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $min_distance2 = $min_distance * $min_distance;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    ##print &quot;[Grid] minimum point distance - $min_distance\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    my $unit_multiplier_x = CELL_SIZE_X / $cellX;</div>
<div class="line">    my $unit_multiplier_y = $self-&gt;{cell_size_y} / $cellY;</div>
<div class="line">    my $unit_multiplier2  = $unit_multiplier_x * $unit_multiplier_x; #FIXME: maybe take <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a946965bc246eaef4122a5b3ddf8f69b1">max</a> of _x,_y</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Put it into a group so that it can be deleted more easily</span></div>
<div class="line"><span class="preprocessor"></span>    my $shapefile_group = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">        $self-&gt;{cells_group},</div>
<div class="line">        <span class="stringliteral">&#39;Gnome2::Canvas::Group&#39;</span>,</div>
<div class="line">        x =&gt; 0,</div>
<div class="line">        y =&gt; 0,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    $shapefile_group-&gt;raise_to_top();</div>
<div class="line">    $self-&gt;{shapefile_group} = $shapefile_group;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Add all shapes</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $shapeid (@shapes) {</div>
<div class="line"><span class="preprocessor">        #my $shape = $shapefile-&gt;get_shape($shapeid);</span></div>
<div class="line"><span class="preprocessor"></span>        my $shape = $shapefile-&gt;get_shp_record($shapeid);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Make polygon from each &quot;part&quot;</span></div>
<div class="line"><span class="preprocessor"></span>        BY_PART:</div>
<div class="line">        <span class="keywordflow">foreach</span> my $part (1 .. $shape-&gt;num_parts) {</div>
<div class="line"></div>
<div class="line">            my @plot_points;    # x,y coordinates that will be given to canvas</div>
<div class="line">            my @segments = $shape-&gt;get_segments($part);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  add the points from all of the vertices</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #  Geo::ShapeFile gives them to us as vertex pairs</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #  so extract the first point from each</span></div>
<div class="line"><span class="preprocessor"></span>            POINT_TO_ADD:</div>
<div class="line">            <span class="keywordflow">foreach</span> my $vertex (@segments) {</div>
<div class="line">                push @plot_points, (</div>
<div class="line">                    ($vertex-&gt;[0]-&gt;{X} - $minX) * $unit_multiplier_x,</div>
<div class="line">                    ($vertex-&gt;[0]-&gt;{Y} - $minY) * $unit_multiplier_y,</div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  get the end of the line</span></div>
<div class="line"><span class="preprocessor"></span>            my $current_vertex = $segments[-1];</div>
<div class="line">            push @plot_points, (</div>
<div class="line">                ($current_vertex-&gt;[1]-&gt;{X} - $minX) * $unit_multiplier_x,</div>
<div class="line">                ($current_vertex-&gt;[1]-&gt;{Y} - $minY) * $unit_multiplier_y,</div>
<div class="line">            );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #print &quot;@plot_points\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> (@plot_points &gt; 2) { # must have more than one point (two coords)</div>
<div class="line">                my $poly = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">                    $shapefile_group,</div>
<div class="line">                    <span class="stringliteral">&#39;Gnome2::Canvas::Line&#39;</span>,</div>
<div class="line">                    points          =&gt; \@plot_points,</div>
<div class="line">                    fill_color_gdk  =&gt; $colour,</div>
<div class="line">                );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a316107daf700f50c83cadf80bcb006bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::makeLegendPixbuf </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-makeLegendPixbuf' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-makeLegendPixbuf-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-makeLegendPixbuf-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-makeLegendPixbuf-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in makeLegendPixbuf: 61</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a316107daf700f50c83cadf80bcb006bf">makeLegendPixbuf</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my ($width, $height);</div>
<div class="line">    my @pixels;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make array of rgb values</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;{legend_mode} eq <span class="stringliteral">&#39;Hue&#39;</span>) {</div>
<div class="line">        </div>
<div class="line">        ($width, $height) = (LEGEND_WIDTH, 180);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> my $row (0..($height - 1)) {</div>
<div class="line">            my @rgb = <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ae39bf845c65dacd94c7a1a3e37459522">hsv_to_rgb</a>($row, 1, 1);</div>
<div class="line">            push @pixels, (@rgb) x $width;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">    elsif ($self-&gt;{legend_mode} eq <span class="stringliteral">&#39;Sat&#39;</span>) {</div>
<div class="line">        </div>
<div class="line">        ($width, $height) = (LEGEND_WIDTH, 100);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> my $row (0..($height - 1)) {</div>
<div class="line">            my @rgb = <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ae39bf845c65dacd94c7a1a3e37459522">hsv_to_rgb</a>(</div>
<div class="line">                $self-&gt;{hue},</div>
<div class="line">                1 - $row / 100.0,</div>
<div class="line">                1,</div>
<div class="line">            );</div>
<div class="line">            push @pixels, (@rgb) x $width;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">    elsif ($self-&gt;{legend_mode} eq <span class="stringliteral">&#39;Grey&#39;</span>) {</div>
<div class="line">        </div>
<div class="line">        ($width, $height) = (LEGEND_WIDTH, 255);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> my $row (0..($height - 1)) {</div>
<div class="line">            my $intensity = $self-&gt;rescale_grey(255 - $row);</div>
<div class="line">            my @rgb = ($intensity) x 3;</div>
<div class="line">            push @pixels, (@rgb) x $width;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        croak <span class="stringliteral">&quot;Legend: Invalid colour system\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Convert to low-level integers</span></div>
<div class="line"><span class="preprocessor"></span>    my $data = pack <span class="stringliteral">&quot;C*&quot;</span>, @pixels;</div>
<div class="line"></div>
<div class="line">    my $pixbuf = Gtk2::Gdk::Pixbuf-&gt;new_from_data(</div>
<div class="line">        $data,       # the data.  <span class="keyword">this</span> will be copied.</div>
<div class="line">        <span class="stringliteral">&#39;rgb&#39;</span>,       # only currently supported colorspace</div>
<div class="line">        0,           # <span class="keyword">true</span>, because we <span class="keywordflow">do</span> have alpha channel data</div>
<div class="line">        8,           # gdk-pixbuf currently allows only 8-bit samples</div>
<div class="line">        $width,      # width in pixels</div>
<div class="line">        $height,     # height in pixels</div>
<div class="line">        $width * 3,  # rowstride -- we have RGBA data, so it<span class="stringliteral">&#39;s four</span></div>
<div class="line"><span class="stringliteral">    );               # bytes per pixel.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    return $pixbuf;</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a7cd9f5061f898c820ece35c0182d8491"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::makeMark </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-makeMark' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-makeMark-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-makeMark-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-makeMark-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in makeMark: 16</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a7cd9f5061f898c820ece35c0182d8491">makeMark</a> {</div>
<div class="line">    my $self   = shift;</div>
<div class="line">    my $anchor = shift;</div>
<div class="line"></div>
<div class="line">    my $mark = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">        $self-&gt;{canvas}-&gt;root,</div>
<div class="line">        <span class="stringliteral">&#39;Gnome2::Canvas::Text&#39;</span>,</div>
<div class="line">        text            =&gt; q{},</div>
<div class="line">        anchor          =&gt; $anchor,</div>
<div class="line">        fill_color_gdk  =&gt; CELL_BLACK,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    $mark-&gt;raise_to_top();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $mark;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2c7966596fac4e5dc1209bf5e7d0329d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::markIfExists </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-markIfExists' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-markIfExists-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-markIfExists-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-markIfExists-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in markIfExists: 48</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a2c7966596fac4e5dc1209bf5e7d0329d">markIfExists</a> {</div>
<div class="line">    my $self  = shift;</div>
<div class="line">    my $hash  = shift;</div>
<div class="line">    my $shape = shift; # <span class="stringliteral">&quot;circle&quot;</span> or <span class="stringliteral">&quot;cross&quot;</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $cell (values %{$self-&gt;{cells}}) {</div>
<div class="line"><span class="preprocessor">        #  hackish, but sometimes we are called before the data are populated</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keywordflow">if</span> !$cell || ! $cell-&gt;[INDEX_RECT];</div>
<div class="line"></div>
<div class="line">        my $group = $cell-&gt;[INDEX_RECT]-&gt;parent;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (exists $hash-&gt;{$cell-&gt;[INDEX_ELEMENT]}) {</div>
<div class="line"><span class="preprocessor">            # Circle</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> ($shape eq <span class="stringliteral">&#39;circle&#39;</span> &amp;&amp; not $cell-&gt;[INDEX_CIRCLE]) {</div>
<div class="line">                $cell-&gt;[INDEX_CIRCLE] = $self-&gt;drawCircle($group);</div>
<div class="line"><span class="preprocessor">                #$group-&gt;signal_handlers_disconnect_by_func(\&amp;onEvent);</span></div>
<div class="line"><span class="preprocessor"></span>            }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # Cross</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> ($shape eq <span class="stringliteral">&#39;cross&#39;</span> &amp;&amp; not $cell-&gt;[INDEX_CROSS]) {</div>
<div class="line">                $cell-&gt;[INDEX_CROSS] = $self-&gt;drawCross($group);</div>
<div class="line">            } </div>
<div class="line">            </div>
<div class="line"><span class="preprocessor">            # Minus</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> ($shape eq <span class="stringliteral">&#39;minus&#39;</span> &amp;&amp; not $cell-&gt;[INDEX_MINUS]) {</div>
<div class="line">                $cell-&gt;[INDEX_MINUS] = $self-&gt;drawMinus($group);</div>
<div class="line">            } </div>
<div class="line"></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">if</span> ($shape eq <span class="stringliteral">&#39;circle&#39;</span> &amp;&amp; $cell-&gt;[INDEX_CIRCLE]) {</div>
<div class="line">                $cell-&gt;[INDEX_CIRCLE]-&gt;destroy;</div>
<div class="line">                $cell-&gt;[INDEX_CIRCLE] = undef;</div>
<div class="line"><span class="preprocessor">                #$group-&gt;signal_connect_swapped(event =&gt; \&amp;onEvent, $self);</span></div>
<div class="line"><span class="preprocessor"></span>            }</div>
<div class="line">            <span class="keywordflow">if</span> ($shape eq <span class="stringliteral">&#39;cross&#39;</span> &amp;&amp; $cell-&gt;[INDEX_CROSS]) {</div>
<div class="line">                $cell-&gt;[INDEX_CROSS]-&gt;destroy;</div>
<div class="line">                $cell-&gt;[INDEX_CROSS] = undef;</div>
<div class="line">            }    </div>
<div class="line">            <span class="keywordflow">if</span> ($shape eq <span class="stringliteral">&#39;minus&#39;</span> &amp;&amp; $cell-&gt;[INDEX_MINUS]) {</div>
<div class="line">                $cell-&gt;[INDEX_MINUS]-&gt;destroy;</div>
<div class="line">                $cell-&gt;[INDEX_MINUS] = undef;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a946965bc246eaef4122a5b3ddf8f69b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::max </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-max' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-max-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-max-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-max-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in max: 3</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a946965bc246eaef4122a5b3ddf8f69b1">max</a> {</div>
<div class="line">    <span class="keywordflow">return</span> ($_[0] &gt; $_[1]) ? $_[0] : $_[1];</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="abd0356d8134f4052bc3fb3975113878e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::maxmin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-maxmin' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-maxmin-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-maxmin-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-maxmin-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in maxmin: 10</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#abd0356d8134f4052bc3fb3975113878e">maxmin</a> {</div>
<div class="line">    my($min, $max) = @_;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span>(my $i=0; $i&lt;@_; $i++) {</div>
<div class="line">        $max = $_[$i] <span class="keywordflow">if</span>($max &lt; $_[$i]);</div>
<div class="line">        $min = $_[$i] <span class="keywordflow">if</span>($min &gt; $_[$i]);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>($max,$min);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a5fb262164b146ce78e01362c68d34ed9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-new' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in new: 77</span></div>
<div class="line"><span class="preprocessor"></span>sub <span class="keyword">new</span> {</div>
<div class="line">    my $class   = shift;</div>
<div class="line">    my $frame   = shift;</div>
<div class="line">    my $hscroll = shift;</div>
<div class="line">    my $vscroll = shift;</div>
<div class="line">    </div>
<div class="line">    my $show_legend = shift || 0;  #  <span class="keyword">this</span> is irrelevant now, gets hidden as appropriate (but should allow user to show/hide)</div>
<div class="line">    my $show_value  = shift || 0;</div>
<div class="line"></div>
<div class="line">    my $self = {</div>
<div class="line">        legend_mode =&gt; <span class="stringliteral">&#39;Hue&#39;</span>,</div>
<div class="line">        hue         =&gt; 0,     # <span class="keywordflow">default</span> constant-hue red</div>
<div class="line">    }; </div>
<div class="line">    bless $self, $class;</div>
<div class="line"></div>
<div class="line">    $self-&gt;{hover_func}  = shift || undef; # Callback <span class="keyword">function</span> <span class="keywordflow">for</span> when users move mouse over a cell</div>
<div class="line"><span class="preprocessor">    #$self-&gt;{use_hover_func} = 1;          #  we should use the hover func by default</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{click_func}  = shift || undef; # Callback <span class="keyword">function</span> <span class="keywordflow">for</span> when users click on a cell</div>
<div class="line">    $self-&gt;{select_func} = shift || undef; # Callback <span class="keyword">function</span> <span class="keywordflow">for</span> when users select a <span class="keyword">set</span> of elements</div>
<div class="line">    my $g = 0;</div>
<div class="line">    $self-&gt;{colour_none} = Gtk2::Gdk::Color-&gt;new($g, $g, $g);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make the canvas and hook it up</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{canvas} = Gnome2::Canvas-&gt;new();</div>
<div class="line">    $frame-&gt;add($self-&gt;{canvas});</div>
<div class="line">    $self-&gt;{canvas}-&gt;signal_connect_swapped (size_allocate =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a12b8ecffcaaf6b6d4fc802235064fa04">onSizeAllocate</a>, $self);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Set up custom scrollbars due to flicker problems whilst panning..</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{hadjust} = Gtk2::Adjustment-&gt;new(0, 0, 1, 1, 1, 1);</div>
<div class="line">    $self-&gt;{vadjust} = Gtk2::Adjustment-&gt;new(0, 0, 1, 1, 1, 1);</div>
<div class="line"></div>
<div class="line">    $hscroll-&gt;set_adjustment( $self-&gt;{hadjust} );</div>
<div class="line">    $vscroll-&gt;set_adjustment( $self-&gt;{vadjust} );</div>
<div class="line">    </div>
<div class="line">    $self-&gt;{hadjust}-&gt;signal_connect_swapped(<span class="stringliteral">&#39;value-changed&#39;</span>, \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ac6dc2fff9f08a2208e5e4da3b1ae6bce">onScrollbarsScroll</a>, $self);</div>
<div class="line">    $self-&gt;{vadjust}-&gt;signal_connect_swapped(<span class="stringliteral">&#39;value-changed&#39;</span>, \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ac6dc2fff9f08a2208e5e4da3b1ae6bce">onScrollbarsScroll</a>, $self);</div>
<div class="line"></div>
<div class="line">    $self-&gt;{canvas}-&gt;get_vadjustment-&gt;signal_connect_swapped(<span class="stringliteral">&#39;value-changed&#39;</span>, \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a195b24dbb741998c20614026412501f3">onScroll</a>, $self);</div>
<div class="line">    $self-&gt;{canvas}-&gt;get_hadjustment-&gt;signal_connect_swapped(<span class="stringliteral">&#39;value-changed&#39;</span>, \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a195b24dbb741998c20614026412501f3">onScroll</a>, $self);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Set up canvas</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{canvas}-&gt;set_center_scroll_region(0);</div>
<div class="line">    $self-&gt;{canvas}-&gt;show;</div>
<div class="line">    $self-&gt;{zoom_fit} = 1;</div>
<div class="line">    $self-&gt;{dragging} = 0;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ($show_value) {</div>
<div class="line">        $self-&gt;setupValueLabel();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Create background rectangle to receive mouse events for panning</span></div>
<div class="line"><span class="preprocessor"></span>    my $rect = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">        $self-&gt;{canvas}-&gt;root,</div>
<div class="line">        <span class="stringliteral">&#39;Gnome2::Canvas::Rect&#39;</span>,</div>
<div class="line">        x1 =&gt; 0,</div>
<div class="line">        y1 =&gt; 0,</div>
<div class="line">        x2 =&gt; CELL_SIZE_X,</div>
<div class="line">        fill_color_gdk =&gt; CELL_WHITE,</div>
<div class="line"><span class="preprocessor">        #outline_color =&gt; &quot;black&quot;,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #width_pixels =&gt; 2,</span></div>
<div class="line"><span class="preprocessor"></span>        y2 =&gt; CELL_SIZE_X,</div>
<div class="line">    );</div>
<div class="line">    $rect-&gt;lower_to_bottom();</div>
<div class="line"></div>
<div class="line">    $self-&gt;{canvas}-&gt;root-&gt;signal_connect_swapped (</div>
<div class="line">        event =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a48611865fed2e892a15191dca7059316">onBackgroundEvent</a>,</div>
<div class="line">        $self,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    $self-&gt;{back_rect} = $rect;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #if ($show_legend) {</span></div>
<div class="line"><span class="preprocessor"></span>        $self-&gt;showLegend;</div>
<div class="line"><span class="preprocessor">    #}</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">return</span> $self;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a48611865fed2e892a15191dca7059316"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::onBackgroundEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onBackgroundEvent' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onBackgroundEvent-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onBackgroundEvent-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onBackgroundEvent-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onBackgroundEvent: 104</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a48611865fed2e892a15191dca7059316">onBackgroundEvent</a> {</div>
<div class="line">    my ($self, $event, $cell) = @_;</div>
<div class="line"></div>
<div class="line">my $type = $event-&gt;type;</div>
<div class="line">my $state = $event-&gt;state;</div>
<div class="line"><span class="preprocessor">#print &quot;BK Event is $type, state is $state \n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( $event-&gt;type eq <span class="stringliteral">&#39;button-press&#39;</span>) {</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> ($event-&gt;button == 1 and defined $self-&gt;{select_func} and not $self-&gt;{selecting}) {</div>
<div class="line"><span class="preprocessor">#print &quot;COMMENCING SELECTION  $self-&gt;{select_func}\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>            ($self-&gt;{sel_start_x}, $self-&gt;{sel_start_y}) = ($event-&gt;x, $event-&gt;y);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # Grab mouse</span></div>
<div class="line"><span class="preprocessor"></span>            $cell-&gt;grab (</div>
<div class="line">                [qw /pointer-motion-mask button-release-mask/ ],</div>
<div class="line">                Gtk2::Gdk::Cursor-&gt;<span class="keyword">new</span> (<span class="stringliteral">&#39;fleur&#39;</span>),</div>
<div class="line">                $event-&gt;time,</div>
<div class="line">            );</div>
<div class="line">            $self-&gt;{selecting} = 1;</div>
<div class="line">            $self-&gt;{grabbed_cell} = $cell;</div>
<div class="line"></div>
<div class="line">            $self-&gt;{sel_rect} = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">                $self-&gt;{canvas}-&gt;root,</div>
<div class="line">                <span class="stringliteral">&#39;Gnome2::Canvas::Rect&#39;</span>,</div>
<div class="line">                x1 =&gt; $event-&gt;x,</div>
<div class="line">                y1 =&gt; $event-&gt;y,</div>
<div class="line">                x2 =&gt; $event-&gt;x,</div>
<div class="line">                y2 =&gt; $event-&gt;y,</div>
<div class="line">                fill_color_gdk =&gt; undef,</div>
<div class="line">                outline_color_gdk =&gt; CELL_BLACK,</div>
<div class="line">                width_pixels =&gt; 0,</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            ($self-&gt;{pan_start_x}, $self-&gt;{pan_start_y}) = $event-&gt;coords;</div>
<div class="line"></div>
<div class="line">            # Grab mouse</div>
<div class="line">            $cell-&gt;grab (</div>
<div class="line">                [qw/pointer-motion-mask button-release-mask/],</div>
<div class="line">                Gtk2::Gdk::Cursor-&gt;new (<span class="stringliteral">&#39;fleur&#39;</span>),</div>
<div class="line">                $event-&gt;time,</div>
<div class="line">            );</div>
<div class="line">            $self-&gt;{dragging} = 1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">    elsif ( $event-&gt;type eq <span class="stringliteral">&#39;button-release&#39;</span>) {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($self-&gt;{selecting} and $event-&gt;button == 1) {</div>
<div class="line"><span class="preprocessor">            # Establish the selection</span></div>
<div class="line"><span class="preprocessor"></span>            my ($x_start, $y_start) = ($self-&gt;{sel_start_x}, $self-&gt;{sel_start_y});</div>
<div class="line">            my ($x_end, $y_end)     = ($event-&gt;x, $event-&gt;y);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (defined $self-&gt;{select_func}) {</div>
<div class="line">                </div>
<div class="line">                $cell-&gt;ungrab ($event-&gt;time);</div>
<div class="line">                $self-&gt;{selecting} = 0;</div>
<div class="line">                </div>
<div class="line"><span class="preprocessor">                #  Try to get rid of the dot that appears when selecting.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                #  Lowering at least stops it getting in the way.</span></div>
<div class="line"><span class="preprocessor"></span>                my $sel_rect = $self-&gt;{sel_rect};</div>
<div class="line">                <span class="keyword">delete</span> $self-&gt;{sel_rect};</div>
<div class="line"><span class="preprocessor">                #$sel_rect-&gt;lower_to_bottom();</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">                #$sel_rect-&gt;hide();</span></div>
<div class="line"><span class="preprocessor"></span>                $sel_rect-&gt;destroy;</div>
<div class="line">                </div>
<div class="line"><span class="preprocessor">                #if (! $event-&gt;state &gt;= [&quot;control-mask&quot; ]) {  #  not if control key is pressed</span></div>
<div class="line"><span class="preprocessor"></span>                    $self-&gt;endSelection($x_start, $y_start, $x_end, $y_end);</div>
<div class="line"><span class="preprocessor">                #}</span></div>
<div class="line"><span class="preprocessor"></span>            }</div>
<div class="line"></div>
<div class="line">        }</div>
<div class="line">        elsif ($self-&gt;{dragging}) {</div>
<div class="line">            $cell-&gt;ungrab ($event-&gt;time);</div>
<div class="line">            $self-&gt;{dragging} = 0;</div>
<div class="line">            $self-&gt;updateScrollbars(); #FIXME: If we <span class="keywordflow">do</span> <span class="keyword">this</span> <span class="keywordflow">for</span> motion-notify - <span class="keyword">get</span> great flicker!?!?</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">    elsif ( $event-&gt;type eq <span class="stringliteral">&#39;motion-notify&#39;</span>) {</div>
<div class="line"><span class="preprocessor">#        print &quot;Background Event\tMotion\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>        </div>
<div class="line">        <span class="keywordflow">if</span> ($self-&gt;{selecting}) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # Resize selection rectangle</span></div>
<div class="line"><span class="preprocessor"></span>            $self-&gt;{sel_rect}-&gt;set(x2 =&gt; $event-&gt;x, y2 =&gt; $event-&gt;y);</div>
<div class="line"></div>
<div class="line">        }</div>
<div class="line">        elsif ($self-&gt;{dragging}) {</div>
<div class="line"><span class="preprocessor">            # Work out how much we&#39;ve moved away from pan_start (world coords)</span></div>
<div class="line"><span class="preprocessor"></span>            my ($x, $y) = $event-&gt;coords;</div>
<div class="line">            my ($dx, $dy) = ($x - $self-&gt;{pan_start_x}, $y - $self-&gt;{pan_start_y});</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            # Scroll to get back to pan_start</span></div>
<div class="line"><span class="preprocessor"></span>            my ($scrollx, $scrolly) = $self-&gt;{canvas}-&gt;get_scroll_offsets();</div>
<div class="line">            my ($cx, $cy) =  $self-&gt;{canvas}-&gt;w2c($dx, $dy);</div>
<div class="line">            $self-&gt;{canvas}-&gt;scroll_to(-1 * $cx + $scrollx, -1 * $cy + $scrolly);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;    </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a61d5a576ebec48fcb9276b6ce2109691"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::onEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onEvent' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onEvent-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onEvent-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onEvent-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onEvent: 136</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a61d5a576ebec48fcb9276b6ce2109691">onEvent</a> {</div>
<div class="line">    my ($self, $event, $cell) = @_;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#my $type = $event-&gt;type;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#my $state = $event-&gt;state;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#if ($state) {</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    print &quot;Event is $type, state is $state \n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#}</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">if</span> ($event-&gt;type eq <span class="stringliteral">&#39;2button_press&#39;</span>) {</div>
<div class="line">        print <span class="stringliteral">&quot;Double click does nothing&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    elsif ($event-&gt;type eq <span class="stringliteral">&#39;enter-notify&#39;</span>) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Call client-defined callback function</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (defined $self-&gt;{hover_func} and not $self-&gt;{clicked_cell}) {</div>
<div class="line">            my $f = $self-&gt;{hover_func};</div>
<div class="line">            &amp;$f($self-&gt;{cells}{$cell}[INDEX_ELEMENT]);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Change the cursor</span></div>
<div class="line"><span class="preprocessor"></span>        my $cursor = Gtk2::Gdk::Cursor-&gt;new(HOVER_CURSOR);</div>
<div class="line">        $self-&gt;{canvas}-&gt;window-&gt;set_cursor($cursor);</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">    elsif ($event-&gt;type eq <span class="stringliteral">&#39;leave-notify&#39;</span>) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Call client-defined callback function</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (defined $self-&gt;{hover_func} and not $self-&gt;{clicked_cell}) {</div>
<div class="line">            my $f = $self-&gt;{hover_func};</div>
<div class="line"><span class="preprocessor">            # FIXME: Disabling hiding of markers since this stuffs up</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # the popups on win32 - we receive leave-notify on button click!</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #&amp;$f(undef);</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Change cursor back to default</span></div>
<div class="line"><span class="preprocessor"></span>        $self-&gt;{canvas}-&gt;window-&gt;set_cursor(undef);</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">    elsif ($event-&gt;type eq <span class="stringliteral">&#39;button-press&#39;</span>) {</div>
<div class="line">        $self-&gt;{clicked_cell} = undef unless $event-&gt;button == 2;  #  clear any clicked cell</div>
<div class="line">        </div>
<div class="line"><span class="preprocessor">        # If middle-click or control-click</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (    $event-&gt;button == 2</div>
<div class="line">            || (    $event-&gt;button == 1</div>
<div class="line">                and not $self-&gt;{selecting}</div>
<div class="line">                and $event-&gt;state &gt;= [ <span class="stringliteral">&#39;control-mask&#39;</span> ])</div>
<div class="line">            ) {</div>
<div class="line"><span class="preprocessor">            #print &quot;===========Cell popup\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # Show/Hide the labels popup dialog</span></div>
<div class="line"><span class="preprocessor"></span>            my $element = $self-&gt;{cells}{$cell}[INDEX_ELEMENT];</div>
<div class="line">            my $f = $self-&gt;{click_func};</div>
<div class="line">            &amp;$f($element);</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">return</span> 1;  #  Don<span class="stringliteral">&#39;t propagate the events</span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral">        </span></div>
<div class="line"><span class="stringliteral">        elsif ($event-&gt;button == 1) { # left click and drag</span></div>
<div class="line"><span class="stringliteral">            </span></div>
<div class="line"><span class="stringliteral">            if (defined $self-&gt;{select_func}</span></div>
<div class="line"><span class="stringliteral">                and not $self-&gt;{selecting}</span></div>
<div class="line"><span class="stringliteral">                and not ($event-&gt;state &gt;= [ &#39;</span>control-mask<span class="stringliteral">&#39; ])</span></div>
<div class="line"><span class="stringliteral">                ) {</span></div>
<div class="line"><span class="stringliteral">                </span></div>
<div class="line"><span class="stringliteral">                ($self-&gt;{sel_start_x}, $self-&gt;{sel_start_y}) = ($event-&gt;x, $event-&gt;y);</span></div>
<div class="line"><span class="stringliteral">                </span></div>
<div class="line"><span class="stringliteral">                # Grab mouse</span></div>
<div class="line"><span class="stringliteral">                $cell-&gt;grab (</span></div>
<div class="line"><span class="stringliteral">                    [qw/pointer-motion-mask button-release-mask/],</span></div>
<div class="line"><span class="stringliteral">                    Gtk2::Gdk::Cursor-&gt;new (&#39;</span>fleur<span class="stringliteral">&#39;),</span></div>
<div class="line"><span class="stringliteral">                    $event-&gt;time,</span></div>
<div class="line"><span class="stringliteral">                );</span></div>
<div class="line"><span class="stringliteral">                $self-&gt;{selecting} = 1;</span></div>
<div class="line"><span class="stringliteral">                $self-&gt;{grabbed_cell} = $cell;</span></div>
<div class="line"><span class="stringliteral">                </span></div>
<div class="line"><span class="stringliteral">                $self-&gt;{sel_rect} = Gnome2::Canvas::Item-&gt;new (</span></div>
<div class="line"><span class="stringliteral">                    $self-&gt;{canvas}-&gt;root,</span></div>
<div class="line"><span class="stringliteral">                    &#39;</span>Gnome2::Canvas::Rect<span class="stringliteral">&#39;,</span></div>
<div class="line"><span class="stringliteral">                    x1 =&gt; $event-&gt;x,</span></div>
<div class="line"><span class="stringliteral">                    y1 =&gt; $event-&gt;y,</span></div>
<div class="line"><span class="stringliteral">                    x2 =&gt; $event-&gt;x,</span></div>
<div class="line"><span class="stringliteral">                    y2 =&gt; $event-&gt;y,</span></div>
<div class="line"><span class="stringliteral">                    fill_color_gdk =&gt; undef,</span></div>
<div class="line"><span class="stringliteral">                    outline_color_gdk =&gt; CELL_BLACK,</span></div>
<div class="line"><span class="stringliteral">                    #outline_color_gdk =&gt; HIGHLIGHT_COLOUR,</span></div>
<div class="line"><span class="stringliteral">                    width_pixels =&gt; 0,</span></div>
<div class="line"><span class="stringliteral">                );</span></div>
<div class="line"><span class="stringliteral">            }</span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral">        elsif ($event-&gt;button == 3) { # right click - use hover function but fix it in place</span></div>
<div class="line"><span class="stringliteral">            # Call client-defined callback function</span></div>
<div class="line"><span class="stringliteral">            if (defined $self-&gt;{hover_func}) {</span></div>
<div class="line"><span class="stringliteral">                my $f = $self-&gt;{hover_func};</span></div>
<div class="line"><span class="stringliteral">                &amp;$f($self-&gt;{cells}{$cell}[INDEX_ELEMENT]);</span></div>
<div class="line"><span class="stringliteral">            }</span></div>
<div class="line"><span class="stringliteral">            $self-&gt;{clicked_cell} = $cell;</span></div>
<div class="line"><span class="stringliteral">            </span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral">    elsif ($event-&gt;type eq &#39;</span>button-release<span class="stringliteral">&#39;) {</span></div>
<div class="line"><span class="stringliteral">        $cell-&gt;ungrab ($event-&gt;time);</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">        if ($self-&gt;{selecting} and defined $self-&gt;{select_func}) {</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">            $cell-&gt;ungrab ($event-&gt;time);</span></div>
<div class="line"><span class="stringliteral">            </span></div>
<div class="line"><span class="stringliteral">            $self-&gt;{selecting} = 0;</span></div>
<div class="line"><span class="stringliteral">            </span></div>
<div class="line"><span class="stringliteral">            # Establish the selection</span></div>
<div class="line"><span class="stringliteral">            my ($x_start, $y_start) = ($self-&gt;{sel_start_x}, $self-&gt;{sel_start_y});</span></div>
<div class="line"><span class="stringliteral">            my ($x_end, $y_end)     = ($event-&gt;x, $event-&gt;y);</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">            $self-&gt;endSelection($x_start, $y_start, $x_end, $y_end);</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">            #  Try to get rid of the dot that appears when selecting.</span></div>
<div class="line"><span class="stringliteral">            #  Lowering at least stops it getting in the way.</span></div>
<div class="line"><span class="stringliteral">            my $sel_rect = $self-&gt;{sel_rect};</span></div>
<div class="line"><span class="stringliteral">            delete $self-&gt;{sel_rect};</span></div>
<div class="line"><span class="stringliteral">            $sel_rect-&gt;lower_to_bottom();</span></div>
<div class="line"><span class="stringliteral">            $sel_rect-&gt;hide();</span></div>
<div class="line"><span class="stringliteral">            $sel_rect-&gt;destroy;</span></div>
<div class="line"><span class="stringliteral">            </span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral">    if ($event-&gt;type eq &#39;</span>motion-notify<span class="stringliteral">&#39;) {</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">        if ($self-&gt;{selecting}) {</span></div>
<div class="line"><span class="stringliteral">            # Resize selection rectangle</span></div>
<div class="line"><span class="stringliteral">            $self-&gt;{sel_rect}-&gt;set(x2 =&gt; $event-&gt;x, y2 =&gt; $event-&gt;y);</span></div>
<div class="line"><span class="stringliteral">        }</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    return 0;    </span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a32a748e36124574e38082f3ec72e283e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::onMarkerEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onMarkerEvent' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onMarkerEvent-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onMarkerEvent-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onMarkerEvent-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onMarkerEvent: 7</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a32a748e36124574e38082f3ec72e283e">onMarkerEvent</a> {</div>
<div class="line"><span class="preprocessor">    # FIXME FIXME FIXME All this stuff has serious problems between Windows/Linux</span></div>
<div class="line"><span class="preprocessor"></span>    my ($self, $event, $cell) = @_;</div>
<div class="line">    print <span class="stringliteral">&quot;Marker event: &quot;</span> . $event-&gt;type .  <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    $self-&gt;onEvent($event, $cell-&gt;parent);</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a195b24dbb741998c20614026412501f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::onScroll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onScroll' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onScroll-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onScroll-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onScroll-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onScroll: 7</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a195b24dbb741998c20614026412501f3">onScroll</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"><span class="preprocessor">    #FIXME: check if this helps reduce flicker</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;reposition();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ac6dc2fff9f08a2208e5e4da3b1ae6bce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::onScrollbarsScroll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onScrollbarsScroll' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onScrollbarsScroll-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onScrollbarsScroll-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onScrollbarsScroll-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onScrollbarsScroll: 11</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ac6dc2fff9f08a2208e5e4da3b1ae6bce">onScrollbarsScroll</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (not $self-&gt;{dragging}) {</div>
<div class="line">        my ($x, $y) = ($self-&gt;{hadjust}-&gt;get_value, $self-&gt;{vadjust}-&gt;get_value);</div>
<div class="line">        $self-&gt;{canvas}-&gt;scroll_to($x, $y);</div>
<div class="line">        $self-&gt;reposition();</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a12b8ecffcaaf6b6d4fc802235064fa04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::onSizeAllocate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onSizeAllocate' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onSizeAllocate-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onSizeAllocate-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onSizeAllocate-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onSizeAllocate: 16</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a12b8ecffcaaf6b6d4fc802235064fa04">onSizeAllocate</a> {</div>
<div class="line">    my ($self, $size, $canvas) = @_;</div>
<div class="line">    $self-&gt;{width_px}  = $size-&gt;width;</div>
<div class="line">    $self-&gt;{height_px} = $size-&gt;height;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (exists $self-&gt;{width_units}) {</div>
<div class="line">        $self-&gt;fitGrid() <span class="keywordflow">if</span> ($self-&gt;{zoom_fit});</div>
<div class="line"></div>
<div class="line">        $self-&gt;reposition();</div>
<div class="line">        $self-&gt;setupScrollbars();</div>
<div class="line">        $self-&gt;resizeBackgroundRect();</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad7c49b200cb4b39c0f2ddce8ba2d2271"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::postZoom </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-postZoom' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-postZoom-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-postZoom-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-postZoom-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in postZoom: 8</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ad7c49b200cb4b39c0f2ddce8ba2d2271">postZoom</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    $self-&gt;setupScrollbars();</div>
<div class="line">    $self-&gt;reposition();</div>
<div class="line">    $self-&gt;resizeBackgroundRect();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ac1583e7c6d19b35ef6bd5f85f5d8482a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::reposition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-reposition' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-reposition-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-reposition-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-reposition-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in reposition: 52</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ac1583e7c6d19b35ef6bd5f85f5d8482a">reposition</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keywordflow">if</span> not defined $self-&gt;{legend};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Convert coordinates into world units</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # (this has been tricky to get working right...)</span></div>
<div class="line"><span class="preprocessor"></span>    my ($width, $height) = $self-&gt;{canvas}-&gt;c2w($self-&gt;{width_px} || 0, $self-&gt;{height_px} || 0);</div>
<div class="line"></div>
<div class="line">    my ($scroll_x, $scroll_y) = $self-&gt;{canvas}-&gt;get_scroll_offsets();</div>
<div class="line">    ($scroll_x, $scroll_y) = $self-&gt;{canvas}-&gt;c2w($scroll_x, $scroll_y);</div>
<div class="line"></div>
<div class="line">    my ($border_width, $legend_width) = $self-&gt;{canvas}-&gt;c2w(BORDER_SIZE, LEGEND_WIDTH);</div>
<div class="line"></div>
<div class="line">    $self-&gt;{legend}-&gt;set(</div>
<div class="line">        x       =&gt; $width + $scroll_x - $legend_width,  # world units</div>
<div class="line">        y       =&gt; $scroll_y,                           # world units</div>
<div class="line">        width   =&gt; LEGEND_WIDTH,                        # pixels</div>
<div class="line">        height  =&gt; $self-&gt;{height_px},                  # pixels</div>
<div class="line">    );            </div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    # Reposition the &quot;mark&quot; textboxes</span></div>
<div class="line"><span class="preprocessor"></span>    my $mark_x = $scroll_x              # world units</div>
<div class="line">                 + $width</div>
<div class="line">                 - $legend_width</div>
<div class="line">                 - 2 * $border_width; </div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (0..3) {</div>
<div class="line">        $self-&gt;{marks}[$i]-&gt;set(</div>
<div class="line">            x =&gt; $mark_x ,</div>
<div class="line">            y =&gt; $scroll_y + $i * $height / 3,</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    # Reposition value box</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ($self-&gt;{value_group}) {</div>
<div class="line">        my ($value_x, $value_y) = $self-&gt;{value_group}-&gt;get(<span class="charliteral">&#39;x&#39;</span>, <span class="charliteral">&#39;y&#39;</span>);</div>
<div class="line">        $self-&gt;{value_group}-&gt;move(</div>
<div class="line">            $scroll_x - $value_x,</div>
<div class="line">            $scroll_y - $value_y,</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        my ($text_width, $text_height)</div>
<div class="line">            = $self-&gt;{value_text}-&gt;get(<span class="stringliteral">&#39;text-width&#39;</span>, <span class="stringliteral">&#39;text-height&#39;</span>);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Resize value background rectangle</span></div>
<div class="line"><span class="preprocessor"></span>        $self-&gt;{value_rect}-&gt;set(</div>
<div class="line">            x2 =&gt; $text_width,</div>
<div class="line">            y2 =&gt; $text_height,</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a54327966b997c4b241a8a53306b17506"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::rescale_grey </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-rescale_grey' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-rescale_grey-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-rescale_grey-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-rescale_grey-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in rescale_grey: 13</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a54327966b997c4b241a8a53306b17506">rescale_grey</a> {</div>
<div class="line">    my $self  = shift;</div>
<div class="line">    my $value = shift;</div>
<div class="line">    my $max   = shift;</div>
<div class="line">    defined $max or $max = 255;</div>
<div class="line">    </div>
<div class="line">    $value /= $max;</div>
<div class="line">    $value *= (LIGHTEST_GREY_FRAC - DARKEST_GREY_FRAC);</div>
<div class="line">    $value += DARKEST_GREY_FRAC;</div>
<div class="line">    $value *= $max;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $value;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a1a0775b6aa0ef5da735be429da6695a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::resizeBackgroundRect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-resizeBackgroundRect' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-resizeBackgroundRect-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-resizeBackgroundRect-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-resizeBackgroundRect-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in resizeBackgroundRect: 19</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a1a0775b6aa0ef5da735be429da6695a3">resizeBackgroundRect</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;{width_px}) {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Make it the full visible area</span></div>
<div class="line"><span class="preprocessor"></span>        my ($width, $height) = $self-&gt;{canvas}-&gt;c2w($self-&gt;{width_px}, $self-&gt;{height_px});</div>
<div class="line">        <span class="keywordflow">if</span> (not $self-&gt;{dragging}) {</div>
<div class="line">            $self-&gt;{back_rect}-&gt;set(</div>
<div class="line">                x2 =&gt; <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a946965bc246eaef4122a5b3ddf8f69b1">max</a>($width,  $self-&gt;{width_units}),</div>
<div class="line">                y2 =&gt; <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a946965bc246eaef4122a5b3ddf8f69b1">max</a>($height, $self-&gt;{height_units}),</div>
<div class="line">            );</div>
<div class="line">            $self-&gt;{back_rect}-&gt;lower_to_bottom();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a3694f5b6c5125b9762647a4d1db56bf1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::rgb_to_hsv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-rgb_to_hsv' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-rgb_to_hsv-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-rgb_to_hsv-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-rgb_to_hsv-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in rgb_to_hsv: 26</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a3694f5b6c5125b9762647a4d1db56bf1">rgb_to_hsv</a> {</div>
<div class="line">    my $var_r = $_[0] / 255;</div>
<div class="line">    my $var_g = $_[1] / 255;</div>
<div class="line">    my $var_b = $_[2] / 255;</div>
<div class="line">    my($var_max, $var_min) = <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#abd0356d8134f4052bc3fb3975113878e">maxmin</a>($var_r, $var_g, $var_b);</div>
<div class="line">    my $del_max = $var_max - $var_min;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>($del_max) {</div>
<div class="line">        my $del_r = ((($var_max - $var_r) / 6) + ($del_max / 2)) / $del_max;</div>
<div class="line">        my $del_g = ((($var_max - $var_g) / 6) + ($del_max / 2)) / $del_max;</div>
<div class="line">        my $del_b = ((($var_max - $var_b) / 6) + ($del_max / 2)) / $del_max;</div>
<div class="line">    </div>
<div class="line">        my $h;</div>
<div class="line">        <span class="keywordflow">if</span>($var_r == $var_max) { $h = $del_b - $del_g; }</div>
<div class="line">        elsif($var_g == $var_max) { $h = 1/3 + $del_r - $del_b; }</div>
<div class="line">        elsif($var_b == $var_max) { $h = 2/3 + $del_g - $del_r; }</div>
<div class="line">    </div>
<div class="line">        <span class="keywordflow">if</span>($h &lt; 0) { $h += 1 }</div>
<div class="line">        <span class="keywordflow">if</span>($h &gt; 1) { $h -= 1 }</div>
<div class="line">    </div>
<div class="line">        <span class="keywordflow">return</span>($h * 360, $del_max / $var_max, $var_max);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span>(0, 0, $var_max);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a720a9fe99ec66731c3c4f8dfabb72128"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::set_cell_outline_colour </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-set_cell_outline_colour' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-set_cell_outline_colour-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-set_cell_outline_colour-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-set_cell_outline_colour-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in set_cell_outline_colour: 19</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a720a9fe99ec66731c3c4f8dfabb72128">set_cell_outline_colour</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $colour = shift;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (! $colour) {  #  should fire up a <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a8ada9365be284034ed7010e4fe9f9b6d">colour</a> selector</div>
<div class="line"><span class="preprocessor">        #$colour = Gtk2::Gdk::Color-&gt;parse(&#39;red&#39;);</span></div>
<div class="line"><span class="preprocessor"></span>        $colour = $self-&gt;get_colour_from_chooser;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  if still no colour chosen</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> <span class="keywordflow">if</span> !$colour;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $cell (values %{$self-&gt;{cells}}) {</div>
<div class="line">        my $rect = $cell-&gt;[INDEX_RECT];</div>
<div class="line">        $rect-&gt;set(<span class="stringliteral">&#39;outline_color_gdk&#39;</span>, $colour);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2ba6e6414dcae02826b701e02c98724b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::set_legend_gt_flag </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-set_legend_gt_flag' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-set_legend_gt_flag-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-set_legend_gt_flag-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-set_legend_gt_flag-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in set_legend_gt_flag: 6</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a2ba6e6414dcae02826b701e02c98724b">set_legend_gt_flag</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $flag = shift;</div>
<div class="line">    $self-&gt;{legend_gt_flag} = $flag;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a86f04266a28c5e9d29b8377f25413c6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::set_legend_lt_flag </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-set_legend_lt_flag' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-set_legend_lt_flag-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-set_legend_lt_flag-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-set_legend_lt_flag-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in set_legend_lt_flag: 6</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a86f04266a28c5e9d29b8377f25413c6b">set_legend_lt_flag</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $flag = shift;</div>
<div class="line">    $self-&gt;{legend_lt_flag} = $flag;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ae99856ee4d5b2460fe45883991fb9baf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::setBaseStruct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setBaseStruct' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-setBaseStruct-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setBaseStruct-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setBaseStruct-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in setBaseStruct: 207</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ae99856ee4d5b2460fe45883991fb9baf">setBaseStruct</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $data = shift;</div>
<div class="line"></div>
<div class="line">    $self-&gt;{base_struct} = $data;</div>
<div class="line">    $self-&gt;{cells} = {};</div>
<div class="line">    </div>
<div class="line">    my ($minX, $maxX, $minY, $maxY) = $self-&gt;findMaxMin($data);</div>
<div class="line">    print join (q{ }, ($minX, $maxX, $minY, $maxY)) . <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">    my @res = $self-&gt;getCellSizes($data);  #  handles zero and text</div>
<div class="line">    </div>
<div class="line">    my $cellX = shift @res;  #  just grab first two <span class="keywordflow">for</span> now</div>
<div class="line">    my $cellY = shift @res || $cellX;  #  <span class="keywordflow">default</span> to a square <span class="keywordflow">if</span> not defined or zero</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  save some coords stuff for later transforms</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{base_struct_cellsizes} = [$cellX, $cellY];</div>
<div class="line">    $self-&gt;{base_struct_bounds}    = [$minX, $minY, $maxX, $maxY];</div>
<div class="line"></div>
<div class="line">    my $sizes = $data-&gt;get_param (<span class="stringliteral">&#39;CELL_SIZES&#39;</span>);</div>
<div class="line">    my @sizes = @$sizes;</div>
<div class="line">    my $width_pixels = 0;</div>
<div class="line">    <span class="keywordflow">if</span> ($sizes[0] == 0</div>
<div class="line">        || ! defined $sizes[1]</div>
<div class="line">        || $sizes[1] == 0 ) {</div>
<div class="line">        $width_pixels = 1</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#    my ($cellX, $cellY, $width_pixels) = $self-&gt;getCellSizes($data);</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$cellY = 1 if ! defined $cellY; #  catcher for single axis data sets</span></div>
<div class="line"><span class="preprocessor"></span>    </div>
<div class="line"><span class="preprocessor">    #print &quot;[GRID] Cellsizes:  $cellX, $cellY, (width: $width_pixels)\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #print &quot;[GRID] Basedata cell size is: &quot;, join (&quot; &quot;, @{$data-&gt;get_param (&#39;CELL_SIZES&#39;)}), &quot;\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    # Configure cell heights and y-offsets for the marks (circles, lines,...)</span></div>
<div class="line"><span class="preprocessor"></span>    my $ratio = eval {$cellY / $cellX} || 1;  #  trap divide by zero</div>
<div class="line">    my $cell_size_y = CELL_SIZE_X * $ratio;</div>
<div class="line">    $self-&gt;{cell_size_y} = $cell_size_y;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  setup the index if needed</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> (defined $self-&gt;{select_func}) {</div>
<div class="line">        my $rtree = $self-&gt;get_rtree();</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    my $elts = $data-&gt;get_element_hash();</div>
<div class="line"><span class="preprocessor">    #print Data::Dumper::Dumper($elts);</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my $count = scalar keys %$elts;</div>
<div class="line">    </div>
<div class="line">    croak <span class="stringliteral">&quot;No groups to display - BaseData is empty\n&quot;</span></div>
<div class="line">      <span class="keywordflow">if</span> $count == 0;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #my $progress_bar = Biodiverse::GUI::ProgressDialog-&gt;new;</span></div>
<div class="line"><span class="preprocessor"></span>    my $progress_bar = <a class="code" href="classBiodiverse_1_1Progress.html">Biodiverse::Progress</a>-&gt;<a class="code" href="classBiodiverse_1_1Progress.html#a88f4cef6f66986952a850fb70a2b62d8">new</a>(gui_only =&gt; 1);</div>
<div class="line"></div>
<div class="line">    print <span class="stringliteral">&quot;[Grid] Grid loading $count elements (cells)\n&quot;</span>;</div>
<div class="line">    $progress_bar-&gt;update (<span class="stringliteral">&quot;Grid loading $count elements (cells)&quot;</span>, 0);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Delete any old cells</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ($self-&gt;{cells_group}) {</div>
<div class="line">        $self-&gt;{cells_group}-&gt;destroy();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make group so we can transform everything together</span></div>
<div class="line"><span class="preprocessor"></span>    my $cells_group = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">        $self-&gt;{canvas}-&gt;root,</div>
<div class="line">        <span class="stringliteral">&#39;Gnome2::Canvas::Group&#39;</span>,</div>
<div class="line">        x =&gt; 0,</div>
<div class="line">        y =&gt; 0,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">##  DEBUG add a background rect - should buffer the extents by 2 cells or more</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">## Make container group (&quot;cell&quot;) for the rectangle and any marks</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#my $xx = eval {($maxX - $minX) / $cellX};</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#my $yy = eval {($maxY - $minY) / $cellY};</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#my $container_xx = Gnome2::Canvas::Item-&gt;new (</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    $cells_group,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    &#39;Gnome2::Canvas::Group&#39;,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    x =&gt; 0,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    y =&gt; 0,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#);</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#my $rect = Gnome2::Canvas::Item-&gt;new (</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    $container_xx,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    &#39;Gnome2::Canvas::Rect&#39;,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    x1                  =&gt; 0,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    y1                  =&gt; 0,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    x2                  =&gt; $xx * CELL_SIZE_X,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    y2                  =&gt; $yy * $cell_size_y,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    fill_color_gdk      =&gt; CELL_WHITE,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    outline_color_gdk   =&gt; CELL_BLACK,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    width_pixels        =&gt; $width_pixels</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#);</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    $self-&gt;{cells_group} = $cells_group;</div>
<div class="line">    $cells_group-&gt;lower_to_bottom();</div>
<div class="line"></div>
<div class="line">    my $i = 0;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $element (keys %$elts) {</div>
<div class="line">        no warnings <span class="stringliteral">&#39;uninitialized&#39;</span>;  #  suppress these warnings</div>
<div class="line">        </div>
<div class="line">        $progress_bar-&gt;update (</div>
<div class="line">            <span class="stringliteral">&quot;Grid loading $i of $count elements (cells)&quot;</span>,</div>
<div class="line">            $i / $count</div>
<div class="line">        );</div>
<div class="line">        $i++;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #FIXME: ????:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        # NOTE: this will stuff things, since we store $element in INDEX_ELEMENT</span></div>
<div class="line"><span class="preprocessor"></span>        my ($x_bd, $y_bd) = $data-&gt;get_element_name_coord (element =&gt; $element);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Transform into number of cells in X and Y directions</span></div>
<div class="line"><span class="preprocessor"></span>        my $x = eval {($x_bd - $minX) / $cellX};</div>
<div class="line">        my $y = eval {($y_bd - $minY) / $cellY};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # We shift by half the cell size to make the coordinate hits cells center</span></div>
<div class="line"><span class="preprocessor"></span>        my $xcoord = $x * CELL_SIZE_X  - CELL_SIZE_X  / 2;</div>
<div class="line">        my $ycoord = $y * $cell_size_y - $cell_size_y / 2;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#my $testx = $x * CELL_SIZE_X;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#my $testy = $y * $cell_size_y;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#my @test = $self-&gt;units_canvas2basestruct ($testx, $testy);</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        # Make container group (&quot;cell&quot;) for the rectangle and any marks</span></div>
<div class="line"><span class="preprocessor"></span>        my $container = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">            $cells_group,</div>
<div class="line">            <span class="stringliteral">&#39;Gnome2::Canvas::Group&#39;</span>,</div>
<div class="line">            x =&gt; $xcoord,</div>
<div class="line">            y =&gt; $ycoord</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # (all coords now relative to the group)</span></div>
<div class="line"><span class="preprocessor"></span>        my $rect = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">            $container,</div>
<div class="line">            <span class="stringliteral">&#39;Gnome2::Canvas::Rect&#39;</span>,</div>
<div class="line">            x1                  =&gt; 0,</div>
<div class="line">            y1                  =&gt; 0,</div>
<div class="line">            x2                  =&gt; CELL_SIZE_X,</div>
<div class="line">            y2                  =&gt; $cell_size_y,</div>
<div class="line">            fill_color_gdk      =&gt; CELL_WHITE,</div>
<div class="line">            outline_color_gdk   =&gt; CELL_BLACK,</div>
<div class="line">            width_pixels        =&gt; $width_pixels</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        $container-&gt;signal_connect_swapped (event =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a61d5a576ebec48fcb9276b6ce2109691">onEvent</a>, $self);</div>
<div class="line"></div>
<div class="line">        $self-&gt;{cells}{$container}[INDEX_COLOUR]  = CELL_WHITE;</div>
<div class="line">        $self-&gt;{cells}{$container}[INDEX_ELEMENT] = $element;</div>
<div class="line">        $self-&gt;{cells}{$container}[INDEX_RECT]    = $rect;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  add to the r-tree</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #  (profiling indicates this takes most of the time in this sub)</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (defined $self-&gt;{select_func} &amp;&amp; $self-&gt;{build_rtree}) {</div>
<div class="line">            $self-&gt;{rtree}-&gt;insert( #  Tree::R method</div>
<div class="line">                $element,</div>
<div class="line">                $x_bd - $cellX / 2,  #  basestruct units</div>
<div class="line">                $y_bd - $cellY / 2,</div>
<div class="line">                $x_bd + $cellX / 2,</div>
<div class="line">                $y_bd + $cellY / 2,</div>
<div class="line">            );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $progress_bar = undef;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  THIS SHOULD BE ABOVE THE init_grid CALL to display properly from first?</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # Flip the y-axis (default has origin top-left with y going down)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # Add border</span></div>
<div class="line"><span class="preprocessor"></span>    my $total_cells_X   = eval {($maxX - $minX) / $cellX} || 1;  #  <span class="keywordflow">default</span> to one cell <span class="keywordflow">if</span> undef</div>
<div class="line">    my $total_cells_Y   = defined $maxY</div>
<div class="line">        ? eval {($maxY - $minY) / $cellY} || 1</div>
<div class="line">        : 1;</div>
<div class="line">    my $width           = $total_cells_X * CELL_SIZE_X;</div>
<div class="line">    my $height          = $total_cells_Y * $cell_size_y;</div>
<div class="line">    </div>
<div class="line">    $self-&gt;{width_units}  = $width  + 2*BORDER_SIZE;</div>
<div class="line">    $self-&gt;{height_units} = $height + 4*BORDER_SIZE;</div>
<div class="line"></div>
<div class="line">    $cells_group-&gt;affine_absolute([</div>
<div class="line">        1,</div>
<div class="line">        0,</div>
<div class="line">        0,</div>
<div class="line">        -1,</div>
<div class="line">        BORDER_SIZE,</div>
<div class="line">        $height + 2*BORDER_SIZE,</div>
<div class="line">    ]);</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    # Set visible region</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{canvas}-&gt;set_scroll_region(</div>
<div class="line">        0,</div>
<div class="line">        0,</div>
<div class="line">        $self-&gt;{width_units},</div>
<div class="line">        $self-&gt;{height_units},</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Update</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;setupScrollbars();</div>
<div class="line">    $self-&gt;resizeBackgroundRect();</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  show legend by default - gets hidden by caller if needed</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;showLegend;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Store info needed by loadShapefile</span></div>
<div class="line"><span class="preprocessor"></span>    $self-&gt;{dataset_info} = [$minX, $minY, $maxX, $maxY, $cellX, $cellY];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ab8fbe2ec12cfce99ed468c0ab16cada3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::setCalculationList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setCalculationList' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-setCalculationList-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setCalculationList-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setCalculationList-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in setCalculationList: 14</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ab8fbe2ec12cfce99ed468c0ab16cada3">setCalculationList</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $list_name = shift;</div>
<div class="line">    print <span class="stringliteral">&quot;[Grid] Setting calculation list to $list_name\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">    my $elts = $self-&gt;{base_struct}-&gt;get_element_hash();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $element (sort keys %{$elts}) {</div>
<div class="line">        my $cell = $self-&gt;{element_group}{$element};</div>
<div class="line">        $cell-&gt;[INDEX_VALUES] = $elts-&gt;{$element}{$list_name};</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aedaa13e0d9d3fb79e4d7a8103599f74c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::setLegendHue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setLegendHue' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-setLegendHue-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setLegendHue-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setLegendHue-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in setLegendHue: 21</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#aedaa13e0d9d3fb79e4d7a8103599f74c">setLegendHue</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $rgb = shift;</div>
<div class="line"></div>
<div class="line">    my @x = (<a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a3694f5b6c5125b9762647a4d1db56bf1">rgb_to_hsv</a>($rgb-&gt;red / 257, $rgb-&gt;green /257, $rgb-&gt;blue / 257));</div>
<div class="line"></div>
<div class="line">    my $hue = (<a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a3694f5b6c5125b9762647a4d1db56bf1">rgb_to_hsv</a>($rgb-&gt;red / 257, $rgb-&gt;green /257, $rgb-&gt;blue / 257))[0];</div>
<div class="line">    my $last_hue_used = $self-&gt;get_legend_hue;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keywordflow">if</span> defined $last_hue_used &amp;&amp; $hue == $last_hue_used;</div>
<div class="line"></div>
<div class="line">    $self-&gt;{hue} = $hue;</div>
<div class="line"></div>
<div class="line">    $self-&gt;colourCells();</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Update legend</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ($self-&gt;{legend}) { </div>
<div class="line">        $self-&gt;{legend}-&gt;set(pixbuf =&gt; $self-&gt;makeLegendPixbuf() );</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a7f079bd138c2b92d42ef2b117e4cac8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::setLegendMinMax </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setLegendMinMax' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-setLegendMinMax-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setLegendMinMax-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setLegendMinMax-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in setLegendMinMax: 40</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a7f079bd138c2b92d42ef2b117e4cac8f">setLegendMinMax</a> {</div>
<div class="line">    my ($self, $min, $max) = @_;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keywordflow">if</span> ! ($self-&gt;{marks}</div>
<div class="line">                 &amp;&amp; defined $min</div>
<div class="line">                 &amp;&amp; defined $max</div>
<div class="line">                );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Set legend textbox markers</span></div>
<div class="line"><span class="preprocessor"></span>    my $marker_step = ($max - $min) / 3;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (0..3) {</div>
<div class="line">        my $val = $min + $i * $marker_step;</div>
<div class="line">        my $text = $self-&gt;format_number_for_display (number =&gt; $val);</div>
<div class="line">        my $text_num = $text;  #  need to not have <span class="stringliteral">&#39;&lt;=&#39;</span> and <span class="stringliteral">&#39;&gt;=&#39;</span> in comparison lower down</div>
<div class="line">        <span class="keywordflow">if</span> ($i == 0 and $self-&gt;{legend_lt_flag}) {</div>
<div class="line">            $text = <span class="stringliteral">&#39;&lt;=&#39;</span> . $text;</div>
<div class="line">        }</div>
<div class="line">        elsif ($i == 3 and $self-&gt;{legend_gt_flag}) {</div>
<div class="line">            $text = <span class="stringliteral">&#39;&gt;=&#39;</span> . $text;</div>
<div class="line">        }</div>
<div class="line">        elsif ($self-&gt;{legend_lt_flag} or $self-&gt;{legend_gt_flag}) {</div>
<div class="line">            $text = <span class="stringliteral">&#39;  &#39;</span> . $text;</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        my $mark = $self-&gt;{marks}[3 - $i];</div>
<div class="line">        $mark-&gt;set( text =&gt; $text );</div>
<div class="line"><span class="preprocessor">        #  move the mark to right align with the legend</span></div>
<div class="line"><span class="preprocessor"></span>        my @bounds = $mark-&gt;get_bounds;</div>
<div class="line">        my @lbounds = $self-&gt;{legend}-&gt;get_bounds;</div>
<div class="line">        my $offset = $lbounds[0] - $bounds[2];</div>
<div class="line">        <span class="keywordflow">if</span> (($text_num + 0) != 0) {</div>
<div class="line">            $mark-&gt;move ($offset - length ($text), 0);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            $mark-&gt;move ($offset - length ($text) - 0.5, 0);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a78a89852abe040c2d28ce52ed0256dd4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::setLegendMode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setLegendMode' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-setLegendMode-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setLegendMode-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setLegendMode-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in setLegendMode: 18</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a78a89852abe040c2d28ce52ed0256dd4">setLegendMode</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $mode = shift;</div>
<div class="line">    </div>
<div class="line">    croak <span class="stringliteral">&quot;Invalid display mode &#39;$mode&#39;\n&quot;</span></div>
<div class="line">        <span class="keywordflow">if</span> not $mode =~ /^Hue|Sat|Grey$/;</div>
<div class="line">    </div>
<div class="line">    $self-&gt;{legend_mode} = $mode;</div>
<div class="line"></div>
<div class="line">    $self-&gt;colourCells();</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Update legend</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ($self-&gt;{legend}) { </div>
<div class="line">        $self-&gt;{legend}-&gt;set(pixbuf =&gt; $self-&gt;makeLegendPixbuf() );</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ac9c1fa2fcfdbf54f25bfe7e58ac2c984"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::setOverlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setOverlay' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-setOverlay-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setOverlay-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setOverlay-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in setOverlay: 18</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ac9c1fa2fcfdbf54f25bfe7e58ac2c984">setOverlay</a> {</div>
<div class="line">    my $self      = shift;</div>
<div class="line">    my $shapefile = shift;</div>
<div class="line">    my $colour    = shift || OVERLAY_COLOUR;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Delete any existing</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ($self-&gt;{shapefile_group}) {</div>
<div class="line">        $self-&gt;{shapefile_group}-&gt;destroy;</div>
<div class="line">        <span class="keyword">delete</span> $self-&gt;{shapefile_group};</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ($shapefile) {</div>
<div class="line">        my @args = @{ $self-&gt;{dataset_info} };</div>
<div class="line">        $self-&gt;loadShapefile(@args, $shapefile, $colour);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a4488b4860c8b2aa17de39b85ee5af1fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::setupScrollbars </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setupScrollbars' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-setupScrollbars-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setupScrollbars-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setupScrollbars-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in setupScrollbars: 20</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a4488b4860c8b2aa17de39b85ee5af1fb">setupScrollbars</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my ($total_width, $total_height) = $self-&gt;{canvas}-&gt;w2c($self-&gt;{width_units}, $self-&gt;{height_units});</div>
<div class="line"></div>
<div class="line">    $self-&gt;{hadjust}-&gt;upper( $total_width );</div>
<div class="line">    $self-&gt;{vadjust}-&gt;upper( $total_height );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($self-&gt;{width_px}) {</div>
<div class="line">        $self-&gt;{hadjust}-&gt;page_size( $self-&gt;{width_px} );</div>
<div class="line">        $self-&gt;{vadjust}-&gt;page_size( $self-&gt;{height_px} );</div>
<div class="line"></div>
<div class="line">        $self-&gt;{hadjust}-&gt;page_increment( $self-&gt;{width_px} / 2 );</div>
<div class="line">        $self-&gt;{vadjust}-&gt;page_increment( $self-&gt;{height_px} / 2 );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $self-&gt;{hadjust}-&gt;changed;</div>
<div class="line">    $self-&gt;{vadjust}-&gt;changed;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aa7cf586a3805b43fd19a6fb51f120d3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::setupValueLabel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setupValueLabel' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-setupValueLabel-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setupValueLabel-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setupValueLabel-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in setupValueLabel: 40</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#aa7cf586a3805b43fd19a6fb51f120d3b">setupValueLabel</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $group = shift;</div>
<div class="line"></div>
<div class="line">    my $value_group = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">        $self-&gt;{canvas}-&gt;root,</div>
<div class="line">        <span class="stringliteral">&#39;Gnome2::Canvas::Group&#39;</span>,</div>
<div class="line">        x =&gt; 0,</div>
<div class="line">        y =&gt; 100,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    my $text = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">        $value_group,</div>
<div class="line">        <span class="stringliteral">&#39;Gnome2::Canvas::Text&#39;</span>,</div>
<div class="line">        x =&gt; 0, y =&gt; 0,</div>
<div class="line">        markup =&gt; <span class="stringliteral">&quot;&lt;b&gt;Value: &lt;/b&gt;&quot;</span>,</div>
<div class="line">        anchor =&gt; <span class="stringliteral">&#39;nw&#39;</span>,</div>
<div class="line">        fill_color_gdk =&gt; CELL_BLACK,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    my ($text_width, $text_height)</div>
<div class="line">        = $text-&gt;get(<span class="stringliteral">&#39;text-width&#39;</span>, <span class="stringliteral">&#39;text-height&#39;</span>);</div>
<div class="line"></div>
<div class="line">    my $rect = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">        $value_group,</div>
<div class="line">        <span class="stringliteral">&#39;Gnome2::Canvas::Rect&#39;</span>,</div>
<div class="line">        x1 =&gt; 0,</div>
<div class="line">        y1 =&gt; 0,</div>
<div class="line">        x2 =&gt; $text_width,</div>
<div class="line">        y2 =&gt; $text_height,</div>
<div class="line">        fill_color_gdk =&gt; CELL_WHITE,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    $rect-&gt;lower(1);</div>
<div class="line">    $self-&gt;{value_group} = $value_group;</div>
<div class="line">    $self-&gt;{value_text} = $text;</div>
<div class="line">    $self-&gt;{value_rect} = $rect;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2fca704a51a5672406823c520c22a245"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::setValueLabel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setValueLabel' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-setValueLabel-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setValueLabel-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setValueLabel-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in setValueLabel: 13</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a2fca704a51a5672406823c520c22a245">setValueLabel</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $val = shift;</div>
<div class="line"></div>
<div class="line">    $self-&gt;{value_text}-&gt;set(markup =&gt; <span class="stringliteral">&quot;&lt;b&gt;Value: &lt;/b&gt;$val&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Resize value background rectangle</span></div>
<div class="line"><span class="preprocessor"></span>    my ($text_width, $text_height)</div>
<div class="line">        = $self-&gt;{value_text}-&gt;get(<span class="stringliteral">&#39;text-width&#39;</span>, <span class="stringliteral">&#39;text-height&#39;</span>);</div>
<div class="line">    $self-&gt;{value_rect}-&gt;set(x2 =&gt; $text_width, y2 =&gt; $text_height);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a91cc10c0592e77213cd8f064f566a682"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::showLegend </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-showLegend' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-showLegend-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-showLegend-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-showLegend-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in showLegend: 32</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a91cc10c0592e77213cd8f064f566a682">showLegend</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"><span class="preprocessor">    #print &quot;already have legend!\n&quot; if $self-&gt;{legend};</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> <span class="keywordflow">if</span> $self-&gt;{legend};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Create legend</span></div>
<div class="line"><span class="preprocessor"></span>    my $pixbuf = $self-&gt;makeLegendPixbuf;</div>
<div class="line">    </div>
<div class="line">    $self-&gt;{legend} = Gnome2::Canvas::Item-&gt;new (</div>
<div class="line">        $self-&gt;{canvas}-&gt;root,</div>
<div class="line">        <span class="stringliteral">&#39;Gnome2::Canvas::Pixbuf&#39;</span>,</div>
<div class="line">        pixbuf           =&gt; $pixbuf,</div>
<div class="line">        width_in_pixels  =&gt; 1,</div>
<div class="line">        height_in_pixels =&gt; 1,</div>
<div class="line">        <span class="stringliteral">&#39;height-set&#39;</span>     =&gt; 1,</div>
<div class="line">        width            =&gt; LEGEND_WIDTH,</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    $self-&gt;{legend}-&gt;raise_to_top();</div>
<div class="line">    $self-&gt;{back_rect}-&gt;lower_to_bottom();</div>
<div class="line"></div>
<div class="line">    $self-&gt;{marks}[0] = $self-&gt;makeMark( <span class="stringliteral">&#39;nw&#39;</span> );</div>
<div class="line">    $self-&gt;{marks}[1] = $self-&gt;makeMark( <span class="charliteral">&#39;w&#39;</span>  );</div>
<div class="line">    $self-&gt;{marks}[2] = $self-&gt;makeMark( <span class="charliteral">&#39;w&#39;</span>  );</div>
<div class="line">    $self-&gt;{marks}[3] = $self-&gt;makeMark( <span class="stringliteral">&#39;sw&#39;</span> );</div>
<div class="line">    </div>
<div class="line">    eval {</div>
<div class="line">        $self-&gt;reposition;  #  trigger a redisplay of the legend</div>
<div class="line">    };</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a0eacb23c04f55e7e35607d4c1c56b623"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::units_canvas2basestruct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-units_canvas2basestruct' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-units_canvas2basestruct-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-units_canvas2basestruct-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-units_canvas2basestruct-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in units_canvas2basestruct: 20</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a0eacb23c04f55e7e35607d4c1c56b623">units_canvas2basestruct</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my ($x, $y) = @_;</div>
<div class="line">    </div>
<div class="line">    my $cellsizes = $self-&gt;{base_struct_cellsizes};</div>
<div class="line">    my $bounds    = $self-&gt;{base_struct_bounds};</div>
<div class="line">    </div>
<div class="line">    my $cellsize_canvas_x = CELL_SIZE_X;</div>
<div class="line">    my $cellsize_canvas_y = $self-&gt;{cell_size_y};</div>
<div class="line">    </div>
<div class="line">    my $x_cell_units = $x / $cellsize_canvas_x;</div>
<div class="line">    my $x_base_units = ($x_cell_units * $cellsizes-&gt;[0]) + $bounds-&gt;[0];</div>
<div class="line">    </div>
<div class="line">    my $y_cell_units = $y / $cellsize_canvas_y;</div>
<div class="line">    my $y_base_units = ($y_cell_units * $cellsizes-&gt;[1]) + ($bounds-&gt;[1] || 0);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> wantarray</div>
<div class="line">        ? ($x_base_units, $y_base_units)</div>
<div class="line">        : [$x_base_units, $y_base_units];</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a2cea4d602b8c0a78fbcc707dea03c555"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::updateScrollbars </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-updateScrollbars' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-updateScrollbars-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-updateScrollbars-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-updateScrollbars-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in updateScrollbars: 9</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a2cea4d602b8c0a78fbcc707dea03c555">updateScrollbars</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line"></div>
<div class="line">    my ($scrollx, $scrolly) = $self-&gt;{canvas}-&gt;get_scroll_offsets();</div>
<div class="line">    $self-&gt;{hadjust}-&gt;set_value($scrollx);</div>
<div class="line">    $self-&gt;{vadjust}-&gt;set_value($scrolly);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ae0ebc7237d5fc2c26219fa6aa435a08f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::zoomFit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-zoomFit' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-zoomFit-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-zoomFit-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-zoomFit-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in zoomFit: 8</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#ae0ebc7237d5fc2c26219fa6aa435a08f">zoomFit</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    $self-&gt;{zoom_fit} = 1;</div>
<div class="line">    $self-&gt;fitGrid();</div>
<div class="line">    $self-&gt;postZoom();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="aca830fd8fec18c11bedd99399cb23fb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::zoomIn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-zoomIn' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-zoomIn-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-zoomIn-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-zoomIn-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in zoomIn: 9</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#aca830fd8fec18c11bedd99399cb23fb1">zoomIn</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $ppu = $self-&gt;{canvas}-&gt;get_pixels_per_unit();</div>
<div class="line">    $self-&gt;{canvas}-&gt;set_pixels_per_unit( $ppu * 1.5 );</div>
<div class="line">    $self-&gt;{zoom_fit} = 0;</div>
<div class="line">    $self-&gt;postZoom();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a5570f048f39e4b57664eb42b749a28e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::Grid::zoomOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-zoomOut' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-zoomOut-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-zoomOut-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-zoomOut-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in zoomOut: 9</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1Grid.html#a5570f048f39e4b57664eb42b749a28e4">zoomOut</a> {</div>
<div class="line">    my $self = shift;</div>
<div class="line">    my $ppu = $self-&gt;{canvas}-&gt;get_pixels_per_unit();</div>
<div class="line">    $self-&gt;{canvas}-&gt;set_pixels_per_unit( $ppu / 1.5 );</div>
<div class="line">    $self-&gt;{zoom_fit} = 0;</div>
<div class="line">    $self-&gt;postZoom();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/Biodiverse/GUI/<a class="el" href="Grid_8pm_source.html">Grid.pm</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Biodiverse</b></li><li class="navelem"><b>GUI</b></li><li class="navelem"><a class="el" href="classBiodiverse_1_1GUI_1_1Grid.html">Grid</a></li>
    <li class="footer">Generated on Tue Nov 5 2013 19:07:37 for Biodiverse by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
