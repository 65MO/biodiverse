<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Biodiverse: Biodiverse::GUI::BasedataImport Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Biodiverse
   &#160;<span id="projectnumber">0.19</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classBiodiverse_1_1GUI_1_1BasedataImport.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classBiodiverse_1_1GUI_1_1BasedataImport-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Biodiverse::GUI::BasedataImport Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Biodiverse::GUI::BasedataImport:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classBiodiverse_1_1GUI_1_1BasedataImport__coll__graph.png" border="0" usemap="#Biodiverse_1_1GUI_1_1BasedataImport_coll__map" alt="Collaboration graph"/></div>
<map name="Biodiverse_1_1GUI_1_1BasedataImport_coll__map" id="Biodiverse_1_1GUI_1_1BasedataImport_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a394fcc0c0d092f99f10838ad742e4dff"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a394fcc0c0d092f99f10838ad742e4dff"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>import_n</b></td></tr>
<tr class="separator:a394fcc0c0d092f99f10838ad742e4dff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57ed6a35a14ccfc81914284a99e9b54e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a57ed6a35a14ccfc81914284a99e9b54e"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>dlg_name</b></td></tr>
<tr class="separator:a57ed6a35a14ccfc81914284a99e9b54e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ac3a4dd9b7991e0f4e8eb5f06e8bd1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa4ac3a4dd9b7991e0f4e8eb5f06e8bd1"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>chkNew</b></td></tr>
<tr class="separator:aa4ac3a4dd9b7991e0f4e8eb5f06e8bd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7d834db89065b508693f3bcbac3a850"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad7d834db89065b508693f3bcbac3a850"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>btnNext</b></td></tr>
<tr class="separator:ad7d834db89065b508693f3bcbac3a850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82f92d11dbd97d7e36a328056d57a608"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a82f92d11dbd97d7e36a328056d57a608"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>comboImportBasedatas</b></td></tr>
<tr class="separator:a82f92d11dbd97d7e36a328056d57a608"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaf53c1b854b92c52dffab7a474eaa8e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeaf53c1b854b92c52dffab7a474eaa8e"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>filechooserInput</b></td></tr>
<tr class="separator:aeaf53c1b854b92c52dffab7a474eaa8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0db5c2e7ccb999de33c05ec4190baa9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab0db5c2e7ccb999de33c05ec4190baa9"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>txtImportNew</b></td></tr>
<tr class="separator:ab0db5c2e7ccb999de33c05ec4190baa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91bf447a1262c6bdf54735a7ec164278"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a91bf447a1262c6bdf54735a7ec164278"></a>
scalar&#160;</td><td class="memItemRight" valign="bottom"><b>tableParameters</b></td></tr>
<tr class="separator:a91bf447a1262c6bdf54735a7ec164278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3899875570a118c763ca19a26eb1528"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa3899875570a118c763ca19a26eb1528"></a>
hash&#160;</td><td class="memItemRight" valign="bottom"><b>results</b></td></tr>
<tr class="separator:aa3899875570a118c763ca19a26eb1528"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Avaliable Methods</h2></td></tr>
<tr class="memitem:ad5626b0b654acae4a217396e99d811ec"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#ad5626b0b654acae4a217396e99d811ec">setupReorderList</a> ()</td></tr>
<tr class="separator:ad5626b0b654acae4a217396e99d811ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054f614613726d9d31c8c666831241c1"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a054f614613726d9d31c8c666831241c1">makeReorderDialog</a> ()</td></tr>
<tr class="separator:a054f614613726d9d31c8c666831241c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87b9aad295fcbefe4b01f231d43c30f6"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a87b9aad295fcbefe4b01f231d43c30f6">addRow</a> ()</td></tr>
<tr class="separator:a87b9aad295fcbefe4b01f231d43c30f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c1f3fbd4d9277247d68e660cc689267"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a5c1f3fbd4d9277247d68e660cc689267">onUpDown</a> ()</td></tr>
<tr class="separator:a5c1f3fbd4d9277247d68e660cc689267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1335229a190447cc0aa587a913d22d3a"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a1335229a190447cc0aa587a913d22d3a">explain_remap_col_options</a> ()</td></tr>
<tr class="separator:a1335229a190447cc0aa587a913d22d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53afc90128d489b84593e1ddc097f183"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a53afc90128d489b84593e1ddc097f183">fillParams</a> ()</td></tr>
<tr class="separator:a53afc90128d489b84593e1ddc097f183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af35198c4b47dd9d2f118f3634a45acd1"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#af35198c4b47dd9d2f118f3634a45acd1">makeRemapColumnsDialog</a> ()</td></tr>
<tr class="separator:af35198c4b47dd9d2f118f3634a45acd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ab9c0e666ee796ae6b348b3934c4eb8"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a4ab9c0e666ee796ae6b348b3934c4eb8">onNewToggled</a> ()</td></tr>
<tr class="separator:a4ab9c0e666ee796ae6b348b3934c4eb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49fbed1048b5bb804de6179898b5217c"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a49fbed1048b5bb804de6179898b5217c">onFileChanged</a> ()</td></tr>
<tr class="separator:a49fbed1048b5bb804de6179898b5217c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aefee59dbfabe6bf593d13aeb14cfe6"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a6aefee59dbfabe6bf593d13aeb14cfe6">run</a> ()</td></tr>
<tr class="separator:a6aefee59dbfabe6bf593d13aeb14cfe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87f7201ed059131465df3dad6184e80b"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a87f7201ed059131465df3dad6184e80b">getColumnSettings</a> ()</td></tr>
<tr class="separator:a87f7201ed059131465df3dad6184e80b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a270c2515e45e2b1647f5c3549acc0c04"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a270c2515e45e2b1647f5c3549acc0c04">check_if_r_data_frame</a> ()</td></tr>
<tr class="separator:a270c2515e45e2b1647f5c3549acc0c04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a771ead5712e8d41890a1777cfd41b409"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a771ead5712e8d41890a1777cfd41b409">getRemapInfo</a> ()</td></tr>
<tr class="separator:a771ead5712e8d41890a1777cfd41b409"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade686542cddd3ed03ce74183481e517f"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#ade686542cddd3ed03ce74183481e517f">makeColumnsDialog</a> ()</td></tr>
<tr class="separator:ade686542cddd3ed03ce74183481e517f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26add8e097cac4d1d74504aff872d4f8"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a26add8e097cac4d1d74504aff872d4f8">addRemapRow</a> ()</td></tr>
<tr class="separator:a26add8e097cac4d1d74504aff872d4f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27d50b82bebaaaf7e3428332b4f2052f"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a27d50b82bebaaaf7e3428332b4f2052f">onTypeComboChanged</a> ()</td></tr>
<tr class="separator:a27d50b82bebaaaf7e3428332b4f2052f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb2d7098803fdef1e855acdbf6742eb3"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#afb2d7098803fdef1e855acdbf6742eb3">show_expl_dialog</a> ()</td></tr>
<tr class="separator:afb2d7098803fdef1e855acdbf6742eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2814d3e57072b75e7ec24f22a67bdcd"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#ac2814d3e57072b75e7ec24f22a67bdcd">makeFilenameDialog</a> ()</td></tr>
<tr class="separator:ac2814d3e57072b75e7ec24f22a67bdcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a315f33f27641f927717cbb7567618dbf"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a315f33f27641f927717cbb7567618dbf">explain_import_col_options</a> ()</td></tr>
<tr class="separator:a315f33f27641f927717cbb7567618dbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24b765f3be72896c16278487ea8ac155"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a24b765f3be72896c16278487ea8ac155">getRemapColumnSettings</a> ()</td></tr>
<tr class="separator:a24b765f3be72896c16278487ea8ac155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ce46fcf74d4d682553991436e5ef28"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a05ce46fcf74d4d682553991436e5ef28">onNewChanged</a> ()</td></tr>
<tr class="separator:a05ce46fcf74d4d682553991436e5ef28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b089fe4c44ae66050a555e43096a7da"><td class="memItemLeft" align="right" valign="top">public method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a3b089fe4c44ae66050a555e43096a7da">unselectOther</a> ()</td></tr>
<tr class="separator:a3b089fe4c44ae66050a555e43096a7da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="BasedataImport_8pm_source.html#l00021">21</a> of file <a class="el" href="BasedataImport_8pm_source.html">BasedataImport.pm</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a26add8e097cac4d1d74504aff872d4f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::addRemapRow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-addRemapRow' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-addRemapRow-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-addRemapRow-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-addRemapRow-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in addRemapRow: 35</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a26add8e097cac4d1d74504aff872d4f8">addRemapRow</a> {</div>
<div class="line">    my ($row_widgets, $table, $colId, $header, $other_props, $column_overrides) = @_;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  column number</span></div>
<div class="line"><span class="preprocessor"></span>    my $i_label = Gtk2::Label-&gt;new($colId);</div>
<div class="line">    $i_label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $i_label-&gt;set_use_markup(1);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Column header</span></div>
<div class="line"><span class="preprocessor"></span>    my $label = Gtk2::Label-&gt;new(<span class="stringliteral">&quot;&lt;tt&gt;$header&lt;/tt&gt;&quot;</span>);</div>
<div class="line">    $label-&gt;set_use_markup(1);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Type combo box</span></div>
<div class="line"><span class="preprocessor"></span>    my $combo = Gtk2::ComboBox-&gt;new_text;</div>
<div class="line">    my @options = $column_overrides</div>
<div class="line">        ? @$column_overrides</div>
<div class="line">        : (qw /Input_element Remapped_element Include Exclude Property/, @$other_props);</div>
<div class="line">    unshift @options, <span class="stringliteral">&#39;Ignore&#39;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> (@options) {</div>
<div class="line">        $combo-&gt;append_text($_);</div>
<div class="line">    }</div>
<div class="line">    $combo-&gt;set_active(0);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Attach to table</span></div>
<div class="line"><span class="preprocessor"></span>    $table-&gt;attach($i_label, 0, 1, $colId + 1, $colId + 2, <span class="stringliteral">&#39;shrink&#39;</span>, <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line">    $table-&gt;attach($label, 1, 2, $colId + 1, $colId + 2, <span class="stringliteral">&#39;shrink&#39;</span>, <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line">    $table-&gt;attach($combo, 2, 3, $colId + 1, $colId + 2, <span class="stringliteral">&#39;shrink&#39;</span>, <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    # Store widgets</span></div>
<div class="line"><span class="preprocessor"></span>    $row_widgets-&gt;[$colId] = [$combo];</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a87b9aad295fcbefe4b01f231d43c30f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::addRow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-addRow' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-addRow-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-addRow-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-addRow-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in addRow: 87</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a87b9aad295fcbefe4b01f231d43c30f6">addRow</a> {</div>
<div class="line">    my ($row_widgets, $table, $colId, $header, $row_options) = @_;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (!defined $header) {</div>
<div class="line">        $header = q{};</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ((ref $row_options) !~ /ARRAY/ or scalar @$row_options == 0) {</div>
<div class="line">        $row_options = [qw /</div>
<div class="line">            Ignore</div>
<div class="line">            Label</div>
<div class="line">            Group</div>
<div class="line">            Text_group</div>
<div class="line">            Sample_counts</div>
<div class="line">            Include_columns</div>
<div class="line">            Exclude_columns</div>
<div class="line">        /];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  column number</span></div>
<div class="line"><span class="preprocessor"></span>    my $i_label = Gtk2::Label-&gt;new($colId);</div>
<div class="line">    $i_label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $i_label-&gt;set_use_markup(1);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Column header    </span></div>
<div class="line"><span class="preprocessor"></span>    my $label = Gtk2::Label-&gt;new(<span class="stringliteral">&quot;&lt;tt&gt;$header&lt;/tt&gt;&quot;</span>);</div>
<div class="line">    $label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $label-&gt;set_use_markup(1);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Type combo box</span></div>
<div class="line"><span class="preprocessor"></span>    my $combo = Gtk2::ComboBox-&gt;new_text;</div>
<div class="line">    <span class="keywordflow">foreach</span> (@$row_options) {</div>
<div class="line">        $combo-&gt;append_text($_);</div>
<div class="line">    }</div>
<div class="line">    $combo-&gt;set_active(0);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Cell sizes/snaps</span></div>
<div class="line"><span class="preprocessor"></span>    my $adj1  = Gtk2::Adjustment-&gt;new (100000, 0, 10000000, 100, 10000, 0);</div>
<div class="line">    my $spin1 = Gtk2::SpinButton-&gt;new ($adj1, 100, 7);</div>
<div class="line"></div>
<div class="line">    my $adj2  = Gtk2::Adjustment-&gt;new (0, -1000000, 1000000, 100, 10000, 0);</div>
<div class="line">    my $spin2 = Gtk2::SpinButton-&gt;new ($adj2, 100, 7);</div>
<div class="line"></div>
<div class="line">    $spin1-&gt;hide(); # By <span class="keywordflow">default</span>, columns are <span class="stringliteral">&quot;ignored&quot;</span> so cell sizes don<span class="stringliteral">&#39;t apply</span></div>
<div class="line"><span class="stringliteral">    $spin2-&gt;hide();</span></div>
<div class="line"><span class="stringliteral">    $spin1-&gt;set_numeric(1);</span></div>
<div class="line"><span class="stringliteral">    $spin2-&gt;set_numeric(1);</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral">    #  degrees minutes seconds</span></div>
<div class="line"><span class="stringliteral">    my $combo_dms = Gtk2::ComboBox-&gt;new_text;</span></div>
<div class="line"><span class="stringliteral">    $combo_dms-&gt;set_has_tooltip (1);</span></div>
<div class="line"><span class="stringliteral">    my $tooltip_text = q{Set to &#39;</span>is_lat<span class="stringliteral">&#39; if column contains latitude values, }</span></div>
<div class="line"><span class="stringliteral">                       . q{&#39;</span>is_lon<span class="stringliteral">&#39; if longitude values. Leave as blank if neither.};</span></div>
<div class="line"><span class="stringliteral">    $combo_dms-&gt;set_tooltip_text ($tooltip_text);</span></div>
<div class="line"><span class="stringliteral">    foreach my $choice (&#39;</span><span class="stringliteral">&#39;, &#39;</span>is_lat<span class="stringliteral">&#39;, &#39;</span>is_lon<span class="stringliteral">&#39;) {</span></div>
<div class="line"><span class="stringliteral">        $combo_dms-&gt;append_text($choice);</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral">    $combo_dms-&gt;set_active(0);</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    # Attach to table</span></div>
<div class="line"><span class="stringliteral">    my $i = 0;</span></div>
<div class="line"><span class="stringliteral">    foreach my $option ($i_label, $label, $combo, $spin1, $spin2, $combo_dms) {</span></div>
<div class="line"><span class="stringliteral">        $table-&gt;attach(</span></div>
<div class="line"><span class="stringliteral">            $option,</span></div>
<div class="line"><span class="stringliteral">            $i,</span></div>
<div class="line"><span class="stringliteral">            $i + 1,</span></div>
<div class="line"><span class="stringliteral">            $colId + 1,</span></div>
<div class="line"><span class="stringliteral">            $colId + 2,</span></div>
<div class="line"><span class="stringliteral">            &#39;</span>shrink<span class="stringliteral">&#39;,</span></div>
<div class="line"><span class="stringliteral">            &#39;</span>shrink<span class="stringliteral">&#39;,</span></div>
<div class="line"><span class="stringliteral">            0,</span></div>
<div class="line"><span class="stringliteral">            0,</span></div>
<div class="line"><span class="stringliteral">        );</span></div>
<div class="line"><span class="stringliteral">        $i++;</span></div>
<div class="line"><span class="stringliteral">    }</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    # Signal to enable/disable spin buttons</span></div>
<div class="line"><span class="stringliteral">    $combo-&gt;signal_connect_swapped(</span></div>
<div class="line"><span class="stringliteral">        changed =&gt; \&amp;onTypeComboChanged,</span></div>
<div class="line"><span class="stringliteral">        [$spin1, $spin2, $combo_dms],</span></div>
<div class="line"><span class="stringliteral">    );</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    # Store widgets</span></div>
<div class="line"><span class="stringliteral">    $row_widgets-&gt;[$colId] = [$combo, $spin1, $spin2, $combo_dms];</span></div>
<div class="line"><span class="stringliteral">    </span></div>
<div class="line"><span class="stringliteral">    return;</span></div>
<div class="line"><span class="stringliteral">}</span></div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a270c2515e45e2b1647f5c3549acc0c04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::check_if_r_data_frame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-check_if_r_data_frame' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-check_if_r_data_frame-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-check_if_r_data_frame-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-check_if_r_data_frame-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in check_if_r_data_frame: 30</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a270c2515e45e2b1647f5c3549acc0c04">check_if_r_data_frame</a> {</div>
<div class="line">    my %args = @_;</div>
<div class="line">    </div>
<div class="line">    my $package = <span class="stringliteral">&#39;Biodiverse::Common&#39;</span>;</div>
<div class="line">    my $csv = $package-&gt;get_csv_object (@_);</div>
<div class="line">    </div>
<div class="line">    my $fh;</div>
<div class="line">    open ($fh, <span class="stringliteral">&#39;&lt;:via(File::BOM)&#39;</span>, $args{file})</div>
<div class="line">        || croak <span class="stringliteral">&quot;Unable to open file $args{file}\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">    my @lines = $package-&gt;get_next_line_set (</div>
<div class="line">        target_line_count =&gt; 10,</div>
<div class="line">        file_handle       =&gt; $fh,</div>
<div class="line">        csv_object        =&gt; $csv,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    $fh-&gt;close;</div>
<div class="line"></div>
<div class="line">    my $header = shift @lines;</div>
<div class="line">    my $header_count = scalar @$header;</div>
<div class="line"></div>
<div class="line">    my $is_r_style = 0;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $line (@lines) {</div>
<div class="line">        <span class="keywordflow">if</span> (scalar @$line == $header_count + 1) {</div>
<div class="line">            $is_r_style = 1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $is_r_style;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a315f33f27641f927717cbb7567618dbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::explain_import_col_options </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-explain_import_col_options' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-explain_import_col_options-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-explain_import_col_options-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-explain_import_col_options-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in explain_import_col_options: 44</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a315f33f27641f927717cbb7567618dbf">explain_import_col_options</a> {</div>
<div class="line">    my $parent     = shift;</div>
<div class="line">    my $use_matrix = shift;</div>
<div class="line">    </div>
<div class="line">    my %explain = (</div>
<div class="line">        Ignore          =&gt; <span class="stringliteral">&#39;There is no setting for this column.  &#39;</span></div>
<div class="line">                         . <span class="stringliteral">&#39;It will be ignored or used depending on your other settings.&#39;</span>,</div>
<div class="line">        Group           =&gt; <span class="stringliteral">&#39;Use records in this column to define a group axis &#39;</span></div>
<div class="line">                         . <span class="stringliteral">&#39;(numerical type).  Values will be aggregated according &#39;</span></div>
<div class="line">                         . <span class="stringliteral">&#39;to your cellsize settings.  Non-numeric values will cause an error.&#39;</span>,</div>
<div class="line">        Text_group      =&gt; <span class="stringliteral">&#39;Use records in this column as a group axis (text type).  &#39;</span></div>
<div class="line">                         . <span class="stringliteral">&#39;Values will be used exactly as given.&#39;</span>,</div>
<div class="line">        Include_columns =&gt; <span class="stringliteral">&#39;Only those records with a value of 1 in &#39;</span></div>
<div class="line">                         . <span class="stringliteral">&#39;&lt;i&gt;at least one&lt;/i&gt; of the Include_columns will &#39;</span></div>
<div class="line">                         . <span class="stringliteral">&#39;be imported.&#39;</span>,</div>
<div class="line">        Exclude_columns =&gt; <span class="stringliteral">&#39;Those records with a value of 1 in any &#39;</span></div>
<div class="line">                         . <span class="stringliteral">&#39;Exclude_column will not be imported.&#39;</span>,</div>
<div class="line">    );</div>
<div class="line">    <span class="keywordflow">if</span> ($use_matrix) {</div>
<div class="line">        %explain = (</div>
<div class="line">            %explain,</div>
<div class="line">            Label_start_col =&gt; <span class="stringliteral">&#39;This column is the start of the labels. &#39;</span></div>
<div class="line">                             . <span class="stringliteral">&#39;The headers will be used as the labels, &#39;</span></div>
<div class="line">                             . <span class="stringliteral">&#39;the values as the abundance scores. &#39;</span></div>
<div class="line">                             . <span class="stringliteral">&#39;All columns set to Ignore until the &#39;</span></div>
<div class="line">                             . <span class="stringliteral">&#39;Label_end_col will be treated as labels.&#39;</span>,</div>
<div class="line">            Label_end_col   =&gt; <span class="stringliteral">&#39;This column is the last of the labels.  &#39;</span></div>
<div class="line">                             . <span class="stringliteral">&#39;Not setting one will use all columns from the &#39;</span></div>
<div class="line">                             . <span class="stringliteral">&#39;Label_start_col to the end.&#39;</span>,</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        %explain = (</div>
<div class="line">            %explain,</div>
<div class="line">            Label           =&gt; <span class="stringliteral">&#39;Values in this column will be used as one of the label axes.&#39;</span>,</div>
<div class="line">            Sample_counts   =&gt; <span class="stringliteral">&#39;Values in this column represent sample counts (abundances).  &#39;</span></div>
<div class="line">                             . <span class="stringliteral">&#39;If this is not set then each record is assumed to equal one sample.&#39;</span>,</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#afb2d7098803fdef1e855acdbf6742eb3">show_expl_dialog</a> (\%explain, $parent);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a1335229a190447cc0aa587a913d22d3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::explain_remap_col_options </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-explain_remap_col_options' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-explain_remap_col_options-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-explain_remap_col_options-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-explain_remap_col_options-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in explain_remap_col_options: 30</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a1335229a190447cc0aa587a913d22d3a">explain_remap_col_options</a> {</div>
<div class="line">    my $parent = shift;</div>
<div class="line">    </div>
<div class="line">    my $inc_exc_suffix = <span class="stringliteral">&#39;This applies to the main input file, &#39;</span></div>
<div class="line">                       . <span class="stringliteral">&#39;and is assessed before any remapping is done.&#39;</span>;</div>
<div class="line"></div>
<div class="line">    my %explain = (</div>
<div class="line">        Ignore           =&gt; <span class="stringliteral">&#39;There is no setting for this column.  &#39;</span></div>
<div class="line">                          . <span class="stringliteral">&#39;It will be ignored or used depending on your other settings.&#39;</span>,</div>
<div class="line">        Property         =&gt; <span class="stringliteral">&#39;The value for this field will be added as a property, &#39;</span></div>
<div class="line">                          . <span class="stringliteral">&#39;using the name of the column as the property name.&#39;</span>,</div>
<div class="line">        Input_element    =&gt; <span class="stringliteral">&#39;Values in this column will be used as one of the element (label or group) axes. &#39;</span></div>
<div class="line">                          . <span class="stringliteral">&#39;Make sure you have as many of these columns set as you have &#39;</span></div>
<div class="line">                          . <span class="stringliteral">&#39;element axes or they will not match and the properties will be ignored.&#39;</span>,</div>
<div class="line">        Remapped_element =&gt; <span class="stringliteral">&#39;The input element (label or group) will be renamed to this. &#39;</span></div>
<div class="line">                          . <span class="stringliteral">&#39;Set as many remapped label axes as you like, &#39;</span></div>
<div class="line">                          . <span class="stringliteral">&#39;but make sure the group axes remain the same&#39;</span>,</div>
<div class="line">        Include_columns  =&gt; <span class="stringliteral">&#39;Only those Input_elements with a value of 1 in &#39;</span></div>
<div class="line">                          . <span class="stringliteral">&#39;&lt;i&gt;at least one&lt;/i&gt; of the Include_columns will &#39;</span></div>
<div class="line">                          . <span class="stringliteral">&#39;be imported. &#39;</span></div>
<div class="line">                          . $inc_exc_suffix,</div>
<div class="line">        Exclude_columns  =&gt; <span class="stringliteral">&#39;Those Input_elements with a value of 1 in any &#39;</span></div>
<div class="line">                          . <span class="stringliteral">&#39;Exclude_column will not be imported.  &#39;</span></div>
<div class="line">                          . $inc_exc_suffix,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#afb2d7098803fdef1e855acdbf6742eb3">show_expl_dialog</a> (\%explain, $parent);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a53afc90128d489b84593e1ddc097f183"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::fillParams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-fillParams' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-fillParams-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fillParams-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fillParams-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in fillParams: 42</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a53afc90128d489b84593e1ddc097f183">fillParams</a> {</div>
<div class="line">    my $dlgxml = shift;</div>
<div class="line"></div>
<div class="line">    my $labelsModel = $dlgxml-&gt;get_widget(<span class="stringliteral">&#39;labels&#39;</span>)-&gt;get_model();</div>
<div class="line">    my $groupsModel = $dlgxml-&gt;get_widget(<span class="stringliteral">&#39;groups&#39;</span>)-&gt;get_model();</div>
<div class="line">    my $iter;</div>
<div class="line"></div>
<div class="line">    my %params = (</div>
<div class="line">        LABEL_COLUMNS =&gt; [],</div>
<div class="line">        GROUP_COLUMNS =&gt; [],</div>
<div class="line">        CELL_SIZES    =&gt; [],</div>
<div class="line">        CELL_ORIGINS  =&gt; [],</div>
<div class="line">        CELL_IS_LAT   =&gt; [],</div>
<div class="line">        CELL_IS_LON   =&gt; [],</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Do labels</span></div>
<div class="line"><span class="preprocessor"></span>    $iter = $labelsModel-&gt;get_iter_first();</div>
<div class="line">    <span class="keywordflow">while</span> ($iter) {</div>
<div class="line">        my $info = $labelsModel-&gt;get($iter, 1);</div>
<div class="line"></div>
<div class="line">        push (@{$params{<span class="stringliteral">&#39;LABEL_COLUMNS&#39;</span>}}, $info-&gt;{<span class="keywordtype">id</span>});</div>
<div class="line">    </div>
<div class="line">        $iter = $labelsModel-&gt;iter_next($iter);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Do groups</span></div>
<div class="line"><span class="preprocessor"></span>    $iter = $groupsModel-&gt;get_iter_first();</div>
<div class="line">    <span class="keywordflow">while</span> ($iter) {</div>
<div class="line">        my $info2 = $groupsModel-&gt;get($iter, 1);</div>
<div class="line"></div>
<div class="line">        push (@{$params{<span class="stringliteral">&#39;GROUP_COLUMNS&#39;</span>}}, $info2-&gt;{<span class="keywordtype">id</span>});</div>
<div class="line">        push (@{$params{<span class="stringliteral">&#39;CELL_SIZES&#39;</span>}},    $info2-&gt;{cell_size});</div>
<div class="line">        push (@{$params{<span class="stringliteral">&#39;CELL_ORIGINS&#39;</span>}},  $info2-&gt;{cell_origin});</div>
<div class="line">        push (@{$params{<span class="stringliteral">&#39;CELL_IS_LAT&#39;</span>}},   $info2-&gt;{is_lat});</div>
<div class="line">        push (@{$params{<span class="stringliteral">&#39;CELL_IS_LON&#39;</span>}},   $info2-&gt;{is_lon});</div>
<div class="line"></div>
<div class="line">        $iter = $groupsModel-&gt;iter_next($iter);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> \%params;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a87f7201ed059131465df3dad6184e80b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::getColumnSettings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getColumnSettings' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-getColumnSettings-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getColumnSettings-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getColumnSettings-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in getColumnSettings: 85</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a87f7201ed059131465df3dad6184e80b">getColumnSettings</a> {</div>
<div class="line">    my $cols = shift;</div>
<div class="line">    my $headers = shift;</div>
<div class="line"><span class="preprocessor">    #my $num = @$cols;</span></div>
<div class="line"><span class="preprocessor"></span>    my (@labels, @groups, @sample_counts, @exclude_columns, @include_columns);</div>
<div class="line">    my %rest_of_options;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (0..$#$cols) {</div>
<div class="line">        my $widgets = $cols-&gt;[$i];</div>
<div class="line"><span class="preprocessor">        # widgets[0] - combo</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        # widgets[1] - cell size</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        # widgets[2] - cell origin</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        my $type = $widgets-&gt;[0]-&gt;get_active_text;</div>
<div class="line"></div>
<div class="line">        next <span class="keywordflow">if</span> $type eq <span class="stringliteral">&#39;Ignore&#39;</span>;</div>
<div class="line">        <span class="keywordflow">if</span> ($type eq <span class="stringliteral">&#39;Label&#39;</span>) {</div>
<div class="line">            my $hash_ref = {</div>
<div class="line">                name    =&gt; $headers-&gt;[$i],</div>
<div class="line">                <span class="keywordtype">id</span>      =&gt; $i</div>
<div class="line">            };</div>
<div class="line">            push (@labels, $hash_ref);</div>
<div class="line">        }</div>
<div class="line">        elsif ($type eq <span class="stringliteral">&#39;Text_group&#39;</span>) {</div>
<div class="line">            my $hash_ref = {</div>
<div class="line">                name        =&gt; $headers-&gt;[$i],</div>
<div class="line">                <span class="keywordtype">id</span>          =&gt; $i,</div>
<div class="line">                cell_size   =&gt; -1,</div>
<div class="line">                cell_origin =&gt; 0,</div>
<div class="line">            };</div>
<div class="line">            push (@groups, $hash_ref);</div>
<div class="line">        }</div>
<div class="line">        elsif ($type eq <span class="stringliteral">&#39;Group&#39;</span>) {</div>
<div class="line">            my $hash_ref = {</div>
<div class="line">                name        =&gt; $headers-&gt;[$i],</div>
<div class="line">                <span class="keywordtype">id</span>          =&gt; $i,</div>
<div class="line">                cell_size   =&gt; $widgets-&gt;[1]-&gt;get_value(),</div>
<div class="line">                cell_origin =&gt; $widgets-&gt;[2]-&gt;get_value(),</div>
<div class="line">            };</div>
<div class="line">            my $dms = $widgets-&gt;[3]-&gt;get_active_text();</div>
<div class="line">            <span class="keywordflow">if</span> ($dms eq <span class="stringliteral">&#39;is_lat&#39;</span>) {</div>
<div class="line">                $hash_ref-&gt;{is_lat} = 1;</div>
<div class="line">            }</div>
<div class="line">            elsif ($dms eq <span class="stringliteral">&#39;is_lon&#39;</span>) {</div>
<div class="line">                $hash_ref-&gt;{is_lon} = 1;</div>
<div class="line">            }</div>
<div class="line">            push (@groups, $hash_ref);</div>
<div class="line">        }</div>
<div class="line">        elsif ($type eq <span class="stringliteral">&#39;Sample_counts&#39;</span>) {</div>
<div class="line">            my $hash_ref = {</div>
<div class="line">                name    =&gt; $headers-&gt;[$i],</div>
<div class="line">                <span class="keywordtype">id</span>      =&gt; $i,</div>
<div class="line">            };</div>
<div class="line">            push @sample_counts, $hash_ref;</div>
<div class="line">        }</div>
<div class="line">        elsif ($type eq <span class="stringliteral">&#39;Include_columns&#39;</span>) {</div>
<div class="line">            my $hash_ref = {</div>
<div class="line">                name    =&gt; $headers-&gt;[$i],</div>
<div class="line">                <span class="keywordtype">id</span>      =&gt; $i,</div>
<div class="line">            };</div>
<div class="line">            push @include_columns, $hash_ref;</div>
<div class="line">        }</div>
<div class="line">        elsif ($type eq <span class="stringliteral">&#39;Exclude_columns&#39;</span>) {</div>
<div class="line">            my $hash_ref = {</div>
<div class="line">                name    =&gt; $headers-&gt;[$i],</div>
<div class="line">                <span class="keywordtype">id</span>      =&gt; $i,</div>
<div class="line">            };</div>
<div class="line">            push @exclude_columns, $hash_ref;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="preprocessor">            # initialise</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> (not exists $rest_of_options{$type}</div>
<div class="line">                or reftype ($rest_of_options{$type}) eq <span class="stringliteral">&#39;ARRAY&#39;</span></div>
<div class="line">                ) {  </div>
<div class="line">                $rest_of_options{$type} = [];</div>
<div class="line">            }</div>
<div class="line">            my $array_ref = $rest_of_options{$type};</div>
<div class="line">            </div>
<div class="line">            my $hash_ref = {</div>
<div class="line">                name    =&gt; $headers-&gt;[$i],</div>
<div class="line">                <span class="keywordtype">id</span>      =&gt; $i,</div>
<div class="line">            };</div>
<div class="line">            push @$array_ref, $hash_ref;</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a24b765f3be72896c16278487ea8ac155"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::getRemapColumnSettings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getRemapColumnSettings' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-getRemapColumnSettings-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getRemapColumnSettings-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getRemapColumnSettings-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in getRemapColumnSettings: 23</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a24b765f3be72896c16278487ea8ac155">getRemapColumnSettings</a> {</div>
<div class="line">    my $cols = shift;</div>
<div class="line">    my $headers = shift;</div>
<div class="line">    my $num = @$cols;</div>
<div class="line">    my (@in, @out);</div>
<div class="line">    my %results;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (0..($num - 1)) {</div>
<div class="line">        my $widgets = $cols-&gt;[$i];</div>
<div class="line"><span class="preprocessor">        # widgets[0] - combo</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        my $type = $widgets-&gt;[0]-&gt;get_active_text;</div>
<div class="line">        </div>
<div class="line"><span class="preprocessor">        #  sweep up all those we should not ignore</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> ($type ne <span class="stringliteral">&quot;Ignore&quot;</span>) {</div>
<div class="line">            $results{$type} = [] <span class="keywordflow">if</span> ! defined $results{$type};</div>
<div class="line">            my $ref = $results{$type};</div>
<div class="line">            push @{$ref}, {name =&gt; $headers-&gt;[$i], <span class="keywordtype">id</span> =&gt; $i };</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %results : \%results;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a771ead5712e8d41890a1777cfd41b409"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::getRemapInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-getRemapInfo' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-getRemapInfo-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-getRemapInfo-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-getRemapInfo-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in getRemapInfo: 186</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a771ead5712e8d41890a1777cfd41b409">getRemapInfo</a> {</div>
<div class="line">    my $gui              = shift;</div>
<div class="line">    my $data_filename    = shift;</div>
<div class="line">    my $type             = shift <span class="comment">// &quot;&quot;;</span></div>
<div class="line">    my $other_properties = shift || [];</div>
<div class="line">    my $column_overrides = shift;</div>
<div class="line">    my $filename         = shift;</div>
<div class="line">    </div>
<div class="line">    my ($_file, $data_dir, $_suffixes) = $data_filename &amp;&amp; length $data_filename</div>
<div class="line">        ? fileparse($data_filename)</div>
<div class="line">        : ();</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Get filename for the name-translation file</span></div>
<div class="line"><span class="preprocessor"></span>    $filename <span class="comment">//= $gui-&gt;showOpenDialog(&quot;Select $type properties file&quot;, &#39;*&#39;, $data_dir);</span></div>
<div class="line">    <span class="keywordflow">if</span> (! defined $filename) {</div>
<div class="line">        <span class="keywordflow">return</span> wantarray ? () : {}</div>
<div class="line">    };</div>
<div class="line">    </div>
<div class="line">    my $remap = <a class="code" href="classBiodiverse_1_1ElementProperties.html">Biodiverse::ElementProperties</a>-&gt;new;</div>
<div class="line">    my %args = $remap-&gt;get_args (sub =&gt; <span class="stringliteral">&#39;import_data&#39;</span>);</div>
<div class="line">    my $params = $args{parameters};</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  much of the following is used elsewhere to get file options, almost verbatim.  Should move to a sub.</span></div>
<div class="line"><span class="preprocessor"></span>    my $dlgxml = Gtk2::GladeXML-&gt;new($gui-&gt;getGladeFile, <span class="stringliteral">&#39;dlgImportParameters&#39;</span>);</div>
<div class="line">    my $dlg = $dlgxml-&gt;get_widget(<span class="stringliteral">&#39;dlgImportParameters&#39;</span>);</div>
<div class="line">    $dlg-&gt;set_title(ucfirst <span class="stringliteral">&quot;$type property file options&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Build widgets for parameters</span></div>
<div class="line"><span class="preprocessor"></span>    my $table_name = <span class="stringliteral">&#39;tableImportParameters&#39;</span>;</div>
<div class="line">    my $table = $dlgxml-&gt;get_widget ($table_name );</div>
<div class="line"><span class="preprocessor">    # (passing $dlgxml because generateFile uses existing glade widget on the dialog)</span></div>
<div class="line"><span class="preprocessor"></span>    my $extractors = <a class="code" href="classBiodiverse_1_1GUI_1_1ParametersTable.html#a80558ea4059a628b54acc70ffad035ce">Biodiverse::GUI::ParametersTable::fill</a> ($params, $table, $dlgxml); </div>
<div class="line">    </div>
<div class="line">    $dlg-&gt;show_all;</div>
<div class="line">    my $response = $dlg-&gt;run;</div>
<div class="line">    $dlg-&gt;destroy;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ($response ne <span class="stringliteral">&#39;ok&#39;</span>) {  #  drop out</div>
<div class="line">        <span class="keywordflow">return</span> wantarray ? () : {};</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    my $properties_params = <a class="code" href="classBiodiverse_1_1GUI_1_1ParametersTable.html#abb800b0bcd2dd83d887eb7eaa8ed2a1c">Biodiverse::GUI::ParametersTable::extract</a> ($extractors);</div>
<div class="line">    my %properties_params = @$properties_params;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    # Get header columns</span></div>
<div class="line"><span class="preprocessor"></span>    print <span class="stringliteral">&quot;[GUI] Discovering columns from $filename\n&quot;</span>;</div>
<div class="line">    </div>
<div class="line">    open (my $input_fh, <span class="stringliteral">&#39;&lt;:via(File::BOM)&#39;</span>, $filename)</div>
<div class="line">      or croak &quot;Cannot open $filename\n&quot;;</div>
<div class="line"></div>
<div class="line">    my ($line, $line_unchomped);</div>
<div class="line">    while (&lt;$input_fh&gt;) { # <span class="keyword">get</span> first non-blank line</div>
<div class="line">        $line = $_;</div>
<div class="line">        $line_unchomped = $line;</div>
<div class="line">        chomp $line;</div>
<div class="line">        last <span class="keywordflow">if</span> $line;</div>
<div class="line">    }</div>
<div class="line">    close ($input_fh);</div>
<div class="line">    </div>
<div class="line">    my $sep     = $properties_params{input_sep_char} eq <span class="stringliteral">&#39;guess&#39;</span> </div>
<div class="line">                ? $gui-&gt;getProject-&gt;guess_field_separator (<span class="keywordtype">string</span> =&gt; $line)</div>
<div class="line">                : $properties_params{input_sep_char};</div>
<div class="line">                </div>
<div class="line">    my $quotes  = $properties_params{input_quote_char} eq <span class="stringliteral">&#39;guess&#39;</span></div>
<div class="line">                ? $gui-&gt;getProject-&gt;guess_quote_char (<span class="keywordtype">string</span> =&gt; $line)</div>
<div class="line">                : $properties_params{input_quote_char};</div>
<div class="line">                </div>
<div class="line">    my $eol     = $gui-&gt;getProject-&gt;guess_eol (<span class="keywordtype">string</span> =&gt; $line_unchomped);</div>
<div class="line">    </div>
<div class="line">    my @headers_full = $gui-&gt;getProject-&gt;csv2list(</div>
<div class="line">        <span class="keywordtype">string</span>     =&gt; $line_unchomped,</div>
<div class="line">        quote_char =&gt; $quotes,</div>
<div class="line">        sep_char   =&gt; $sep,</div>
<div class="line">        eol        =&gt; $eol</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # add non-blank columns</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # - SWL 20081201 - not sure this is a good idea, should just use all</span></div>
<div class="line"><span class="preprocessor"></span>    my @headers;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $header (@headers_full) {</div>
<div class="line">        <span class="keywordflow">if</span> ($header) {</div>
<div class="line">            push @headers, $header;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ($dlg, my $col_widgets) = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#af35198c4b47dd9d2f118f3634a45acd1">makeRemapColumnsDialog</a> (</div>
<div class="line">        \@headers,</div>
<div class="line">        $gui-&gt;getWidget(<span class="stringliteral">&#39;wndMain&#39;</span>),</div>
<div class="line">        $other_properties,</div>
<div class="line">        $column_overrides,</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    my $column_settings = {};</div>
<div class="line">    $dlg-&gt;set_title(ucfirst <span class="stringliteral">&quot;$type property column types&quot;</span>);</div>
<div class="line"></div>
<div class="line">    RUN_DLG:</div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        $response = $dlg-&gt;run();</div>
<div class="line">        <span class="keywordflow">if</span> ($response eq <span class="stringliteral">&#39;help&#39;</span>) {</div>
<div class="line">            <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a1335229a190447cc0aa587a913d22d3a">explain_remap_col_options</a>($dlg);</div>
<div class="line">            next RUN_DLG;</div>
<div class="line">        }</div>
<div class="line">        elsif ($response eq <span class="stringliteral">&#39;ok&#39;</span>) {</div>
<div class="line">            $column_settings = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a24b765f3be72896c16278487ea8ac155">getRemapColumnSettings</a> ($col_widgets, \@headers);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            $dlg-&gt;destroy();</div>
<div class="line">            <span class="keywordflow">return</span> wantarray ? () : {};</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  drop out</span></div>
<div class="line"><span class="preprocessor"></span>        last RUN_DLG <span class="keywordflow">if</span> $column_settings-&gt;{Input_element};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        #  need to check we have the right number...</span></div>
<div class="line"><span class="preprocessor"></span>        my $text = <span class="stringliteral">&#39;Please select as many Input_element columns as you have label axes&#39;</span>;</div>
<div class="line">        my $msg = Gtk2::MessageDialog-&gt;new (</div>
<div class="line">            undef,</div>
<div class="line">            <span class="stringliteral">&#39;modal&#39;</span>,</div>
<div class="line">            <span class="stringliteral">&#39;error&#39;</span>,</div>
<div class="line">            <span class="stringliteral">&#39;ok&#39;</span>,</div>
<div class="line">            $text</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        $msg-&gt;run();</div>
<div class="line">        $msg-&gt;destroy();</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    $dlg-&gt;destroy();</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #Input_label Remapped_label Range</span></div>
<div class="line"><span class="preprocessor"></span>    </div>
<div class="line">    my (@in_cols, @out_cols, @include_cols, @exclude_cols);</div>
<div class="line">    </div>
<div class="line">    my $in_ref = $column_settings-&gt;{Input_element};</div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (@$in_ref) {</div>
<div class="line">        push @in_cols, $i-&gt;{<span class="keywordtype">id</span>};</div>
<div class="line">    }</div>
<div class="line">    my $out_ref = $column_settings-&gt;{Remapped_element};</div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (@$out_ref) {</div>
<div class="line">        push @out_cols, $i-&gt;{<span class="keywordtype">id</span>};</div>
<div class="line">    }</div>
<div class="line">    my $include_ref = $column_settings-&gt;{Include};</div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (@$include_ref) {</div>
<div class="line">        push @include_cols, $i-&gt;{<span class="keywordtype">id</span>};</div>
<div class="line">    }</div>
<div class="line">    my $exclude_ref = $column_settings-&gt;{Exclude};</div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (@$exclude_ref) {</div>
<div class="line">        push @exclude_cols, $i-&gt;{<span class="keywordtype">id</span>};</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my %results = (</div>
<div class="line">        file                    =&gt; $filename,</div>
<div class="line">        input_element_cols      =&gt; \@in_cols,</div>
<div class="line">        remapped_element_cols   =&gt; \@out_cols,</div>
<div class="line">        input_sep_char          =&gt; $args{input_sep_char},  #  header might be sufficiently different to matter</div>
<div class="line">        input_quote_char        =&gt; $args{input_quote_char},</div>
<div class="line">        include_cols            =&gt; \@include_cols,</div>
<div class="line">        exclude_cols            =&gt; \@exclude_cols,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #foreach my $type (qw /Range Sample_count Property/) {</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $type (@$other_properties, <span class="stringliteral">&#39;Property&#39;</span>) {</div>
<div class="line">        my $ref = $column_settings-&gt;{$type};</div>
<div class="line">        next <span class="keywordflow">if</span> ! defined $ref;</div>
<div class="line">        $ref = [$ref] <span class="keywordflow">if</span> $ref !~ /ARRAY/;</div>
<div class="line">        <span class="keywordflow">foreach</span> my $i (@$ref) {</div>
<div class="line">            my $t = $type;</div>
<div class="line">            <span class="keywordflow">if</span> ($t eq <span class="stringliteral">&#39;Property&#39;</span>) {</div>
<div class="line">                $t = $i-&gt;{name};</div>
<div class="line">            }</div>
<div class="line">            $results{lc($t)} = $i-&gt;{<span class="keywordtype">id</span>};  #  take the last one selected</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($sep ne <span class="stringliteral">&#39;guess&#39;</span>) {</div>
<div class="line">        $results{input_sep_char} = $sep;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> ($quotes ne <span class="stringliteral">&#39;guess&#39;</span>) {</div>
<div class="line">        $results{input_quote_char} = $quotes;</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">    #if ($eol ne &#39;guess&#39;) {</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    $results{eol} = $eol;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #}</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">return</span> wantarray ? %results : \%results;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ade686542cddd3ed03ce74183481e517f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::makeColumnsDialog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-makeColumnsDialog' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-makeColumnsDialog-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-makeColumnsDialog-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-makeColumnsDialog-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in makeColumnsDialog: 115</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#ade686542cddd3ed03ce74183481e517f">makeColumnsDialog</a> {</div>
<div class="line"><span class="preprocessor">    # We have to dynamically generate the choose columns dialog since</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # the number of columns is unknown</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my $header      = shift; # ref to column header array</div>
<div class="line">    my $wndMain     = shift;</div>
<div class="line">    my $row_options = shift;</div>
<div class="line">    my $file_list   = shift;</div>
<div class="line"></div>
<div class="line">    my $num_columns = @$header;</div>
<div class="line">    print <span class="stringliteral">&quot;[GUI] Generating make columns dialog for $num_columns columns\n&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make dialog</span></div>
<div class="line"><span class="preprocessor"></span>    my $dlg = Gtk2::Dialog-&gt;new(</div>
<div class="line">        <span class="stringliteral">&#39;Choose columns&#39;</span>,</div>
<div class="line">        $wndMain,</div>
<div class="line">        <span class="stringliteral">&#39;modal&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;gtk-cancel&#39;</span> =&gt; <span class="stringliteral">&#39;cancel&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;gtk-ok&#39;</span>     =&gt; <span class="stringliteral">&#39;ok&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;gtk-help&#39;</span>   =&gt; <span class="stringliteral">&#39;help&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (defined $file_list) {</div>
<div class="line">        my $file_title = Gtk2::Label -&gt;new(<span class="stringliteral">&#39;&lt;b&gt;Files:&lt;/b&gt;&#39;</span>);</div>
<div class="line">        $file_title-&gt;set_use_markup(1);</div>
<div class="line">        $file_title-&gt;set_alignment (0, 1);</div>
<div class="line">        $dlg-&gt;vbox-&gt;pack_start ($file_title, 0, 0, 0);</div>
<div class="line"></div>
<div class="line">        my $file_list_label = Gtk2::Label -&gt;new($file_list . <span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line">        $file_list_label-&gt;set_alignment (0, 1);</div>
<div class="line">        $dlg-&gt;vbox-&gt;pack_start ($file_list_label, 0, 0, 0);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #my $sep = Gtk2::HSeparator-&gt;new();</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$dlg-&gt;vbox-&gt;pack_start ($sep, 0, 0, 0);</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    my $label = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;&lt;b&gt;Set column options&lt;/b&gt;&#39;</span>);</div>
<div class="line">    $label-&gt;set_use_markup(1);</div>
<div class="line">    $dlg-&gt;vbox-&gt;pack_start ($label, 0, 0, 0);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make table</span></div>
<div class="line"><span class="preprocessor"></span>    my $table = Gtk2::Table-&gt;new($num_columns + 1, 8);</div>
<div class="line">    $table-&gt;set_row_spacings(5);</div>
<div class="line">    $table-&gt;set_col_spacings(20);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make scroll window for table</span></div>
<div class="line"><span class="preprocessor"></span>    my $scroll = Gtk2::ScrolledWindow-&gt;new;</div>
<div class="line">    $scroll-&gt;add_with_viewport($table);</div>
<div class="line">    $scroll-&gt;set_policy(<span class="stringliteral">&#39;never&#39;</span>, <span class="stringliteral">&#39;automatic&#39;</span>);</div>
<div class="line">    $dlg-&gt;vbox-&gt;pack_start($scroll, 1, 1, 5);</div>
<div class="line"></div>
<div class="line">    my $col = 0;</div>
<div class="line"><span class="preprocessor">    # Make header column</span></div>
<div class="line"><span class="preprocessor"></span>    $label = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;&lt;b&gt;#&lt;/b&gt;&#39;</span>);</div>
<div class="line">    $label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $label-&gt;set_use_markup(1);</div>
<div class="line">    $table-&gt;attach($label, $col, $col + 1, 0, 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line">    </div>
<div class="line">    $col++;</div>
<div class="line">    $label = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;&lt;b&gt;Column&lt;/b&gt;&#39;</span>);</div>
<div class="line">    $label-&gt;set_alignment(0, 1);</div>
<div class="line">    $label-&gt;set_use_markup(1);</div>
<div class="line">    $table-&gt;attach($label, $col, $col + 1, 0, 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line"></div>
<div class="line">    $col++;</div>
<div class="line">    $label = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;Type&#39;</span>);</div>
<div class="line">    $label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $label-&gt;set_has_tooltip(1);</div>
<div class="line">    $label-&gt;set_tooltip_text (<span class="stringliteral">&#39;Click on the help to see the column meanings&#39;</span>);</div>
<div class="line">    $table-&gt;attach($label, $col, $col + 1, 0, 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line"></div>
<div class="line">    $col++;</div>
<div class="line">    $label = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;Cell size&#39;</span>);</div>
<div class="line">    $label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $label-&gt;set_has_tooltip(1);</div>
<div class="line">    $label-&gt;set_tooltip_text (<span class="stringliteral">&#39;Width of the group along this axis&#39;</span>);</div>
<div class="line">    $table-&gt;attach($label, $col, $col + 1, 0, 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 50, 0);</div>
<div class="line"></div>
<div class="line">    $col++;</div>
<div class="line">    $label = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;Cell origin&#39;</span>);</div>
<div class="line">    $label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $label-&gt;set_has_tooltip(1);</div>
<div class="line">    $label-&gt;set_tooltip_text (<span class="stringliteral">&#39;Origin of this axis.\nGroup corners will be offset by this amount.&#39;</span>);</div>
<div class="line">    $table-&gt;attach($label, $col, $col + 1, 0, 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 50, 0);</div>
<div class="line">    </div>
<div class="line">    $col++;</div>
<div class="line">    $label = Gtk2::Label-&gt;new(<span class="stringliteral">&quot;Data in\ndegrees?&quot;</span>);</div>
<div class="line">    $label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $label-&gt;set_has_tooltip(1);</div>
<div class="line">    $label-&gt;set_tooltip_text (<span class="stringliteral">&#39;Are the group data for this axis in degrees latitude or longitude?&#39;</span>);</div>
<div class="line">    $table-&gt;attach($label, $col, $col + 1, 0, 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Add columns</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # use row_widgets to store the radio buttons, spinboxes</span></div>
<div class="line"><span class="preprocessor"></span>    my $row_widgets = [];</div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (0..($num_columns - 1)) {</div>
<div class="line">        my $row_label_text = $header-&gt;[$i] <span class="comment">// q{};</span></div>
<div class="line">        <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a87b9aad295fcbefe4b01f231d43c30f6">addRow</a>($row_widgets, $table, $i, $row_label_text, $row_options);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $dlg-&gt;set_resizable(1);</div>
<div class="line">    $dlg-&gt;set_default_size(0, 400);</div>
<div class="line">    $dlg-&gt;show_all();</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Hide the cell size textboxes since all columns are &quot;Ignored&quot; by default</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $row (@$row_widgets) {</div>
<div class="line">        $row-&gt;[1]-&gt;hide;</div>
<div class="line">        $row-&gt;[2]-&gt;hide;</div>
<div class="line">        $row-&gt;[3]-&gt;hide;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  now add the help text</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">return</span> ($dlg, $row_widgets);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ac2814d3e57072b75e7ec24f22a67bdcd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::makeFilenameDialog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-makeFilenameDialog' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-makeFilenameDialog-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-makeFilenameDialog-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-makeFilenameDialog-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in makeFilenameDialog: 58</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#ac2814d3e57072b75e7ec24f22a67bdcd">makeFilenameDialog</a> {</div>
<div class="line">    my $gui = shift;</div>
<div class="line"><span class="preprocessor">    #my $object = shift || return;</span></div>
<div class="line"><span class="preprocessor"></span>    </div>
<div class="line">    my $dlgxml = Gtk2::GladeXML-&gt;new($gui-&gt;getGladeFile, $dlg_name);</div>
<div class="line">    my $dlg = $dlgxml-&gt;get_widget($dlg_name);</div>
<div class="line">    my $x = $gui-&gt;getWidget(<span class="stringliteral">&#39;wndMain&#39;</span>);</div>
<div class="line">    $dlg-&gt;set_transient_for( $x );</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">#    # Get the Parameters metadata</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    my $tmp = Biodiverse::BaseData-&gt;new;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#        my %args = $tmp-&gt;get_args (sub =&gt; &#39;import_data&#39;);</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    my $params = $args{parameters};</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    # Build widgets for parameters</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    my $table = $dlgxml-&gt;get_widget($tableParameters);</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    # (passing $dlgxml because generateFile uses existing glade widget on the dialog)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#    my $extractors = Biodiverse::GUI::ParametersTable::fill($params, $table, $dlgxml); </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Initialise the basedatas combo</span></div>
<div class="line"><span class="preprocessor"></span>    $dlgxml-&gt;get_widget($comboImportBasedatas)-&gt;set_model($gui-&gt;getProject-&gt;getBasedataModel());</div>
<div class="line">    my $selected = $gui-&gt;getProject-&gt;getSelectedBaseDataIter();</div>
<div class="line">    <span class="keywordflow">if</span> (defined $selected) {</div>
<div class="line">        $dlgxml-&gt;get_widget($comboImportBasedatas)-&gt;set_active_iter($selected);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # If there are no basedatas, force &quot;New&quot; checkbox on</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> (not $selected) {</div>
<div class="line">        $dlgxml-&gt;get_widget($chkNew)-&gt;set_sensitive(0);</div>
<div class="line">        $dlgxml-&gt;get_widget($btnNext)-&gt;set_sensitive(0);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Default to new</span></div>
<div class="line"><span class="preprocessor"></span>    $dlgxml-&gt;get_widget($chkNew)-&gt;set_active(1);</div>
<div class="line">    $dlgxml-&gt;get_widget($comboImportBasedatas)-&gt;set_sensitive(0);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Init the file chooser</span></div>
<div class="line"><span class="preprocessor"></span>    my $filter = Gtk2::FileFilter-&gt;new();</div>
<div class="line">    $filter-&gt;add_pattern(<span class="stringliteral">&#39;*.csv&#39;</span>);</div>
<div class="line">    $filter-&gt;add_pattern(<span class="stringliteral">&#39;*.txt&#39;</span>);</div>
<div class="line"><span class="preprocessor">    #$filter-&gt;add_pattern(&quot;*&quot;);</span></div>
<div class="line"><span class="preprocessor"></span>    $filter-&gt;set_name(<span class="stringliteral">&#39;txt and csv files&#39;</span>);</div>
<div class="line">    $dlgxml-&gt;get_widget($filechooserInput)-&gt;add_filter($filter);</div>
<div class="line">    $filter = Gtk2::FileFilter-&gt;new();</div>
<div class="line">    $filter-&gt;add_pattern(<span class="charliteral">&#39;*&#39;</span>);</div>
<div class="line">    $filter-&gt;set_name(<span class="stringliteral">&#39;all files&#39;</span>);</div>
<div class="line">    $dlgxml-&gt;get_widget($filechooserInput)-&gt;add_filter($filter);</div>
<div class="line">    </div>
<div class="line">    $dlgxml-&gt;get_widget($filechooserInput)-&gt;set_select_multiple(1);</div>
<div class="line">    $dlgxml-&gt;get_widget($filechooserInput)-&gt;signal_connect(<span class="stringliteral">&#39;selection-changed&#39;</span> =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a49fbed1048b5bb804de6179898b5217c">onFileChanged</a>, $dlgxml);</div>
<div class="line"></div>
<div class="line">    $dlgxml-&gt;get_widget($chkNew)-&gt;signal_connect(toggled =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a4ab9c0e666ee796ae6b348b3934c4eb8">onNewToggled</a>, [$gui, $dlgxml]);</div>
<div class="line">    $dlgxml-&gt;get_widget($txtImportNew)-&gt;signal_connect(changed =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a05ce46fcf74d4d682553991436e5ef28">onNewChanged</a>, [$gui, $dlgxml]);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> ($dlgxml, $dlg);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="af35198c4b47dd9d2f118f3634a45acd1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::makeRemapColumnsDialog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-makeRemapColumnsDialog' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-makeRemapColumnsDialog-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-makeRemapColumnsDialog-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-makeRemapColumnsDialog-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in makeRemapColumnsDialog: 66</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#af35198c4b47dd9d2f118f3634a45acd1">makeRemapColumnsDialog</a> {</div>
<div class="line">    my $header           = shift; # ref to column header array</div>
<div class="line">    my $wndMain          = shift;</div>
<div class="line">    my $other_props      = shift || [];</div>
<div class="line">    my $column_overrides = shift;</div>
<div class="line"></div>
<div class="line">    my $num_columns = @$header;</div>
<div class="line">    print <span class="stringliteral">&quot;[GUI] Generating make columns dialog for $num_columns columns\n&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make dialog</span></div>
<div class="line"><span class="preprocessor"></span>    my $dlg = Gtk2::Dialog-&gt;new(</div>
<div class="line">        <span class="stringliteral">&#39;Choose columns&#39;</span>,</div>
<div class="line">        $wndMain,</div>
<div class="line">        <span class="stringliteral">&#39;modal&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;gtk-cancel&#39;</span> =&gt; <span class="stringliteral">&#39;cancel&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;gtk-ok&#39;</span>     =&gt; <span class="stringliteral">&#39;ok&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;gtk-help&#39;</span>   =&gt; <span class="stringliteral">&#39;help&#39;</span>,</div>
<div class="line">    );</div>
<div class="line">    my $label = Gtk2::Label-&gt;new(<span class="stringliteral">&quot;&lt;b&gt;Select column types&lt;/b&gt;&quot;</span>);</div>
<div class="line">    $label-&gt;set_use_markup(1);</div>
<div class="line">    $dlg-&gt;vbox-&gt;pack_start ($label, 0, 0, 0);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make table    </span></div>
<div class="line"><span class="preprocessor"></span>    my $table = Gtk2::Table-&gt;new($num_columns + 1, 8);</div>
<div class="line">    $table-&gt;set_row_spacings(5);</div>
<div class="line">    $table-&gt;set_col_spacings(20);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make scroll window for table</span></div>
<div class="line"><span class="preprocessor"></span>    my $scroll = Gtk2::ScrolledWindow-&gt;new;</div>
<div class="line">    $scroll-&gt;add_with_viewport($table);</div>
<div class="line">    $scroll-&gt;set_policy(<span class="stringliteral">&#39;never&#39;</span>, <span class="stringliteral">&#39;automatic&#39;</span>);</div>
<div class="line">    $dlg-&gt;vbox-&gt;pack_start($scroll, 1, 1, 5);</div>
<div class="line"></div>
<div class="line">    my $col = 0;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make ID column</span></div>
<div class="line"><span class="preprocessor"></span>    $label = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;&lt;b&gt;#&lt;/b&gt;&#39;</span>);</div>
<div class="line">    $label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $label-&gt;set_use_markup(1);</div>
<div class="line">    $table-&gt;attach($label, $col, $col + 1, 0, 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make header column</span></div>
<div class="line"><span class="preprocessor"></span>    $col ++;</div>
<div class="line">    $label = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;&lt;b&gt;Column&lt;/b&gt;&#39;</span>);</div>
<div class="line">    $label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $label-&gt;set_use_markup(1);</div>
<div class="line">    $table-&gt;attach($label, $col, $col + 1, 0, 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line"></div>
<div class="line">    $col ++;</div>
<div class="line">    $label = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;Type&#39;</span>);</div>
<div class="line">    $label-&gt;set_alignment(0.5, 1);</div>
<div class="line">    $table-&gt;attach($label, $col, $col + 1, 0, 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Add columns</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # use row_widgets to store the radio buttons, spinboxes</span></div>
<div class="line"><span class="preprocessor"></span>    my $row_widgets = [];</div>
<div class="line">    <span class="keywordflow">foreach</span> my $i (0..($num_columns - 1)) {</div>
<div class="line">        <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a26add8e097cac4d1d74504aff872d4f8">addRemapRow</a>($row_widgets, $table, $i, $header-&gt;[$i], $other_props, $column_overrides);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $dlg-&gt;set_resizable(1);</div>
<div class="line">    $dlg-&gt;set_default_size(0, 400);</div>
<div class="line">    $dlg-&gt;show_all();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> ($dlg, $row_widgets);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a054f614613726d9d31c8c666831241c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::makeReorderDialog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-makeReorderDialog' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-makeReorderDialog-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-makeReorderDialog-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-makeReorderDialog-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in makeReorderDialog: 33</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a054f614613726d9d31c8c666831241c1">makeReorderDialog</a> {</div>
<div class="line">    my $gui = shift;</div>
<div class="line">    my $columns = shift;</div>
<div class="line"></div>
<div class="line">    my $dlgxml = Gtk2::GladeXML-&gt;new($gui-&gt;getGladeFile, <span class="stringliteral">&#39;dlgReorderColumns&#39;</span>);</div>
<div class="line">    my $dlg = $dlgxml-&gt;get_widget(<span class="stringliteral">&#39;dlgReorderColumns&#39;</span>);</div>
<div class="line">    $dlg-&gt;set_transient_for( $gui-&gt;getWidget(<span class="stringliteral">&#39;wndMain&#39;</span>) );</div>
<div class="line">    </div>
<div class="line">    my $listGroups = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#ad5626b0b654acae4a217396e99d811ec">setupReorderList</a>(<span class="stringliteral">&#39;groups&#39;</span>, $dlgxml, $columns-&gt;{groups});</div>
<div class="line">    my $listLabels = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#ad5626b0b654acae4a217396e99d811ec">setupReorderList</a>(<span class="stringliteral">&#39;labels&#39;</span>, $dlgxml, $columns-&gt;{labels});</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make the selections mutually exclusive (if selection made, unselect selection in other list)</span></div>
<div class="line"><span class="preprocessor"></span>    $listGroups-&gt;get_selection-&gt;signal_connect(</div>
<div class="line">        changed =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a3b089fe4c44ae66050a555e43096a7da">unselectOther</a>,</div>
<div class="line">        $listLabels,</div>
<div class="line">    );</div>
<div class="line">    $listLabels-&gt;get_selection-&gt;signal_connect(</div>
<div class="line">        changed =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a3b089fe4c44ae66050a555e43096a7da">unselectOther</a>,</div>
<div class="line">        $listGroups,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Connect up/down buttons</span></div>
<div class="line"><span class="preprocessor"></span>    $dlgxml-&gt;get_widget(<span class="stringliteral">&#39;btnUp&#39;</span>)-&gt;signal_connect(</div>
<div class="line">        clicked =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a5c1f3fbd4d9277247d68e660cc689267">onUpDown</a>,</div>
<div class="line">        [<span class="stringliteral">&#39;up&#39;</span>, $listGroups, $listLabels],</div>
<div class="line">    );</div>
<div class="line">    $dlgxml-&gt;get_widget(<span class="stringliteral">&#39;btnDown&#39;</span>)-&gt;signal_connect(</div>
<div class="line">        clicked =&gt; \&amp;<a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a5c1f3fbd4d9277247d68e660cc689267">onUpDown</a>,</div>
<div class="line">        [<span class="stringliteral">&#39;down&#39;</span>, $listGroups, $listLabels],</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> ($dlgxml, $dlg);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a49fbed1048b5bb804de6179898b5217c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::onFileChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onFileChanged' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onFileChanged-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onFileChanged-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onFileChanged-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onFileChanged: 21</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a49fbed1048b5bb804de6179898b5217c">onFileChanged</a> {</div>
<div class="line">    my $chooser = shift;</div>
<div class="line">    my $dlgxml = shift;</div>
<div class="line"></div>
<div class="line">    my $text = $dlgxml-&gt;get_widget(<span class="stringliteral">&quot;txtImportNew$import_n&quot;</span>);</div>
<div class="line">    my @filenames = $chooser-&gt;get_filenames();</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Default name to selected filename</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ( scalar @filenames &gt; 0) {</div>
<div class="line">        my $filename = $filenames[0];</div>
<div class="line"><span class="preprocessor">        #print $filename . &quot;\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #my $filename_in_local_encoding = Glib::filename_from_unicode $filename;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #my $z = -f $filename_in_local_encoding;</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> ($filename =~ /\.[^.]*/) {</div>
<div class="line">            my($name, $dir, $suffix) = fileparse($filename, qr/\.[^.]*/);</div>
<div class="line">            $text-&gt;set_text($name);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a05ce46fcf74d4d682553991436e5ef28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::onNewChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onNewChanged' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onNewChanged-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onNewChanged-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onNewChanged-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onNewChanged: 21</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a05ce46fcf74d4d682553991436e5ef28">onNewChanged</a> {</div>
<div class="line">    my $text = shift;</div>
<div class="line">    my $args = shift;</div>
<div class="line">    my ($gui, $dlgxml) = @{$args};</div>
<div class="line"></div>
<div class="line">    my $name = $text-&gt;get_text();</div>
<div class="line">    <span class="keywordflow">if</span> ($name ne <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"></div>
<div class="line">        $dlgxml-&gt;get_widget($btnNext)-&gt;set_sensitive(1);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        # Disable Next if have no basedatas</span></div>
<div class="line"><span class="preprocessor"></span>        my $selected = $gui-&gt;getProject-&gt;getSelectedBaseDataIter();</div>
<div class="line">        <span class="keywordflow">if</span> (not $selected) {</div>
<div class="line">            $dlgxml-&gt;get_widget($btnNext)-&gt;set_sensitive(0);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a4ab9c0e666ee796ae6b348b3934c4eb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::onNewToggled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onNewToggled' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onNewToggled-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onNewToggled-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onNewToggled-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onNewToggled: 20</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a4ab9c0e666ee796ae6b348b3934c4eb8">onNewToggled</a> {</div>
<div class="line">    my $checkbox = shift;</div>
<div class="line">    my $args = shift;</div>
<div class="line">    my ($gui, $dlgxml) = @{$args};</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($checkbox-&gt;get_active) {</div>
<div class="line"><span class="preprocessor">        # New basedata</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        $dlgxml-&gt;get_widget($txtImportNew)-&gt;set_sensitive(1);</div>
<div class="line">        $dlgxml-&gt;get_widget($comboImportBasedatas)-&gt;set_sensitive(0);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="preprocessor">        # Must select existing - NOTE: checkbox is disabled if there aren&#39;t any</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        $dlgxml-&gt;get_widget($txtImportNew)-&gt;set_sensitive(0);</div>
<div class="line">        $dlgxml-&gt;get_widget($comboImportBasedatas)-&gt;set_sensitive(1);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a27d50b82bebaaaf7e3428332b4f2052f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::onTypeComboChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onTypeComboChanged' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onTypeComboChanged-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onTypeComboChanged-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onTypeComboChanged-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onTypeComboChanged: 13</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a27d50b82bebaaaf7e3428332b4f2052f">onTypeComboChanged</a> {</div>
<div class="line">    my $spins = shift;</div>
<div class="line">    my $combo = shift;</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    # show/hide other widgets depending on if selected is to be a group column</span></div>
<div class="line"><span class="preprocessor"></span>    my $selected = $combo-&gt;get_active_text;</div>
<div class="line">    my $show_or_hide = $selected eq <span class="stringliteral">&#39;Group&#39;</span> ? <span class="stringliteral">&#39;show&#39;</span> : <span class="stringliteral">&#39;hide&#39;</span>;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $widget (@$spins) {</div>
<div class="line">        $widget-&gt;$show_or_hide;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a5c1f3fbd4d9277247d68e660cc689267"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::onUpDown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-onUpDown' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-onUpDown-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-onUpDown-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-onUpDown-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in onUpDown: 38</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a5c1f3fbd4d9277247d68e660cc689267">onUpDown</a> {</div>
<div class="line">    shift;</div>
<div class="line">    my $args = shift;</div>
<div class="line">    my ($btn, $list1, $list2) = @$args;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Get selected iter</span></div>
<div class="line"><span class="preprocessor"></span>    my ($model, $iter);</div>
<div class="line"></div>
<div class="line">    ($model, $iter) = $list1-&gt;get_selection-&gt;get_selected();</div>
<div class="line">    <span class="keywordflow">if</span> (not $iter) {</div>
<div class="line"><span class="preprocessor">        # try other list</span></div>
<div class="line"><span class="preprocessor"></span>        ($model, $iter) = $list2-&gt;get_selection-&gt;get_selected();</div>
<div class="line">        <span class="keywordflow">if</span> (not $iter) {</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($btn eq <span class="stringliteral">&#39;up&#39;</span>) {</div>
<div class="line">        my $path = $model-&gt;get_path($iter);</div>
<div class="line">        <span class="keywordflow">if</span> ($path-&gt;prev()) {</div>
<div class="line"></div>
<div class="line">            my $iter_prev = $model-&gt;get_iter($path);</div>
<div class="line">            $model-&gt;move_before($iter, $iter_prev);</div>
<div class="line"></div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="preprocessor">            # If at the top already, move to bottom</span></div>
<div class="line"><span class="preprocessor"></span>            $model-&gt;move_before($iter, undef);</div>
<div class="line"></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    elsif ($btn eq <span class="stringliteral">&#39;down&#39;</span>) {</div>
<div class="line">        $model-&gt;move_after($iter, $model-&gt;iter_next($iter));</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a6aefee59dbfabe6bf593d13aeb14cfe6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-run' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-run-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-run-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-run-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in run: 359</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a6aefee59dbfabe6bf593d13aeb14cfe6">run</a> {</div>
<div class="line">    my $gui = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # 1. Get the target basedata &amp; filename</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span>    my ($dlgxml, $dlg) = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#ac2814d3e57072b75e7ec24f22a67bdcd">makeFilenameDialog</a>($gui);</div>
<div class="line">    my $response = $dlg-&gt;run();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ($response ne <span class="stringliteral">&#39;ok&#39;</span>) {  #  clean up and drop out</div>
<div class="line">        $dlg-&gt;destroy;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    my ($use_new, $basedata_ref);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #if ($response eq &#39;ok&#39;) {</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    $use_new = $dlgxml-&gt;get_widget($chkNew)-&gt;get_active();</div>
<div class="line">    <span class="keywordflow">if</span> ($use_new) {</div>
<div class="line"><span class="preprocessor">        # Add it</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        # FIXME: why am i adding it now?? better at the end?</span></div>
<div class="line"><span class="preprocessor"></span>        my $basedata_name = $dlgxml-&gt;get_widget($txtImportNew)-&gt;get_text();</div>
<div class="line"><span class="preprocessor">        #$basedata_ref = $gui-&gt;getProject-&gt;addBaseData($basedata_name);</span></div>
<div class="line"><span class="preprocessor"></span>        $basedata_ref = <a class="code" href="classBiodiverse_1_1BaseData.html">Biodiverse::BaseData</a>-&gt;<a class="code" href="classBiodiverse_1_1BaseData.html#a682bd0a7ca87362adb35ffb3a9d3c44f">new</a> (</div>
<div class="line">            NAME       =&gt; $basedata_name,</div>
<div class="line">            CELL_SIZES =&gt; [],  #  <span class="keywordflow">default</span>, gets overridden later</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="preprocessor">        # Get selected basedata</span></div>
<div class="line"><span class="preprocessor"></span>        my $selected = $dlgxml-&gt;get_widget($comboImportBasedatas)-&gt;get_active_iter();</div>
<div class="line">        $basedata_ref = $gui-&gt;getProject-&gt;getBasedataModel-&gt;get($selected, MODEL_OBJECT);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Get selected filenames</span></div>
<div class="line"><span class="preprocessor"></span>    my @filenames = $dlgxml-&gt;get_widget($filechooserInput)-&gt;get_filenames();</div>
<div class="line">    my @file_names_tmp = @filenames;</div>
<div class="line">    <span class="keywordflow">if</span> (scalar @filenames &gt; 5) {</div>
<div class="line">        @file_names_tmp = @filenames[0..5];</div>
<div class="line">        push @file_names_tmp, <span class="stringliteral">&#39;... plus &#39;</span> . (scalar @filenames - 5) . <span class="stringliteral">&#39; others&#39;</span>;</div>
<div class="line">    }</div>
<div class="line">    my $file_list_as_text = join (<span class="stringliteral">&quot;\n&quot;</span>, @file_names_tmp);</div>
<div class="line">    $dlg-&gt;destroy();</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # 1a. Get parameters to use</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span>    $dlgxml = Gtk2::GladeXML-&gt;new($gui-&gt;getGladeFile, <span class="stringliteral">&#39;dlgImportParameters&#39;</span>);</div>
<div class="line">    $dlg = $dlgxml-&gt;get_widget(<span class="stringliteral">&#39;dlgImportParameters&#39;</span>);</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    #  add file name labels to display</span></div>
<div class="line"><span class="preprocessor"></span>    my $vbox = Gtk2::VBox-&gt;new (0, 0);</div>
<div class="line">    my $file_title = Gtk2::Label -&gt;new(<span class="stringliteral">&#39;&lt;b&gt;Files:&lt;/b&gt;&#39;</span>);</div>
<div class="line">    $file_title-&gt;set_use_markup(1);</div>
<div class="line">    $file_title-&gt;set_alignment (0, 1);</div>
<div class="line">    $vbox-&gt;pack_start ($file_title, 0, 0, 0);</div>
<div class="line"></div>
<div class="line">    my $file_list_label = Gtk2::Label -&gt;new($file_list_as_text . <span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line">    $file_list_label-&gt;set_alignment (0, 1);</div>
<div class="line">    $vbox-&gt;pack_start ($file_list_label, 0, 0, 0);</div>
<div class="line">    my $import_vbox = $dlgxml-&gt;get_widget(<span class="stringliteral">&#39;import_parameters_vbox&#39;</span>);</div>
<div class="line">    $import_vbox-&gt;pack_start($vbox, 0, 0, 0);</div>
<div class="line">    $import_vbox-&gt;reorder_child($vbox, 0);  #  move to start</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  get any options</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # Get the Parameters metadata</span></div>
<div class="line"><span class="preprocessor"></span>    my %args = $basedata_ref-&gt;get_args (sub =&gt; <span class="stringliteral">&#39;import_data&#39;</span>);</div>
<div class="line">    my $params = $args{parameters};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Build widgets for parameters</span></div>
<div class="line"><span class="preprocessor"></span>    my $table = $dlgxml-&gt;get_widget (<span class="stringliteral">&#39;tableImportParameters&#39;</span>);</div>
<div class="line"><span class="preprocessor">    # (passing $dlgxml because generateFile uses existing glade widget on the dialog)</span></div>
<div class="line"><span class="preprocessor"></span>    my $extractors = <a class="code" href="classBiodiverse_1_1GUI_1_1ParametersTable.html#a80558ea4059a628b54acc70ffad035ce">Biodiverse::GUI::ParametersTable::fill</a> ($params, $table, $dlgxml); </div>
<div class="line">    </div>
<div class="line">    $dlg-&gt;show_all;</div>
<div class="line">    $response = $dlg-&gt;run;</div>
<div class="line">    $dlg-&gt;destroy;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> ($response ne <span class="stringliteral">&#39;ok&#39;</span>) {  #  clean up and drop out</div>
<div class="line">        <span class="keywordflow">if</span> ($use_new) {</div>
<div class="line">            $gui-&gt;getProject-&gt;deleteBaseData($basedata_ref);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    my $import_params = <a class="code" href="classBiodiverse_1_1GUI_1_1ParametersTable.html#abb800b0bcd2dd83d887eb7eaa8ed2a1c">Biodiverse::GUI::ParametersTable::extract</a> ($extractors);</div>
<div class="line">    my %import_params = @$import_params;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Get header columns</span></div>
<div class="line"><span class="preprocessor"></span>    print <span class="stringliteral">&quot;[GUI] Discovering columns from $filenames[0]\n&quot;</span>;</div>
<div class="line">    my $fh;</div>
<div class="line">    my $filename_utf8 = Glib::filename_display_name $filenames[0];</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #use Path::Class::Unicode;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $file = ufile(&quot;path&quot;, $filename_utf8);</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #print $file . &quot;\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    # have unicode filename issues - see http://code.google.com/p/biodiverse/issues/detail?id=272</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> (not open $fh, <span class="stringliteral">&#39;&lt;:via(File::BOM)&#39;</span>, $filename_utf8) {</div>
<div class="line">        my $exists = -e $filename_utf8 || 0;</div>
<div class="line">        my $msg = <span class="stringliteral">&quot;Unable to open $filenames[0].\n&quot;</span>;</div>
<div class="line">        $msg .= $exists</div>
<div class="line">            ? <span class="stringliteral">&quot;Check file read permissions.&quot;</span></div>
<div class="line">            : <span class="stringliteral">&quot;If the file name contains unicode characters then please rename the file so its name does not contain them.\n&quot;</span></div>
<div class="line">              . <span class="stringliteral">&quot;See http://code.google.com/p/biodiverse/issues/detail?id=272&quot;</span>;</div>
<div class="line">        $msg .= <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">        croak $msg;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $line = &lt;$fh&gt;;</div>
<div class="line">    close ($fh);</div>
<div class="line"></div>
<div class="line">    my $sep     = $import_params{input_sep_char} eq <span class="stringliteral">&#39;guess&#39;</span> </div>
<div class="line">                ? $gui-&gt;getProject-&gt;guess_field_separator (<span class="keywordtype">string</span> =&gt; $line)</div>
<div class="line">                : $import_params{input_sep_char};</div>
<div class="line"></div>
<div class="line">    my $quotes  = $import_params{input_quote_char} eq <span class="stringliteral">&#39;guess&#39;</span></div>
<div class="line">                ? $gui-&gt;getProject-&gt;guess_quote_char (<span class="keywordtype">string</span> =&gt; $line)</div>
<div class="line">                : $import_params{input_quote_char};</div>
<div class="line">            </div>
<div class="line">    my $eol     = $gui-&gt;getProject-&gt;guess_eol (<span class="keywordtype">string</span> =&gt; $line);</div>
<div class="line"></div>
<div class="line">    my @header  = $gui-&gt;getProject-&gt;csv2list(</div>
<div class="line">        <span class="keywordtype">string</span>      =&gt; $line,</div>
<div class="line">        quote_char  =&gt; $quotes,</div>
<div class="line">        sep_char    =&gt; $sep,</div>
<div class="line">        eol         =&gt; $eol,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  R data frames are saved missing the first field in the header</span></div>
<div class="line"><span class="preprocessor"></span>    my $is_r_data_frame = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a270c2515e45e2b1647f5c3549acc0c04">check_if_r_data_frame</a> (</div>
<div class="line">        file     =&gt; $filenames[0],</div>
<div class="line">        quotes   =&gt; $quotes,</div>
<div class="line">        sep_char =&gt; $sep,</div>
<div class="line">    );</div>
<div class="line"><span class="preprocessor">    #  add a field to the header if needed</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ($is_r_data_frame) {</div>
<div class="line">        unshift @header, <span class="stringliteral">&#39;R_data_frame_col_0&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $use_matrix = $import_params{data_in_matrix_form};</div>
<div class="line">    my $col_names_for_dialog = \@header;</div>
<div class="line">    my $col_options = undef;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($use_matrix) {</div>
<div class="line">        $col_options = [qw /</div>
<div class="line">            Ignore</div>
<div class="line">            Group</div>
<div class="line">            Text_group</div>
<div class="line">            Label_start_col</div>
<div class="line">            Label_end_col</div>
<div class="line">            Include_columns</div>
<div class="line">            Exclude_columns</div>
<div class="line">        /];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # 2. Get column types (using first file...)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span>    my $row_widgets;</div>
<div class="line">    ($dlg, $row_widgets) = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#ade686542cddd3ed03ce74183481e517f">makeColumnsDialog</a> (</div>
<div class="line">        $col_names_for_dialog,</div>
<div class="line">        $gui-&gt;getWidget(<span class="stringliteral">&#39;wndMain&#39;</span>),</div>
<div class="line">        $col_options,</div>
<div class="line">        $file_list_as_text,</div>
<div class="line">    );</div>
<div class="line">    my $column_settings;</div>
<div class="line">    </div>
<div class="line">    GET_COLUMN_TYPES:</div>
<div class="line">    <span class="keywordflow">while</span> (1) { # Keep showing dialog until have at least one label &amp; group</div>
<div class="line">        $response = $dlg-&gt;run();</div>
<div class="line">        <span class="keywordflow">if</span> ($response eq <span class="stringliteral">&#39;help&#39;</span>) {</div>
<div class="line"><span class="preprocessor">            #  do stuff</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            #print &quot;hjelp me!\n&quot;;</span></div>
<div class="line"><span class="preprocessor"></span>            <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a315f33f27641f927717cbb7567618dbf">explain_import_col_options</a>($dlg, $use_matrix);</div>
<div class="line">        }</div>
<div class="line">        elsif ($response eq <span class="stringliteral">&#39;ok&#39;</span>) {</div>
<div class="line">            $column_settings = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a87f7201ed059131465df3dad6184e80b">getColumnSettings</a>($row_widgets, $col_names_for_dialog);</div>
<div class="line">            my $num_groups = scalar @{$column_settings-&gt;{groups}};</div>
<div class="line">            my $num_labels = 0;</div>
<div class="line">            <span class="keywordflow">if</span> ($use_matrix) {</div>
<div class="line">                <span class="keywordflow">if</span> (exists $column_settings-&gt;{Label_start_col}) {  #  not always present</div>
<div class="line">                    $num_labels = scalar @{$column_settings-&gt;{Label_start_col}};</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                $num_labels = scalar @{$column_settings-&gt;{labels}};</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> ($num_groups == 0 || $num_labels == 0) {</div>
<div class="line">                my $text = $use_matrix</div>
<div class="line">                     ? <span class="stringliteral">&#39;Please select at least one group and the label start column&#39;</span></div>
<div class="line">                     : <span class="stringliteral">&#39;Please select at least one label and one group&#39;</span>;</div>
<div class="line">                </div>
<div class="line">                my $msg = Gtk2::MessageDialog-&gt;new (</div>
<div class="line">                    undef,</div>
<div class="line">                    <span class="stringliteral">&#39;modal&#39;</span>,</div>
<div class="line">                    <span class="stringliteral">&#39;error&#39;</span>,</div>
<div class="line">                    <span class="stringliteral">&#39;ok&#39;</span>,</div>
<div class="line">                    $text</div>
<div class="line">                );</div>
<div class="line">                </div>
<div class="line">                $msg-&gt;run();</div>
<div class="line">                $msg-&gt;destroy();</div>
<div class="line">                $column_settings = undef;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                last GET_COLUMN_TYPES;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            last GET_COLUMN_TYPES;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    $dlg-&gt;destroy();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (not $column_settings) {  #  clean up and drop out</div>
<div class="line">        <span class="keywordflow">if</span> ($use_new) {</div>
<div class="line">            $gui-&gt;getProject-&gt;deleteBaseData ($basedata_ref) ;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # 3. Get column order</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span>    my $old_labels_array = $column_settings-&gt;{labels};</div>
<div class="line">    <span class="keywordflow">if</span> ($use_matrix) {</div>
<div class="line">        $column_settings-&gt;{labels}</div>
<div class="line">            = [{name =&gt; <span class="stringliteral">&#39;From file&#39;</span>, <span class="keywordtype">id</span> =&gt; 0}];</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    ($dlgxml, $dlg) = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a054f614613726d9d31c8c666831241c1">makeReorderDialog</a>($gui, $column_settings);</div>
<div class="line">    $response = $dlg-&gt;run();</div>
<div class="line">    </div>
<div class="line">    $params = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a53afc90128d489b84593e1ddc097f183">fillParams</a>($dlgxml);</div>
<div class="line">    $dlg-&gt;destroy();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($response ne <span class="stringliteral">&#39;ok&#39;</span>) {  #  clean up and drop out</div>
<div class="line">        <span class="keywordflow">if</span> ($use_new) {</div>
<div class="line">            $gui-&gt;getProject-&gt;deleteBaseData ($basedata_ref);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($use_matrix) {</div>
<div class="line">        $column_settings-&gt;{labels} = $old_labels_array;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # 3a. Load the label and group properties</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span>    my %other_properties = (</div>
<div class="line">        label =&gt; [qw /range sample_count/],</div>
<div class="line">        group =&gt; [<span class="stringliteral">&#39;sample_count&#39;</span>],    </div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">foreach</span> my $type (qw /label group/) {</div>
<div class="line">        <span class="keywordflow">if</span> ($import_params{<span class="stringliteral">&quot;use_$type\_properties&quot;</span>}) {</div>
<div class="line">            my %remap_data = <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a771ead5712e8d41890a1777cfd41b409">getRemapInfo</a> (</div>
<div class="line">                $gui,</div>
<div class="line">                $filenames[0],</div>
<div class="line">                $type,</div>
<div class="line">                $other_properties{$type},</div>
<div class="line">            );</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">            #  now do something with them...</span></div>
<div class="line"><span class="preprocessor"></span>            my $remap;</div>
<div class="line">            <span class="keywordflow">if</span> ($remap_data{file}) {</div>
<div class="line"><span class="preprocessor">                #my $file = $remap_data{file};</span></div>
<div class="line"><span class="preprocessor"></span>                $remap = <a class="code" href="classBiodiverse_1_1ElementProperties.html">Biodiverse::ElementProperties</a>-&gt;new;</div>
<div class="line">                $remap-&gt;<a class="code" href="classBiodiverse_1_1ElementProperties.html#a410bcc40aeecdc8113753b98af435f34">import_data</a> (%remap_data);</div>
<div class="line">            }</div>
<div class="line">            $import_params{<span class="stringliteral">&quot;$type\_properties&quot;</span>} = $remap;</div>
<div class="line">            <span class="keywordflow">if</span> (not defined $remap) {</div>
<div class="line">                $import_params{<span class="stringliteral">&quot;use_$type\_properties&quot;</span>} = undef;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # 4. Load the data</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #########</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    # Set the cellsize and origins parameters if we are new</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> ($use_new) {</div>
<div class="line">        $basedata_ref-&gt;set_param(CELL_SIZES   =&gt; $params-&gt;{CELL_SIZES});</div>
<div class="line">        $basedata_ref-&gt;set_param(CELL_ORIGINS =&gt; $params-&gt;{CELL_ORIGINS});</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  get the sample count columns.  could do in fillParams, but these are</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    not reordered while fillParams deals with the re-ordering.  </span></div>
<div class="line"><span class="preprocessor"></span>    my @sample_count_columns;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $index (@{$column_settings-&gt;{sample_counts}}) {</div>
<div class="line">        push @sample_count_columns, $index-&gt;{<span class="keywordtype">id</span>};</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    my @include_columns;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $index (@{$column_settings-&gt;{include_columns}}) {</div>
<div class="line">        push @include_columns, $index-&gt;{<span class="keywordtype">id</span>};</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    my @exclude_columns;</div>
<div class="line">    <span class="keywordflow">foreach</span> my $index (@{$column_settings-&gt;{exclude_columns}}) {</div>
<div class="line">        push @exclude_columns, $index-&gt;{<span class="keywordtype">id</span>};</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    my %rest_of_options;</div>
<div class="line">    my %checked_already;</div>
<div class="line">    my @tmp = qw/sample_counts exclude_columns include_columns groups labels/;</div>
<div class="line">    @checked_already{@tmp} = (1) x scalar @tmp;  #  clunky</div>
<div class="line">    </div>
<div class="line">    COLUMN_SETTING:</div>
<div class="line">    <span class="keywordflow">foreach</span> my $key (keys %$column_settings) {</div>
<div class="line">        next COLUMN_SETTING <span class="keywordflow">if</span> exists $checked_already{$key};</div>
<div class="line">        </div>
<div class="line">        my $array_ref = [];</div>
<div class="line">        <span class="keywordflow">foreach</span> my $index (@{$column_settings-&gt;{$key}}) {</div>
<div class="line">            push @$array_ref, $index-&gt;{<span class="keywordtype">id</span>};</div>
<div class="line">        }</div>
<div class="line">        $key = lc $key;</div>
<div class="line">        $rest_of_options{$key} = $array_ref;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  get the various columns    </span></div>
<div class="line"><span class="preprocessor"></span>    my %gp_lb_cols;</div>
<div class="line">    <span class="keywordflow">while</span> (my ($key, $value) = each %$params) {</div>
<div class="line">        next <span class="keywordflow">if</span> $key =~ /^CELL_(?:SIZE|ORIGINS)/;</div>
<div class="line">        $gp_lb_cols{lc $key} = $value;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    my $success = eval {</div>
<div class="line">        $basedata_ref-&gt;load_data(</div>
<div class="line">            %import_params,</div>
<div class="line">            %rest_of_options,</div>
<div class="line">            %gp_lb_cols,</div>
<div class="line">            input_files             =&gt; \@filenames,</div>
<div class="line">            include_columns         =&gt; \@include_columns,</div>
<div class="line">            exclude_columns         =&gt; \@exclude_columns,</div>
<div class="line">            sample_count_columns    =&gt; \@sample_count_columns,</div>
<div class="line">        )</div>
<div class="line">    };</div>
<div class="line">    <span class="keywordflow">if</span> ($EVAL_ERROR) {</div>
<div class="line">        my $text = $EVAL_ERROR;</div>
<div class="line">        <span class="keywordflow">if</span> (not $use_new) {</div>
<div class="line">            $text .= <span class="stringliteral">&quot;\tWarning: Records prior to this line have been imported.\n&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">        $gui-&gt;report_error ($text);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($success) {</div>
<div class="line">        <span class="keywordflow">if</span> ($use_new) {</div>
<div class="line">            $gui-&gt;getProject-&gt;addBaseData($basedata_ref);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> $basedata_ref;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="ad5626b0b654acae4a217396e99d811ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::setupReorderList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-setupReorderList' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-setupReorderList-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-setupReorderList-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-setupReorderList-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in setupReorderList: 30</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#ad5626b0b654acae4a217396e99d811ec">setupReorderList</a> {</div>
<div class="line">    my $type = shift;</div>
<div class="line">    my $dlgxml = shift;</div>
<div class="line">    my $columns = shift;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Create the model</span></div>
<div class="line"><span class="preprocessor"></span>    my $model = Gtk2::ListStore-&gt;new(<span class="stringliteral">&#39;Glib::String&#39;</span>, <span class="stringliteral">&#39;Glib::Scalar&#39;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">foreach</span> my $column (@{$columns}) {</div>
<div class="line">        my $iter = $model-&gt;append();</div>
<div class="line">        $model-&gt;set($iter, 0, $column-&gt;{name});</div>
<div class="line">        $model-&gt;set($iter, 1, $column);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line"><span class="preprocessor">    # Initialise the list</span></div>
<div class="line"><span class="preprocessor"></span>    my $list = $dlgxml-&gt;get_widget($type);</div>
<div class="line">    </div>
<div class="line">    my $colName = Gtk2::TreeViewColumn-&gt;new();</div>
<div class="line">    my $nameRenderer = Gtk2::CellRendererText-&gt;new();</div>
<div class="line">    $colName-&gt;set_sizing(<span class="stringliteral">&#39;fixed&#39;</span>);</div>
<div class="line">    $colName-&gt;pack_start($nameRenderer, 1);</div>
<div class="line">    $colName-&gt;add_attribute($nameRenderer,  text =&gt; 0);</div>
<div class="line">    </div>
<div class="line">    $list-&gt;insert_column($colName, -1);</div>
<div class="line">    $list-&gt;set_headers_visible(0);</div>
<div class="line">    $list-&gt;set_reorderable(1);</div>
<div class="line">    $list-&gt;set_model( $model );</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> $list;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="afb2d7098803fdef1e855acdbf6742eb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::show_expl_dialog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-show_expl_dialog' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-show_expl_dialog-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-show_expl_dialog-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-show_expl_dialog-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in show_expl_dialog: 76</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#afb2d7098803fdef1e855acdbf6742eb3">show_expl_dialog</a> {</div>
<div class="line">    my $expl_hash = shift;</div>
<div class="line">    my $parent    = shift;</div>
<div class="line"><span class="preprocessor">#$parent = undef;</span></div>
<div class="line"><span class="preprocessor"></span>    my $dlg = Gtk2::Dialog-&gt;new(</div>
<div class="line">        <span class="stringliteral">&#39;Column options&#39;</span>,</div>
<div class="line">        $parent,</div>
<div class="line">        <span class="stringliteral">&#39;destroy-with-parent&#39;</span>,</div>
<div class="line">        <span class="stringliteral">&#39;gtk-ok&#39;</span> =&gt; <span class="stringliteral">&#39;ok&#39;</span>,</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    my $text_wrapper = Text::Wrapper-&gt;new(columns =&gt; 90);</div>
<div class="line"></div>
<div class="line">    my $table = Gtk2::Table-&gt;new(1 + scalar keys %$expl_hash, 2);</div>
<div class="line">    $table-&gt;set_row_spacings(5);</div>
<div class="line">    $table-&gt;set_col_spacings(5);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # Make scroll window for table</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $scroll = Gtk2::ScrolledWindow-&gt;new;</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$scroll-&gt;add_with_viewport($table);</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$scroll-&gt;set_policy(&#39;never&#39;, &#39;automatic&#39;);</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$dlg-&gt;vbox-&gt;pack_start($scroll, 1, 1, 5);</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    $dlg-&gt;vbox-&gt;pack_start($table, 1, 1, 5);</div>
<div class="line"></div>
<div class="line">    my $col = 0;</div>
<div class="line"><span class="preprocessor">    # Make header column</span></div>
<div class="line"><span class="preprocessor"></span>    my $label1 = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;&lt;b&gt;Column option&lt;/b&gt;&#39;</span>);</div>
<div class="line">    $label1-&gt;set_alignment(0, 1);</div>
<div class="line">    $label1-&gt;set_use_markup(1);</div>
<div class="line">    $table-&gt;attach($label1, 0, 1, $col, $col + 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line">    my $label2 = Gtk2::Label-&gt;new(<span class="stringliteral">&#39;&lt;b&gt;Explanation&lt;/b&gt;&#39;</span>);</div>
<div class="line">    $label2-&gt;set_alignment(0, 1);</div>
<div class="line">    $label2-&gt;set_use_markup(1);</div>
<div class="line">    $table-&gt;attach($label2, 1, 2, $col, $col + 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line"></div>
<div class="line">    my $text;</div>
<div class="line"><span class="preprocessor">    #while (my ($label, $expl) = each %explain) {</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">foreach</span> my $label (sort keys %$expl_hash) {</div>
<div class="line">        $col++;</div>
<div class="line">        my $label_widget = Gtk2::Label-&gt;new(<span class="stringliteral">&quot;&lt;b&gt;$label&lt;/b&gt;&quot;</span>);</div>
<div class="line">        $table-&gt;attach($label_widget, 0, 1, $col, $col + 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line"></div>
<div class="line">        my $expl = $expl_hash-&gt;{$label};</div>
<div class="line"><span class="preprocessor">        #$expl = $text_wrapper-&gt;wrap($expl);</span></div>
<div class="line"><span class="preprocessor"></span>        my $expl_widget  = Gtk2::Label-&gt;new($expl);</div>
<div class="line">        $table-&gt;attach($expl_widget,  1, 2, $col, $col + 1, [<span class="stringliteral">&#39;expand&#39;</span>, <span class="stringliteral">&#39;fill&#39;</span>], <span class="stringliteral">&#39;shrink&#39;</span>, 0, 0);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">foreach</span> my $widget ($expl_widget, $label_widget) {</div>
<div class="line">            $widget-&gt;set_alignment(0, 0);</div>
<div class="line">            $widget-&gt;set_use_markup(1);</div>
<div class="line">            $widget-&gt;set_selectable(1);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $dlg-&gt;set_modal(undef);</div>
<div class="line"><span class="preprocessor">    #$dlg-&gt;set_focus(undef);</span></div>
<div class="line"><span class="preprocessor"></span>    $dlg-&gt;show_all;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #  Callbacks are sort of redundant now, since dialogs are always modal</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #  so we cannot return control to the input window that called us.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #my $destroy_sub = sub {$_[0]-&gt;destroy};</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$dlg-&gt;signal_connect_swapped(</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    response =&gt; $destroy_sub,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    $dlg,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #);</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #$dlg-&gt;signal_connect_swapped(</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    close =&gt; $destroy_sub,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    $dlg,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #);</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    $dlg-&gt;run;</div>
<div class="line">    $dlg-&gt;destroy;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<a class="anchor" id="a3b089fe4c44ae66050a555e43096a7da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public method Biodiverse::GUI::BasedataImport::unselectOther </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented Method  
<div id='codesection-unselectOther' class='dynheader closed' style='cursor:pointer;' onclick='return toggleVisibility(this)'>
    <img id='codesection-unselectOther-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-unselectOther-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-unselectOther-content' class='dyncontent' style='display: none;'>
 <div class="fragment"><div class="line"><span class="preprocessor"># Number of lines of code in unselectOther: 10</span></div>
<div class="line"><span class="preprocessor"></span>sub <a class="code" href="classBiodiverse_1_1GUI_1_1BasedataImport.html#a3b089fe4c44ae66050a555e43096a7da">unselectOther</a> {</div>
<div class="line">    my $selection = shift;</div>
<div class="line">    my $other_list = shift;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($selection-&gt;count_selected_rows() &gt; 0) {</div>
<div class="line">        $other_list-&gt;get_selection-&gt;unselect_all();</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/Biodiverse/GUI/<a class="el" href="BasedataImport_8pm_source.html">BasedataImport.pm</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Biodiverse</b></li><li class="navelem"><b>GUI</b></li><li class="navelem"><a class="el" href="classBiodiverse_1_1GUI_1_1BasedataImport.html">BasedataImport</a></li>
    <li class="footer">Generated on Tue Nov 5 2013 19:07:32 for Biodiverse by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
